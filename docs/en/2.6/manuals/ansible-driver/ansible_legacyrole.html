<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>4. Ansible-LegacyRole &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fe63c2af" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="5. Collect function" href="collect.html" />
    <link rel="prev" title="3. Ansible-Pioneer" href="ansible_pioneer.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.6/manuals/ansible-driver/ansible_legacyrole.html">current</option>
              <option value="../../../../ja/2.6/manuals/ansible-driver/ansible_legacyrole.html">2.6(current)</option>
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_legacyrole.html" selected>2.5</option>
              <option value="../../../../ja/2.4/manuals/ansible-driver/ansible_legacyrole.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/ansible-driver/ansible_legacyrole.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/ansible-driver/ansible_legacyrole.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/ansible-driver/ansible_legacyrole.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/ansible-driver/ansible_legacyrole.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_legacyrole.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/ansible-driver/ansible_legacyrole.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="ansible_pioneer.html" title="前のトピックへ"><span class="section-number">3. </span>Ansible-Pioneer</a></li>
        <li class="next"><a href="collect.html" title="次のトピックへ"><span class="section-number">5. </span>Collect function</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learn/index.html">Learn</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manuals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Ansible Driver</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ansible_common.html">1. Ansible common</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacy.html">2. Ansible-Legacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_pioneer.html">3. Ansible-Pioneer</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">4. Ansible-LegacyRole</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-legacyrole-overview">4.2. Ansible-LegacyRole overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-legacyrole-menu-structure">4.3. Ansible-LegacyRole Menu structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menu">4.3.1. Menu</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-legacyrole-procedure">4.4. Ansible-LegacyRole procedure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ansible-legacyrole-workflow">4.4.1. Ansible-LegacyRole workflow</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-legacyrole-menu-operation">4.5. Ansible-LegacyRole menu operation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#basic-console">4.5.1. Basic console</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-common">4.5.2. Ansible common</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id11">4.5.3. Ansible-LegacyRole</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#describing-structure-code">4.6. Describing Structure code</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#writing-role-packages">4.6.1. Writing Role packages</a></li>
<li class="toctree-l5"><a class="reference internal" href="#writing-itareadme">4.6.2. Writing ITAreadme</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">4.7. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#link-between-ita-menus-and-input-data-when-executing-ansible">4.7.1. Link between ITA menus and Input data when executing Ansible</a></li>
<li class="toctree-l5"><a class="reference internal" href="#result-data-created-when-executing-ansible">4.7.2. Result data created when executing Ansible</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="collect.html">5. Collect function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terraform_driver/index.html">Terraform Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oase/index.html">OASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">4. Ansible-LegacyRole</a><ul>
<li><a class="reference internal" href="#introduction">4.1. Introduction</a></li>
<li><a class="reference internal" href="#ansible-legacyrole-overview">4.2. Ansible-LegacyRole overview</a></li>
<li><a class="reference internal" href="#ansible-legacyrole-menu-structure">4.3. Ansible-LegacyRole Menu structure</a><ul>
<li><a class="reference internal" href="#menu">4.3.1. Menu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-legacyrole-procedure">4.4. Ansible-LegacyRole procedure</a><ul>
<li><a class="reference internal" href="#ansible-legacyrole-workflow">4.4.1. Ansible-LegacyRole workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-legacyrole-menu-operation">4.5. Ansible-LegacyRole menu operation</a><ul>
<li><a class="reference internal" href="#basic-console">4.5.1. Basic console</a></li>
<li><a class="reference internal" href="#ansible-common">4.5.2. Ansible common</a></li>
<li><a class="reference internal" href="#id11">4.5.3. Ansible-LegacyRole</a><ul>
<li><a class="reference internal" href="#movement-list">Movement list</a></li>
<li><a class="reference internal" href="#role-package-management-console">Role package management console</a></li>
<li><a class="reference internal" href="#movement-role-link">Movement-Role link</a></li>
<li><a class="reference internal" href="#variable-nest-management">Variable nest management</a></li>
<li><a class="reference internal" href="#substitute-value-auto-registration-settings">Substitute value auto registration settings</a></li>
<li><a class="reference internal" href="#execute">Execute</a></li>
<li><a class="reference internal" href="#confirm-execution-status">Confirm execution status</a></li>
<li><a class="reference internal" href="#execution-management">Execution management</a></li>
<li><a class="reference internal" href="#target-host">Target host</a></li>
<li><a class="reference internal" href="#substitute-value-management">Substitute value management</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#describing-structure-code">4.6. Describing Structure code</a><ul>
<li><a class="reference internal" href="#writing-role-packages">4.6.1. Writing Role packages</a><ul>
<li><a class="reference internal" href="#master-playbook">Master Playbook</a></li>
<li><a class="reference internal" href="#points-to-note-when-the-role-name-in-the-role-package-is-set-to-the-directory-hierarchy">Points to note when the role name in the role package is set to the directory hierarchy.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-itareadme">4.6.2. Writing ITAreadme</a><ul>
<li><a class="reference internal" href="#ita-readme-file-naming-convention">ITA readme file naming convention</a></li>
<li><a class="reference internal" href="#ita-readme-format">ITA readme format</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">4.7. Appendix</a><ul>
<li><a class="reference internal" href="#link-between-ita-menus-and-input-data-when-executing-ansible">4.7.1. Link between ITA menus and Input data when executing Ansible</a><ul>
<li><a class="reference internal" href="#ansible-legacyrole-input-data">Ansible-LegacyRole input data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#result-data-created-when-executing-ansible">4.7.2. Result data created when executing Ansible</a><ul>
<li><a class="reference internal" href="#ansible-legacyrole-result-data-file-list">Ansible-LegacyRole result data File list</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">Manuals</a></li>
    <li><a href="index.html">Ansible Driver</a></li>
    
    <li><span class="section-number">4. </span>Ansible-LegacyRole</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="ansible-legacyrole">
<h1><span class="section-number">4. </span>Ansible-LegacyRole<a class="headerlink" href="#ansible-legacyrole" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">4.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explain how to use Ansible-LegacyRole.</div>
</div>
</section>
<section id="ansible-legacyrole-overview">
<h2><span class="section-number">4.2. </span>Ansible-LegacyRole overview<a class="headerlink" href="#ansible-legacyrole-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Similar to the Legacy mode, this mode uses the standard Ansible functions to input settings to the different hosts.</div>
<div class="line">Register structure code as packages and configure job patterns and roles.</div>
<div class="line">Use Role packages provided by other departments to install the products and construct environments.</div>
</div>
</section>
<section id="ansible-legacyrole-menu-structure">
<h2><span class="section-number">4.3. </span>Ansible-LegacyRole Menu structure<a class="headerlink" href="#ansible-legacyrole-menu-structure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Ansible-LegacyRole menu structure</div>
</div>
<section id="menu">
<h3><span class="section-number">4.3.1. </span>Menu<a class="headerlink" href="#menu" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Basic console menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The basic console menus used by Ansible-Legacy are as following.</div>
</div>
<table class="docutils align-left" id="id16">
<caption><span class="caption-number">表 4.9 </span><span class="caption-text">基本コンソール メニュー/画面一覧</span><a class="headerlink" href="#id16" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 7.1%" />
<col style="width: 28.6%" />
<col style="width: 64.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>メニュー画面</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>オペレーション一覧</p></td>
<td><p>オペレーション一覧をメンテナンス(閲覧/登録/更新/廃止)できます。</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line"><strong>Ansible common menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic" start="3">
<li><div class="line-block">
<div class="line"><strong>Ansible-LegacyRole menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The Ansible-LegacyRole menus are as following.</div>
</div>
</section>
</section>
<section id="ansible-legacyrole-procedure">
<h2><span class="section-number">4.4. </span>Ansible-LegacyRole procedure<a class="headerlink" href="#ansible-legacyrole-procedure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to use Ansible-LegacyRole</div>
</div>
<section id="ansible-legacyrole-workflow">
<h3><span class="section-number">4.4.1. </span>Ansible-LegacyRole workflow<a class="headerlink" href="#ansible-legacyrole-workflow" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">A standard workflow using Ansible-LegacyRole can be seen below.</div>
</div>
<ul>
<li><p><strong>Workflow details and references</strong></p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Register connection information for the target</strong></div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Device list</span> menu, register connection information for the target.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-device-list"><span class="std std-ref">Device list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register operation name</strong></div>
<div class="line">From the <span class="menuselection">Basic console ▶ Operation list</span> menu, register an Operation list.</div>
<div class="line">For more information, see <a class="reference internal" href="../it_automation_base/basic_console.html#basic-console-operation"><span class="std std-ref">Operation list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">**</span></a>Register Ansible Automation Controller host information (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Ansible Automation Controller host list</span> menu, Register information for the Ansible Automation Controller host.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-ansible-automation-controller-hosts"><span class="std std-ref">Ansible Automation Controller host list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Interface information</strong></div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Interface information</span> menu, select Ansible Core, Ansible Automation Controller or Ansible Execution Agent for the execution engine and register connection information for the execution engine server</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-interface-information"><span class="std std-ref">Interface information</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Execution environment definition template management(If needed)</strong></div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Execution environment definition template management</span> menu, Register the template file for the Execution environment definition file (execution-environment.yml) which is used to build the Execution environment by the ansible-builder within the Ansible Execution Agent.</div>
<div class="line">For more information, see <span class="xref std std-ref">ansible_execution_environment_definition_template_list</span> and <a class="reference internal" href="ansible_common.html#ansible-common-environment-definition-make"><span class="std std-ref">Using the Template file registered to Ansible common ▶ Execution environment definition template ` and  :menuselection:&quot;Execution Environment Parameter Definition&quot; Parameter sheet`</span></a>.</div>
<div class="line">Installing ITA registers a template file that allows users to add python module and ansible galaxy collections.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register &quot;Execution environment parameter definition&quot; parameter sheet. sheet(If needed)</strong></div>
<div class="line">Register Parameters that will be embedded to the execution environment definition file (execution-environment.yml) template file registered in <span class="menuselection">Ansible common ▶ Execution environment definition template management</span>.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-environment-definition-make"><span class="std std-ref">Using the Template file registered to Ansible common ▶ Execution environment definition template ` and  :menuselection:&quot;Execution Environment Parameter Definition&quot; Parameter sheet`</span></a>.</div>
<div class="line">Installing ITA registers , the <span class="menuselection">&quot;Execution environment parameter definition&quot; parameter sheet</span> with the parameters that embeds to the execution environment definition template file (execution-environment.yml) file is registered.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Execution environment management (If needed)</strong></div>
<div class="line">Register a link between the  <span class="menuselection">&quot;Execution environment parameter definition&quot; parameter sheet</span> and the template file for the execution environment definition file (execution-environment.yml) registered in <span class="menuselection">Ansible common ▶ Execution environment definition template management</span></div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-execution-environment-list"><span class="std std-ref">Execution environment management</span></a>.</div>
<div class="line">Installing ITA registers a link between the <span class="menuselection">&quot;Execution environment parameter definition&quot; parameter sheet</span> and <span class="menuselection">Ansible common ▶ Execution environment definition template management</span>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Movement</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Legacy ▶ Movement list</span> menu, register a Movement.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_legacy.html#ansible-legacy-movement-list"><span class="std std-ref">Movement list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Role package</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span> menu, register a Role package.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-role-package-list"><span class="std std-ref">Role package management console</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id3"><span class="problematic" id="id4">**</span></a>Register Global variables (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Global value management</span> menu, register global variables to be used in the Playbook.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-global-variable-list"><span class="std std-ref">Global variable management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id5"><span class="problematic" id="id6">**</span></a>Register Template files (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Template management</span> menu, register template files and template embedded variables to be used in the Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-template-list"><span class="std std-ref">Template management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id7"><span class="problematic" id="id8">**</span></a>Register File material (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ File management</span> menu, register file materials and file embedded variables to be used in the Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-file-list"><span class="std std-ref">File management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id9"><span class="problematic" id="id10">**</span></a>Register Unmanaged variables (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Unmanaged target variable list</span> menu, register extracted variables which will not be displayed in <span class="menuselection">Ansible-Legacy ▶ Substitute value auto registration</span>'s <span class="menuselection">Movement name:Variable name</span>.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-unmanaged-var-list"><span class="std std-ref">Unmanaged target variable list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Role package to Movement</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Movement-Role link</span> menu, register a link between the registered Movement and the Role package.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-movement-details"><span class="std std-ref">Movement-Role link</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Multistage variable maximum repetitions(if needed）</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Variable nest management</span> register maximum repetitions for the Member variable array defined in the Multistage variable arrays.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-nested-variable-list"><span class="std std-ref">Variable nest management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Create parameter sheet</strong></div>
<div class="line">From the <span class="menuselection">Create/Define parameter sheets</span> menu, create a Parameter sheet which will have data registered to it that can configure settings for the target.</div>
<div class="line">For more information, see <a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register data to Parameter sheet</strong></div>
<div class="line">Register data to the parameter sheet created in the previous step.</div>
<div class="line">For more information, see <a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Substitute value auto registration settings</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span> menu, link the Movement variables with the Parameter sheet's item's setting values.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Execute</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Execute</span> menu, select the desired Movement and Operation and execute them.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-execution"><span class="std std-ref">Execute</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm execution status</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span> menu,the status of all previously executed operations will be updated in realtime. Users can also monitor error logs and execution logs as well as stop them with an emergency stop.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-check-operation-status"><span class="std std-ref">Confirm execution status</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm execution history</strong></div>
<div class="line">From the <span class="menuselection">Ansible-LegacyRole ▶ Execution management</span> menu, users can check the history of all previously executed operations..</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-execution-list"><span class="std std-ref">Execution management</span></a>.</div>
</div>
</li>
</ol>
</li>
</ul>
</section>
</section>
<section id="ansible-legacyrole-menu-operation">
<h2><span class="section-number">4.5. </span>Ansible-LegacyRole menu operation<a class="headerlink" href="#ansible-legacyrole-menu-operation" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to operate the Ansible-Legacyrole menus.</div>
</div>
<section id="basic-console">
<h3><span class="section-number">4.5.1. </span>Basic console<a class="headerlink" href="#basic-console" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Basic console menu, see  <a class="reference internal" href="../it_automation_base/basic_console.html"><span class="doc">Basic console</span></a></div>
</div>
</section>
<section id="ansible-common">
<h3><span class="section-number">4.5.2. </span>Ansible common<a class="headerlink" href="#ansible-common" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Ansible common menus, see <a class="reference internal" href="ansible_common.html"><span class="doc">Ansible common</span></a></div>
</div>
</section>
<section id="id11">
<h3><span class="section-number">4.5.3. </span>Ansible-LegacyRole<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains how to operate the Ansible-LegacyRole menus.</div>
</div>
<section id="movement-list">
<span id="ansible-legacyrole-movement-list"></span><h4>Movement list<a class="headerlink" href="#movement-list" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view.register/edit/discard) Movement information.</div>
</div>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="../../_images/movement_list_v2_51.png"><img alt="Submenu (Movement list)" src="../../_images/movement_list_v2_51.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.13 </span><span class="caption-text">Submenu (Movement list)</span><a class="headerlink" href="#id17" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Movement information.</div>
</div>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="../../_images/registration_movement_list_v2_51.gif"><img alt="Registration page (Movement list)" src="../../_images/registration_movement_list_v2_51.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.14 </span><span class="caption-text">Registration page (Movement list)</span><a class="headerlink" href="#id18" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 If the has &quot;become: yes&quot; configured.</div>
<div class="line">The following settings must be configured to the target.</div>
<div class="line">Login user must have sudo permission NOPASSWD configured to <code class="file docutils literal notranslate"><span class="pre">/etc/sudoers</span></code> with NOPASSWD.</div>
<div class="line"><br /></div>
<div class="line">　　　<strong>Demo_user ALL=(ALL) NOPASSWD:ALL</strong></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※2  Select from data fetched from <a class="reference internal" href="ansible_common.html#ansible-common-aac-sync"><span class="std std-ref">Ansible Automation Controller data synchronization</span></a>.</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If <span class="menuselection">WinRM connection</span> is set to &quot;True&quot;, the connecting hosts will be all Windows servers..</div>
</div>
</div>
</li>
</ol>
</section>
<section id="role-package-management-console">
<span id="ansible-legacyrole-role-package-list"></span><h4>Role package management console<a class="headerlink" href="#role-package-management-console" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) Role package files .</div>
<div class="line">Make sure to register a directory with a hierarchy that has &quot;roles&quot; compressed in a ZIP file. For more information regarding Role package directories, see <a class="reference internal" href="#ansible-legacyrole-write-role-package-ansible-legacy-role"><span class="std std-ref">Writing Role packages</span></a> .</div>
</div>
<figure class="align-default" id="id19">
<a class="reference internal image-reference" href="../../_images/role_package_list_v2-4.png"><img alt="Submenu（Role package management）" src="../../_images/role_package_list_v2-4.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.15 </span><span class="caption-text">Submenu（Role package management）</span><a class="headerlink" href="#id19" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> to register Role packages.</div>
</div>
<figure class="align-default" id="id20">
<a class="reference internal image-reference" href="../../_images/registration_role_package_list_v2-4.gif"><img alt="Registration page （Role package management）" src="../../_images/registration_role_package_list_v2-4.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.16 </span><span class="caption-text">Registration page （Role package management）</span><a class="headerlink" href="#id20" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line"><strong>When variables defined within Playbooks are extracted</strong></div>
<div class="line">The variables defined within Playbooks files are extracted by internal processes.The variables can have specific values registered to them in <a class="reference internal" href="#ansible-legacyrole-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a></div>
<div class="line">The variables are not extracted in realtime, meaning that it may take time before they can be used in <a class="reference internal" href="#ansible-legacyrole-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a> .</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">Unique variable names in Movements</div>
<div class="line">In Ansible-LegacyRole, the variable names extracted from files must be unique for each Movement.</div>
<div class="line">If there are multiple variable names used for roles within the same role package and the variable structure is different, an error will occur whe nregistered to <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span>.</div>
<div class="line">Specificaly, if the structure for normal variable and multistage variable (or the structure between different multistage variables) are different, an error will occur if the same variable name is used.</div>
<div class="line">This does not apply if the user is using different role packages.</div>
<div class="line"><br /></div>
<div class="line">Examples for the Specific values are as following.</div>
</div>
<div class="line-block">
<div class="line">e.g.)</div>
</div>
</div>
</section>
<section id="movement-role-link">
<span id="ansible-legacyrole-movement-details"></span><h4>Movement-Role link<a class="headerlink" href="#movement-role-link" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintain (view/register/edit/discard) links between Role packages and Movements.</div>
</div>
<figure class="align-default" id="id21">
<a class="reference internal image-reference" href="../../_images/movement_role.png"><img alt="Submenu（Movement-Role link）" src="../../_images/movement_role.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.17 </span><span class="caption-text">Submenu（Movement-Role link）</span><a class="headerlink" href="#id21" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> to register the Role package that will be included in the Movement.</div>
</div>
<figure class="align-default" id="id22">
<a class="reference internal image-reference" href="../../_images/registration_movement_role.gif"><img alt="Registration page （Movement-Role link）" src="../../_images/registration_movement_role.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.18 </span><span class="caption-text">Registration page （Movement-Role link）</span><a class="headerlink" href="#id22" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<table class="docutils align-left" id="id23">
<caption><span class="caption-number">表 4.10 </span><span class="caption-text">Registration page Item list（Movement-Role link）</span><a class="headerlink" href="#id23" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 12.5%" />
<col style="width: 50.0%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><div class="line-block">
<div class="line">Displays an automatically numbered string of 36 characters.</div>
</div>
</td>
<td><p>ー</p></td>
<td><p>Automatic</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>Movement</p></td>
<td><div class="line-block">
<div class="line">Displays <span class="menuselection">Movement name</span> registered in the <span class="menuselection">Ansible-LegacyRole ▶ Movement list</span> menu.</div>
<div class="line">Select a Movement</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>List selection</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-even"><td><p>Role package:Role name</p></td>
<td><div class="line-block">
<div class="line">Displays Role names included in the <span class="menuselection">Role package file （ZIP format）</span> registered in <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span>.</div>
<div class="line">Select the Role package role that will be included in the Movement.</div>
<div class="line">It is not possible to register multiple role packages to a single Movement.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>List selection</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>Include order</p></td>
<td><div class="line-block">
<div class="line">Input the order in which the role will be executed （1～）.</div>
<div class="line">The input include order executes the Roles in rising order.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>Manual</p></td>
<td><p>1～2,147,483,647</p></td>
</tr>
<tr class="row-even"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>Maximum length 4000 bytes</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="variable-nest-management">
<span id="ansible-legacyrole-nested-variable-list"></span><h4>Variable nest management<a class="headerlink" href="#variable-nest-management" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintain (view/edit) maximum repetitions of the Member variable array from the Multistage variable defined in the <span class="menuselection">Role package file（ZIP format）</span> registered in <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span>.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>.</div>
</div>
<figure class="align-default" id="id24">
<a class="reference internal image-reference" href="../../_images/nested_variable_list.png"><img alt="Submenu（Variable nest management）" src="../../_images/nested_variable_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.19 </span><span class="caption-text">Submenu（Variable nest management）</span><a class="headerlink" href="#id24" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to edit the maximum amount of repetitions.</div>
</div>
<figure class="align-default" id="id25">
<a class="reference internal image-reference" href="../../_images/registration_nested_variable_list.gif"><img alt="Registration page （Variable nest management）" src="../../_images/registration_nested_variable_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.20 </span><span class="caption-text">Registration page （Variable nest management）</span><a class="headerlink" href="#id25" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<table class="docutils align-left" id="id26">
<caption><span class="caption-number">表 4.11 </span><span class="caption-text">Registration page Item list（Variable nest management）</span><a class="headerlink" href="#id26" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 12.5%" />
<col style="width: 50.0%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><div class="line-block">
<div class="line">Displays an automatically numbered string of 36 characters.</div>
</div>
</td>
<td><p>ー</p></td>
<td><p>Automatic</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>Maximum repetitions</p></td>
<td><div class="line-block">
<div class="line">Input a value between 1～1,024 for the maximum repetitions.</div>
<div class="line">The maximum value can be changed by configuring the MAXIMUM_ITERATION_ANSIBLE-LEGACYROLE in Management Console - <a class="reference internal" href="../it_automation_base/management_console.html#system-setting"><span class="std std-ref">System settings</span></a></div>
</div>
</td>
<td><p>〇</p></td>
<td><p>Manual</p></td>
<td><p>Input value from 1～1,024(Can be changed from <a class="reference internal" href="../it_automation_base/management_console.html#system-setting"><span class="std std-ref">System settings</span></a>)</p></td>
</tr>
<tr class="row-even"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>Maximum length 4000 bytes</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line"><strong>Initial registrations and Repetition count updates</strong></div>
<div class="line">he internal process initially registers the repetition count of member variable defined in the nested variable which is defined in the role package. After the initial registration, the repetition count can be updated in the &quot;Nested variable management&quot; menu.</div>
<div class="line">Note that both the initial registration and the update does not happen in real-time, meaning that it may take time before they can be used in <a class="reference internal" href="#ansible-legacyrole-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>.</div>
</div>
</div>
</section>
<section id="substitute-value-auto-registration-settings">
<span id="ansible-legacyrole-substitution-value-auto-registration-setting"></span><h4>Substitute value auto registration settings<a class="headerlink" href="#substitute-value-auto-registration-settings" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Links (view/register/edit/discard) parameter item setting values and Movement variables.</div>
</div>
<p><a href="#id12"><span class="problematic" id="id13">|</span></a>The registered information is displayed in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value management</span> and <span class="menuselection">Ansible-LegacyRole ▶ Target host</span> when executed by internal processes.</p>
<figure class="align-default" id="id27">
<a class="reference internal image-reference" href="../../_images/substitution_value_auto_registration_setting_role.png"><img alt="Submenu (Substitute value auto registration settings)" src="../../_images/substitution_value_auto_registration_setting_role.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.21 </span><span class="caption-text">Submenu (Substitute value auto registration settings)</span><a class="headerlink" href="#id27" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register a link between the Movement variables and Parameter sheet item setting values</div>
</div>
<figure class="align-default" id="id28">
<a class="reference internal image-reference" href="../../_images/registration_substitution_value_auto_registration_setting_role.gif"><img alt="Registration page (Substitute value auto registration settings)" src="../../_images/registration_substitution_value_auto_registration_setting_role.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.22 </span><span class="caption-text">Registration page (Substitute value auto registration settings)</span><a class="headerlink" href="#id28" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition tip" id="ansible-legacyrole-parashi-substitution">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1:Only required if the Parammeter sheet has Bundles active.</div>
<div class="line">In order to link Movement variables with Parameter sheets with bundles, the user must input a substitute order for the Parameter sheet (From) in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span>.</div>
<div class="line">See the following figure for more information regarding the relationship between bundled parameter sheets and Substitute value auto registration settings.</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/parameter.png"><img alt="Register Substitute value auto registration settings when using Bundled parameter sheets." src="../../_images/parameter.png" style="width: 600px;" />
</a>
</figure>
</div>
<div class="admonition tip" id="ansible-legacyrole-member">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※2:Only required when variable is multistage.</div>
<div class="line">Member variables are only required if the variable is a Multistage variable. The variables displayed in the Member variables are the only variables that requries specific values.</div>
<div class="line">Connect the stage variables with &quot;.&quot;</div>
<div class="line">For repetition arrays, connect the start position （0～）with [ ]. The amount of repeated arrays are configured in <span class="menuselection">Ansible-LegacyRole ▶ Variable nest management</span>.</div>
<div class="line"><br /></div>
<div class="line">e.g.） Checking the selectable member variables after updating the Variable Nest Management's maximum repetitions and the selectable member variables in Substitute value auto registration settings.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Define variables to the Role package variable definition file （defaults/main.yml） as below and register Role package in <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span></div>
<div class="line"><strong>Variable definition file contents</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_aaaa</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span>
<span class="w">    </span><span class="nt">object</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">obj1</span>
<span class="w">    </span><span class="nt">directory</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">craete_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/dir</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">craete_pass</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sample</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sample_pass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pass1</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">craete_pass</span><span class="p">:</span>
<span class="w">        </span><span class="nt">sample</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sample_pass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pass2</span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span>
<span class="w">      </span><span class="nt">root</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">craete_users</span><span class="p">:</span>
<span class="w">          </span><span class="nt">prod</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prod_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user1</span>
<span class="w">          </span><span class="nt">dev</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dev_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user2</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">If a role package is registered with variables defined like in Step 1. the following will be registered to <span class="menuselection">Ansible-LegacyRole ▶ Variable nest management</span> and the user will able to select the following member variables in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span> by default.</div>
</div>
<table class="docutils align-left" id="id29">
<caption><span class="caption-number">表 4.12 </span><span class="caption-text">Variable nest management registration contents</span><a class="headerlink" href="#id29" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable name</p></th>
<th class="head"><p>Maximum repetitions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>0.directory</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>0.password</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>0.password.sample</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>0.user.root</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>0.user.root.dev</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>0.user.root.prod</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id30">
<caption><span class="caption-number">表 4.13 </span><span class="caption-text">Selectable Member variables in Substitute value auto registration settings</span><a class="headerlink" href="#id30" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 44.4%" />
<col style="width: 55.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].directory[0].create_dir</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].name</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].object</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].password[0].create_pass</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].password[0].sample[0].sample_pass</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].create_users</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].dev[0].dev_user</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].prod[0].prod_user</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">In <span class="menuselection">Ansible-LegacyRole ▶ Variable nest management</span>, edit the Member variable &quot;0.user.root.prod&quot;'s Maximum repetitions from &quot;1&quot; to &quot;3&quot;.</div>
</div>
<table class="docutils align-left" id="id31">
<caption><span class="caption-number">表 4.14 </span><span class="caption-text">Variable nest management edited contents</span><a class="headerlink" href="#id31" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 40.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable name</p></th>
<th class="head"><p>Maximum repetitions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>0.user.root.prod</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">If the member variables are edited like they were in Step 3., The selectable member variables in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span> are also changed.</div>
<div class="line">(Member variable [0].user.root[0].prod[1].prod_user and [0].user.root[0].prod[2].prod_user are added to the pulldown selection)</div>
</div>
<table class="docutils align-left" id="id32">
<caption><span class="caption-number">表 4.15 </span><span class="caption-text">Selectable Member variables in Substitute value auto registration settings</span><a class="headerlink" href="#id32" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 44.4%" />
<col style="width: 55.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].directory[0].create_dir</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].name</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].object</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].password[0].create_pass</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].password[0].sample[0].sample_pass</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].create_users</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].dev[0].dev_user</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].prod[0].prod_user</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].prod[1].prod_user</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_aaaa</p></td>
<td><p>[0].user.root[0].prod[2].prod_user</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div class="admonition tip" id="ansible-legacyrole-substitution">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※3:Only required when selected variable can have multiple specific values configured</div>
<div class="line">Substitute orders does not need to succeed particular Multiple specific value variables.</div>
<div class="line"><br /></div>
<div class="line">e.g.）Input Substitute order for multiple specific value variables and executing.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Follow the example below and define variables to the Role package variable definition file（defaults/main.yml） and register a Role package in <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span>.</div>
<div class="line"><strong>Variable definition file description contents</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_substitutionA</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user-name</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">group-name</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">meta-name</span>

<span class="nt">VAR_substitutionB</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">login</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authorized</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">space</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">In :menuselection:<a href="#id14"><span class="problematic" id="id15">`</span></a>Ansible-LegacyRole --&gt; Substitute value auto registration settings`m link Role variables and th setting values for items registered to the Parameter sheets.</div>
</div>
<table class="docutils align-left" id="id33">
<caption><span class="caption-number">表 4.16 </span><span class="caption-text">Parameter sheet registration contents</span><a class="headerlink" href="#id33" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p><strong>Host name</strong></p></th>
<th class="head" rowspan="2"><p><strong>Operation name</strong></p></th>
<th class="head" colspan="4"><p><strong>Parameter</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p><strong>Item1</strong></p></th>
<th class="head"><p><strong>Item2</strong></p></th>
<th class="head"><p><strong>Item3</strong></p></th>
<th class="head"><p><strong>Item4</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>test-host</p></td>
<td><p>test-ope</p></td>
<td><p>value1</p></td>
<td><p>value2</p></td>
<td><p>value3</p></td>
<td><p>value4</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id34">
<caption><span class="caption-number">表 4.17 </span><span class="caption-text">Substitute value auto registration settings registration contents</span><a class="headerlink" href="#id34" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 36.4%" />
<col style="width: 18.2%" />
<col style="width: 27.3%" />
<col style="width: 18.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Menu name</p></th>
<th class="head"><p>Item</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Substitute order</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item1</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item2</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item3</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item1</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item2</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item3</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item4</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">When executed, the host variable file (host_vars/test-host) will have the variables registered in Substitute value auto registration settings output similarly to the example below.</div>
<div class="line"><strong>Output to Host variable file</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_substitutionA</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value2</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value3</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value1</span>
<span class="nt">VAR_substitutionB</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value3</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value4</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value2</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="admonition tip" id="host">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Output to Host variable file</strong></div>
<div class="line">Only variables registered in the Substitute value auto registration settings menu are output to the Host variable file when executed.</div>
<div class="line">The same goes for multistage variables. Only member variables with specific values registered will be output.</div>
<div class="line"><br /></div>
<div class="line">e.g.） Checking variables output the the Host variable file when executing Variables with specific values registered to them in the Substitute value auto registration settings.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Follow the example below and define variables to the Role package variable definition file（defaults/main.yml） and register a Role package in  <span class="menuselection">Ansible-LegacyRole ▶ Role package management</span>.</div>
<div class="line"><strong>Variable definition file description contents</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_output</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span>
<span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span>
<span class="w">      </span><span class="nt">root</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">craete_users</span><span class="p">:</span>
<span class="w">          </span><span class="nt">prod</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prod_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user1</span>
<span class="w">          </span><span class="nt">dev</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dev_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user2</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">In the <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span> menu, link Role variables and setting values for items registered to the Parameter sheets.</div>
</div>
<table class="docutils align-left" id="id35">
<caption><span class="caption-number">表 4.18 </span><span class="caption-text">Parameter sheet registration contents</span><a class="headerlink" href="#id35" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Host name</p></th>
<th class="head" rowspan="2"><p>Operation name</p></th>
<th class="head" colspan="2"><p>Parameter</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Item1</p></th>
<th class="head"><p>Item2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>test-host</p></td>
<td><p>test-ope</p></td>
<td><p>value1</p></td>
<td><p>value2</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id36">
<caption><span class="caption-number">表 4.19 </span><span class="caption-text">Substitute value auto registration settings registration contents</span><a class="headerlink" href="#id36" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 24.0%" />
<col style="width: 12.0%" />
<col style="width: 24.0%" />
<col style="width: 40.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Menu name</p></th>
<th class="head"><p>Item</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item1</p></td>
<td><p>VAR_output</p></td>
<td><p>[0].name</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item2</p></td>
<td><p>VAR_output</p></td>
<td><p>[0].user.root[0].dev[0].dev_user</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">When executed, the host variable file (host_vars/test-host) will have the variables registered in Substitute value auto registration settings output similarly to the example below.</div>
<div class="line"><strong>Output to Host variable file</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_output</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value1</span>
<span class="w">    </span><span class="nt">user</span><span class="p">:</span>
<span class="w">      </span><span class="nt">root</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dev</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dev_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value2</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="admonition tip" id="ansible-legacyrole-file-and-templete">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Examples using Playbook variables linked to File embedded variables and Template embedded variables</strong></div>
<div class="line">e.g.)  If the File embedded variable, CPF_test, and Template embedded variable, TPF_sample, is linked to the Playbook variable in the Substitute value auto registration settings menu.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Register the following in:menuselection:<cite>Ansible common --&gt; File management</cite> / <span class="menuselection">Ansible common ▶ Template management</span>.</div>
</div>
<table class="docutils align-left" id="id37">
<caption><span class="caption-number">表 4.20 </span><span class="caption-text">Template management registration contents</span><a class="headerlink" href="#id37" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 55.6%" />
<col style="width: 44.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Template embedded variable name</p></th>
<th class="head"><p>Template file</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_sample</p></td>
<td><p>sample.tpl</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">After creating &quot;Ansible common:File management:File embedded variable name&quot; and &quot;Ansible common:Template management:Template embedded variable name&quot; as Parameter sheet items in <span class="menuselection">Define/Create parameter sheet</span> , register File embedded variables and Template embedded variables as the Parameter sheets' item values.</div>
</div>
<figure class="align-default" id="id38">
<a class="reference internal image-reference" href="../../_images/menu_create.png"><img alt="Define/Create parameter sheet" src="../../_images/menu_create.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.23 </span><span class="caption-text">Define/Create parameter sheet</span><a class="headerlink" href="#id38" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-left" id="id39">
<caption><span class="caption-number">表 4.21 </span><span class="caption-text">Sample parameter sheet registration contents</span><a class="headerlink" href="#id39" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p><strong>Host name</strong></p></th>
<th class="head" rowspan="2"><p><strong>Operation name</strong></p></th>
<th class="head" colspan="2"><p><strong>Parameter</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p><strong>File management</strong></p></th>
<th class="head"><p><strong>Template management</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>test-host</p></td>
<td><p>test-ope</p></td>
<td><p>CPF_test</p></td>
<td><p>TPF_sample</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">In <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span>, link the Playbook variable and the Item setting value of the Parameter sheet registered in Step 2. and Execute Ansible in  <span class="menuselection">Ansible-Legacy ▶ Execute</span>.</div>
</div>
<table class="docutils align-left" id="id40">
<caption><span class="caption-number">表 4.22 </span><span class="caption-text">Substitute value auto registration settings registration contents</span><a class="headerlink" href="#id40" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 45.5%" />
<col style="width: 27.3%" />
<col style="width: 27.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Menu name</p></th>
<th class="head"><p>Item</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sample parameter sheet</p></td>
<td><p>File management</p></td>
<td><p>VAR_filetest</p></td>
</tr>
<tr class="row-odd"><td><p>Sample parameter sheet</p></td>
<td><p>Template management</p></td>
<td><p>VAR_temptest</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Click the <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span>'s <span class="guilabel">Check substitute value</span> button to check that the  '{{ CPF_test }}' and '{{ TPF_sample }}' are dispalyed to the Specific value.</div>
</div>
<figure class="align-default" id="id41">
<a class="reference internal image-reference" href="../../_images/general_operations_note.png"><img alt="Confirm execution status Substitute value management" src="../../_images/general_operations_note.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.24 </span><span class="caption-text">Confirm execution status Substitute value management</span><a class="headerlink" href="#id41" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
</ol>
</div>
</section>
<section id="execute">
<span id="ansible-legacyrole-execution"></span><h4>Execute<a class="headerlink" href="#execute" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Select a Movement from the Movement list.</div>
<div class="line">Select an Operation from the Operation list.</div>
<div class="line">There are 3 different types of execution types. Clicking the one of the execution buttons moves the user to <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span> where the execution process will start</div>
</div>
<figure class="align-default" id="id42">
<a class="reference internal image-reference" href="../../_images/execution_screen_v2_51.gif"><img alt="Execute menu" src="../../_images/execution_screen_v2_51.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.25 </span><span class="caption-text">Execute menu</span><a class="headerlink" href="#id42" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">See the following for information regarding the different execution types.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Execute</strong></div>
<div class="line">Press the <span class="guilabel">Execute</span> button to run operations to the execution target.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Dry run</strong></div>
<div class="line">Clicking the <span class="guilabel">Dry run</span> button allows the user to perform a dry run where the operation is not executed to the execution target.</div>
<div class="line">Dry runs will execute the Ansible-Playbook command's --check parameter.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Check Parameter</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Parameter</span> button allows users to check that the information registered in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value auto registration settings</span> and the Operation and Movement link information is displayed to  <span class="menuselection">Ansible-Legacy ▶ Substitute value management</span> and <span class="menuselection">Ansible-Legacy ▶ Target host</span> without actually executing to the execution target.</div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line-block">
<div class="line"><strong>Specify reservation date</strong></div>
</div>
<div class="line">Inputing a Reservation date allows users to reserve executions.</div>
<div class="line">Reservation dates can only contain a date/time later than the current date/time.</div>
</div>
</div>
</section>
<section id="confirm-execution-status">
<span id="ansible-legacyrole-check-operation-status"></span><h4>Confirm execution status<a class="headerlink" href="#confirm-execution-status" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Allows users to monitor execution statuses.</div>
</div>
<figure class="align-default" id="id43">
<a class="reference internal image-reference" href="../../_images/check_operation_status_v2_51.png"><img alt="Submenu (Confirm execution status)" src="../../_images/check_operation_status_v2_51.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.26 </span><span class="caption-text">Submenu (Confirm execution status)</span><a class="headerlink" href="#id43" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Execution status display</strong></div>
<div class="line">The status matching the Execution status is displayed.</div>
<div class="line">The execution log and error log also displays detailed information regarding the execution status.</div>
<div class="line">If the execute type is &quot;Execute&quot;, &quot;Normal&quot; will be displayed. If Dry run is selected, &quot;Dry run&quot;. If Parameter check is selected, &quot;Parameter check&quot; will be displayed.</div>
<div class="line">If the status ends in an unexpected error, a message will be displayed in the error log.</div>
<div class="line">&quot;Call Conductor&quot; displays which Conductor was executed. This field will be blank if directly executed from Ansible-LegacyRole.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm Target host</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Target host</span> button displays <span class="menuselection">Ansible-LegacyRole ▶ Target host</span> where hosts from Operations and Movements are displayed.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm Substitute value</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Sbstitute value</span> button displays <span class="menuselection">Ansible-LegacyRole ▶ Substitute value management</span> where users can see Specific values and Variables from Operations and Movements.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Emergency stop/Delete reservation</strong></div>
<div class="line">Users can press the <span class="guilabel">Emergency stop</span> button to stop the operation.</div>
<div class="line">If the status was &quot;Reserved execution&quot;, the <span class="guilabel">Delete reservation</span> button will be displayed. Check the <span class="guilabel">Delete reservation</span> button to delete the reservation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Display execution log</strong></div>
<div class="line">When Ansible Automation Controller is executed, the Playbook is executed in units of the device to be built grouped by the item values of  <span class="menuselection">Ansible common ▶ Device list</span>'s  <span class="menuselection">User</span> ・ <span class="menuselection">Password</span> ・<span class="menuselection">ssh secret key file</span> ・ <span class="menuselection">Passphrase</span> ・ <span class="menuselection">Connection type</span> ・ <span class="menuselection">Instance group</span>, which splits the execution logs.</div>
<div class="line">By specifying the number of job slices in the <span class="menuselection">Option parameter</span> in  <span class="menuselection">Ansible common ▶ Interface information</span> or <span class="menuselection">Ansible-LegacyRole ▶ Movement list</span>, the grouped targets can be further divided into the number of specified job slices before the Playbook is executed and the execution log is further divided.</div>
<div class="line">If the execution log has been divided, the execution log will be divided into tabs, where the user can select which execution log they want to see.</div>
</div>
<div class="line-block">
<div class="line">The log file names displayed in the execution log's pulldown menu are as following.</div>
<div class="line">exec.log: Log file containing all execution logs.</div>
<div class="line">Not exec.log: Divided execution log. The file convention are as following.</div>
<div class="line">exec_&lt;Group number&gt;_&lt;Serial number&gt;</div>
</div>
<table class="docutils align-left" id="id44">
<caption><span class="caption-number">表 4.23 </span><span class="caption-text">Divided execution log file naming convention</span><a class="headerlink" href="#id44" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 28.6%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Group number</p></td>
<td><p>The Execution target's serial number grouped by the <span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">User</span> ・ <span class="menuselection">Password</span> ・ <span class="menuselection">ssh secret key file</span> ・ <span class="menuselection">Passphrase</span> ・ <span class="menuselection">Connection type</span> ・ <span class="menuselection">Instance group</span> items.</p></td>
</tr>
<tr class="row-odd"><td><p>Serial number</p></td>
<td><div class="line-block">
<div class="line">Serial number from 1 that divides the group by setting the number of job slices.</div>
<div class="line">If 0, no division of job slicing was done.</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line"><strong>Search log</strong></div>
<div class="line">Users can filter information to narrow down information in the execution log and the error log.</div>
<div class="line">Input the string the user wants to search for and tick the &quot;Corresponding lines only&quot; checkbox to view only the lines corresponding to the string.</div>
<div class="line">The refresh interval and maximum display lines can be configured by changing the &quot;Status monitoring cycle item&quot; and &quot;Progress status display lines&quot; items in <span class="menuselection">Ansible common ▶ Interface information</span>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Input data</strong></div>
<div class="line">Users can download executed Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-the-linkage-between-the-input-data-used-during-ansible-execution-and-ita-menu"><span class="std std-ref">Link between ITA menus and Input data when executing Ansible</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Result data</strong></div>
<div class="line">Users can download execution logs and error logs.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-legacyrole-the-linkage-between-the-output-data-used-during-ansible-execution-and-ita-menu"><span class="std std-ref">Result data created when executing Ansible</span></a>.</div>
</div>
</li>
</ol>
</section>
<section id="execution-management">
<span id="ansible-legacyrole-execution-list"></span><h4>Execution management<a class="headerlink" href="#execution-management" title="Link to this heading">¶</a></h4>
<blockquote>
<div><div class="line-block">
<div class="line">Allows userse to view execution histories.</div>
<div class="line">Specify search conditions and press the <span class="guilabel">Filter</span> button to view a table of executions.</div>
<div class="line">Pressing the <span class="guilabel">Details</span> button moves the user to <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span>  where they can view detailed information regarding the execution status.</div>
</div>
</div></blockquote>
<figure class="align-default" id="id45">
<a class="reference internal image-reference" href="../../_images/execution_list_v2_51.png"><img alt="Submenu (Execution management)" src="../../_images/execution_list_v2_51.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.27 </span><span class="caption-text">Submenu (Execution management)</span><a class="headerlink" href="#id45" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The items found in the page are as following.</div>
</div>
<table class="docutils align-left" id="id46">
<caption><span class="caption-number">表 4.24 </span><span class="caption-text">View page item list (Execution management)</span><a class="headerlink" href="#id46" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 62.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="3"><p>Execution number.</p></td>
<td><p>Displays an automatically given unique ID (36 characters)</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution type</p></td>
<td><p>Displays the Execution type.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Status</p></td>
<td><p>Displays the status of the Execution.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Emergency stop flag</p></td>
<td><p>Displays whether the operation has been stopped by the Emergency stop button from the <span class="menuselection">Ansible-LegacyRole ▶ Execution status check</span> menu or not.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Execution engine</p></td>
<td><p>Displays the Execution engine used.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Called Conductor</p></td>
<td><p>Displays the Conductor name if executed from Conductor.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Execution user</p></td>
<td><p>Displays the user who executed the Ansible.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Registration date</p></td>
<td><p>Displays when the Execute button was clicked.</p></td>
</tr>
<tr class="row-even"><td rowspan="10"><p>Movement</p></td>
<td colspan="2"><p>ID</p></td>
<td><p>Displays the selected Movement ID.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>name</p></td>
<td><p>Displays the selected Movement name</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Delay timer</p></td>
<td><p>Displays the delay timer value configured to the Movement.</p></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>Ansible use information</p></td>
<td><p>Host specification format</p></td>
<td><p>Displays the selected Movement's Host specification format.</p></td>
</tr>
<tr class="row-even"><td><p>WinRM connection</p></td>
<td><p>Displays the selected Movement's WinRM connection.</p></td>
</tr>
<tr class="row-odd"><td><p>Header section</p></td>
<td><p>Displays the selected Movement's header section.</p></td>
</tr>
<tr class="row-even"><td><p>ansible.cfg</p></td>
<td><p>Allows users to download the selected Movement's ansible.cfg file.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Ansible Execution Agent use information</p></td>
<td><p>Execution environment</p></td>
<td><p>Displays the Ansible Execution Agent's execution environment of the selected Movement.</p></td>
</tr>
<tr class="row-even"><td><p>ansible-builderparameter</p></td>
<td><p>Displays the ansible-builder of the selected Movement.</p></td>
</tr>
<tr class="row-odd"><td><p>Ansible Automation Controller use information</p></td>
<td><p>Execution environment</p></td>
<td><p>Displays the selected Movement's execution environment.</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Operation</p></td>
<td colspan="2"><p>No.</p></td>
<td><p>Displays the selected Operation's ID</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Name</p></td>
<td><p>Displays the selected Operation's name</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Input data</p></td>
<td><p>Allows users to download the input data in a Zip file</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Result data</p></td>
<td><p>Allows users to download the result data in a Zip file.</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>Execution status</p></td>
<td colspan="2"><p>Reservation date</p></td>
<td><p>Displays the reservation date if the execution is reserved.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Start date</p></td>
<td><p>Displays when the execution will start.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>End date</p></td>
<td><p>Displays when the execution will end.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Collect status</p></td>
<td colspan="2"><p>Status</p></td>
<td><p>Displays the Connection function's status.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Collection log</p></td>
<td><p>Allows users to downlaod the Collection function's log.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Conductor instance number</p></td>
<td><p>Displays the Conductor instance number if executed from Conductor.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="target-host">
<span id="ansible-legacyrole-target-host"></span><h4>Target host<a class="headerlink" href="#target-host" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Allows users to view Target hosts.</div>
</div>
<figure class="align-default" id="id47">
<a class="reference internal image-reference" href="../../_images/target_host1.png"><img alt="Submenu (Target host)" src="../../_images/target_host1.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.28 </span><span class="caption-text">Submenu (Target host)</span><a class="headerlink" href="#id47" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the view page are as following.</div>
</div>
<table class="docutils align-left" id="id48">
<caption><span class="caption-number">表 4.25 </span><span class="caption-text">View page item list (Target host)</span><a class="headerlink" href="#id48" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 27.3%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><p>Displays an automatically given unique ID (36 characters)</p></td>
</tr>
<tr class="row-odd"><td><p>Execution number</p></td>
<td><p>Displays the Execution number when executed.</p></td>
</tr>
<tr class="row-even"><td><p>Operation</p></td>
<td><p>Displays the Operation when executed.</p></td>
</tr>
<tr class="row-odd"><td><p>Movement name</p></td>
<td><p>Displays the Movement when executed.</p></td>
</tr>
<tr class="row-even"><td><p>Host name</p></td>
<td><p>Displays the Target host when Executed.</p></td>
</tr>
<tr class="row-odd"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="substitute-value-management">
<span id="ansible-legacyrole-substitution-value-list"></span><h4>Substitute value management<a class="headerlink" href="#substitute-value-management" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Displays the Variable's specific values.</div>
</div>
<figure class="align-default" id="id49">
<a class="reference internal image-reference" href="../../_images/substitution_value_list1.png"><img alt="Submenu (Substitute value management)" src="../../_images/substitution_value_list1.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.29 </span><span class="caption-text">Submenu (Substitute value management)</span><a class="headerlink" href="#id49" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the page are as following.</div>
</div>
<table class="docutils align-left" id="id50">
<caption><span class="caption-number">表 4.26 </span><span class="caption-text">View page item list (Substitute value management)</span><a class="headerlink" href="#id50" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="3"><p>Item number</p></td>
<td><p>Displays an automatically given unique ID (36 characters).</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution number</p></td>
<td><p>Displays the Execution number when executed.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Operation</p></td>
<td><p>Displays the selected Operation.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Movement name</p></td>
<td><p>Displays the selected Movement.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Host name</p></td>
<td><p>Displays the selected Target host.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Movement name:Variable name</p></td>
<td><p>Displays the Variable name when executed</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><dl class="simple">
<dt>Specific</dt><dd><p>value</p>
</dd>
</dl>
</td>
<td rowspan="2"><p>String</p></td>
<td><p>Sensitive settings</p></td>
<td><p>Displays either &quot;True&quot; or &quot;False&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p>Value</p></td>
<td><p>Displays the Variable's Specific value when executed.</p>
<ul>
<li><div class="line-block">
<div class="line">If the <span class="menuselection">Sensitive settings</span> are set to &quot;True&quot;</div>
<div class="line">The Specific value input to the Parameter sheet will be encrypted and not be viewable on ITA.
The variable's Specific value has its encrypted contents configured by ansible-vault.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">If the <span class="menuselection">Sensitive settings</span> are set to &quot;False&quot;</div>
<div class="line">The Specific value input to the Parameter sheets will be displayed.</div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>File</p></td>
<td><p>Displays the File name linked to the Variables.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Substitute order</p></td>
<td><p>If the variable is a Multiple Specific Value Variable, the Substitute order will be displayed.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Remarks</p></td>
<td><p>Free description field</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
</section>
</section>
<section id="describing-structure-code">
<h2><span class="section-number">4.6. </span>Describing Structure code<a class="headerlink" href="#describing-structure-code" title="Link to this heading">¶</a></h2>
<section id="writing-role-packages">
<span id="ansible-legacyrole-write-role-package-ansible-legacy-role"></span><h3><span class="section-number">4.6.1. </span>Writing Role packages<a class="headerlink" href="#writing-role-packages" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Role package formats, see the official Ansible Manuals.</div>
<div class="line">This section explains the the role packages ZIP file uploaded to &quot;<a class="reference internal" href="#ansible-legacyrole-role-package-list"><span class="std std-ref">Role package management console</span></a>&quot;  and which directory it should contain.</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>（Upper directory）
│
├─── site.yml                                             ・・・・・・・・・・・・・・・・・・・・・・・・ （1）
│
├─── hosts                                                ・・・・・・・・・・・・・・・・・・・・・・・・ （2）
│
├─── group_vars                                           ・・・・・・・・・・・・・・・・・・・・・・・・ （3）
│
├─── host_vars                                            ・・・・・・・・・・・・・・・・・・・・・・・・ （4）
│
├─── ITA readme                                           ・・・・・・・・・・・・・・・・・・・・・・・・ （5）
│
└─── roles                                                ・・・・・・・・・・・・・・・・・・・・・・・・ （6）
        │
        ├─ [role name①]                                    ・・・・・・・・・・・・・・・・・・・・・・・・ （7）
        │     │
        │     ├── readme.md                               ・・・・・・・・・・・・・・・・・・・・・・・・ （8）
        │     │
        │     ├── tasks                                   ・・・・・・・・・・・・・・・・・・・・・・・・ （9）
        │     │      ├── main.yml
        │     │      └── user_files
        │     │      └── user.yml
        │     │
        │     ├── handlers                                ・・・・・・・・・・・・・・・・・・・・・・・・ （10）
        │     │      ├── main.yml
        │     │      └── user_files
        │     │      └── user.yml
        │     │
        │     ├── templates                               ・・・・・・・・・・・・・・・・・・・・・・・・ （11）
        │     │      ├── hosts.j2
        │     │      └── user_files
        │     │      └── user.j2
        │     │
        │     ├── files                                   ・・・・・・・・・・・・・・・・・・・・・・・・ （12）
        │     │      └── sudoers
        │     │
        │     ├── vars                                    ・・・・・・・・・・・・・・・・・・・・・・・・ （13）
        │     │      └─ main.yml
        │     │
        │     ├── defaults                                ・・・・・・・・・・・・・・・・・・・・・・・・ （14）
        │     │      ├── main.yml
        │     │      └── user_files
        │     │              └── user.yml
        │     │
        │     ├── meta                                    ・・・・・・・・・・・・・・・・・・・・・・・・ （15）
        │     │      └── main.yml
        │     │
        │     If there are other directories and files, ITA will not recognize them.
        │
        └─ [role name②] roles have no specific limits.
</pre></div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 31.2%" />
<col style="width: 18.8%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><div class="line-block">
<div class="line">Should include</div>
<div class="line">〇　：Required</div>
<div class="line">△　：Optional</div>
</div>
</th>
<th class="head"><p>Handled by ITA</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>（1）　site.yml　（Master Playbook）</p></td>
<td><p>△</p></td>
<td><p>Created by ITA. Will be overwritten if exists.</p></td>
</tr>
<tr class="row-odd"><td><p>（2）　hosts</p></td>
<td><p>△</p></td>
<td><p>Created by ITA. Will be overwritten if exists.</p></td>
</tr>
<tr class="row-even"><td><p>（3）　group_vars</p></td>
<td><p>△</p></td>
<td><p>Not handled by ITA. Will be deleted if exists</p></td>
</tr>
<tr class="row-odd"><td><p>（4）　host_vars</p></td>
<td><p>△</p></td>
<td><p>Created by ITA. Will be overwritten if exists.</p></td>
</tr>
<tr class="row-even"><td><p>（5）　ITA readme</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">ITA readme is defined for every role. Error doesn't occur even if the file deosn't exist.</div>
<div class="line">ITA readme character code should be UTF-8 without BOM.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="#ansible-legacyrole-write-ita-readme-ansible-legacy-role-only"><span class="std std-ref">Writing ITAreadme</span></a>&quot;</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>（6）　roles</p></td>
<td><p>〇</p></td>
<td><p>An Upload error will occur if the roles directory does not exist.</p></td>
</tr>
<tr class="row-even"><td><p>（7）　roles/[role  name①]</p></td>
<td><p>〇</p></td>
<td><div class="line-block">
<div class="line">An Upload error will occur if the role name directory does not exist.</div>
<div class="line">Handles directories (tasks directory included) as role.</div>
<div class="line">Directory hierarchy can be deep.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>（8）　roles/[role  name①]/readme.md</p></td>
<td><p>△</p></td>
<td><p>Not recognized by ITA.</p></td>
</tr>
<tr class="row-even"><td><p>（9）　roles/[role  name①]/tasks</p></td>
<td><p>〇</p></td>
<td><div class="line-block">
<div class="line">tasks directory is required.</div>
<div class="line">playbook character code should be UTF-8 without BOM.</div>
<div class="line">An Upload error will occur if main.yml does not exist.</div>
<div class="line">Can contain other files than main.yml</div>
<div class="line">Can deploy other files than main.yml in the sub-directory.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>（10）　roles/[role  name①]/handlers</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">handlers directory is not recognized.</div>
<div class="line">playbook character code should be UTF-8 without BOM.</div>
<div class="line">main.yml is not recognized.</div>
<div class="line">Can contain other files than main.yml</div>
<div class="line">Can deploy files into the sub-directory.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>（11）　roles/[role  name①]/templates</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">templates directory is not recognized.</div>
<div class="line">The file character code should be UTF-8 without BOM.</div>
<div class="line">Can deploy files into the sub-directory.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>（12）　roles/[role  name①]/files</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">files directory is not recognized.</div>
<div class="line">File or sub-directory is not recognized.</div>
<div class="line">File contents are not recognized.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>（13）　roles/[role  name①]/vars</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">vars directory is not recognized.</div>
<div class="line">playbook character code should be UTF-8 without BOM.</div>
<div class="line">File or sub-directory is not recognized.</div>
<div class="line">File contents are not recognized.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>（14）　roles/[role  name①]/defaults</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">defaults directory is not recognized.</div>
<div class="line">playbook character code should be UTF-8 without BOM.</div>
<div class="line">main.yml is not recognized.</div>
<div class="line">Can contain other files than main.yml</div>
<div class="line">Can deploy other files than main.yml in the subdirectory.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>（15）　roles/[role  name①]/meta</p></td>
<td><p>△</p></td>
<td><div class="line-block">
<div class="line">meta directory is not recognized.</div>
<div class="line">playbook character code should be UTF-8 without BOM.</div>
<div class="line">File or sub-directory is not recognized.</div>
<div class="line">File contents are not recognized.</div>
</div>
</td>
</tr>
</tbody>
</table>
<section id="master-playbook">
<h4>Master Playbook<a class="headerlink" href="#master-playbook" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The Master Playbook created by ITA consists of a header section and Roles section.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Header section</div>
<div class="line">Header sections have default values, but users can change them by using <span class="menuselection">Ansible-LegacyRole ▶ Movement list</span>'s <span class="menuselection">Header section</span>.</div>
</div>
<div class="line-block">
<div class="line">▼Header section default value</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
<span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
<span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="c1"># For winrm connections, &quot;become: yes&quot; is ommited.</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">roles section</div>
<div class="line">Roles from uploaded role packages are executed according to the <span class="menuselection">Include order</span> in <span class="menuselection">Ansible-LegacyRole ▶ Movement-Role link</span>.</div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/role_session.png"><img alt="../../_images/role_session.png" src="../../_images/role_session.png" style="width: 8.85417in; height: 6.67187in;" />
</a>
</figure>
</li>
</ol>
</section>
<section id="points-to-note-when-the-role-name-in-the-role-package-is-set-to-the-directory-hierarchy">
<h4>Points to note when the role name in the role package is set to the directory hierarchy.<a class="headerlink" href="#points-to-note-when-the-role-name-in-the-role-package-is-set-to-the-directory-hierarchy" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">he following directory hierarchy role package will be explained as an example.</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>└── roles
       ├── parent
       │     ├── sample_role1
       │     │ ├── defaults
       │     │ └── tasks
       │     └── sample_role2
       │            ├── defaults
       │            ├── sample_role3
       │            │     ├── defaults
       │            │     └── tasks
       │            ├── sample_role4
       │            │     ├── defaults
       │            │     └── tasks
       │            └── tasks
       ├── sample_role5
       │     └── defaults
       └── sample_role6
              ├── defaults
              └── tasks
</pre></div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">he directory recognized as a role is the directory containing the tasks directory.</div>
<div class="line">In this example. There are three directory hierarchies (role names) to be handled by roles.</div>
</div>
<ul class="simple">
<li><p>parent/sample_role1</p></li>
<li><p>parent/sample_role2</p></li>
<li><p>sample_role6</p></li>
</ul>
</li>
<li><div class="line-block">
<div class="line">Exclude directory hierarchies with multiple tasks directories</div>
<div class="line">There are tasks directories in parent/sample_role2/sample_role3 and parent/sample_role2/sample_role4, but parent/sample_role2 has a tasks directories and recognizes them as roles, meaning they are not handaled as a role.</div>
</div>
</li>
</ol>
</section>
</section>
<section id="writing-itareadme">
<span id="ansible-legacyrole-write-ita-readme-ansible-legacy-role-only"></span><h3><span class="section-number">4.6.2. </span>Writing ITAreadme<a class="headerlink" href="#writing-itareadme" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The substitution value management function interpretes the variable type defined in defaults variable definition file and sets the variable value of each variable and its' member variable.</div>
</div>
<section id="ita-readme-file-naming-convention">
<h4>ITA readme file naming convention<a class="headerlink" href="#ita-readme-file-naming-convention" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">　ita_readme_[Role name].yml</div>
<div class="line">　e.g.）</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Role name</p></th>
<th class="head"><p>File name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mysql</p></td>
<td><p>ita_readme_mysql.yml</p></td>
</tr>
<tr class="row-odd"><td><p>mysql/install</p></td>
<td><p>ita_readme_mysql%install.yml</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If the Role directory hierarchy is deep, the user will have to change &quot;/&quot; with &quot;%&quot; in the Role name.</div>
</div>
</div>
</section>
<section id="ita-readme-format">
<h4>ITA readme format<a class="headerlink" href="#ita-readme-format" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The format is YAML format.</div>
<div class="line">Make sure the character code is UTF-8 without BOM.</div>
<div class="line">The flow of the output of the concrete values of the variables defined in the ITA readme to the host variable file is henceforth referred to as &quot; <a class="reference internal" href="ansible_common.html#ansible-common-legacy-role-var-value"><span class="std std-ref">Substitute value management function</span></a>&quot;.</div>
<div class="line">If variable definitions overlap in the ITA readme and the defaults variable definition file, the variable structure of the ITA readme is applied.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">If variable definitions overlap in the ITA readme and the defaults variable definition file,the following rules are applied.</div>
</div>
<blockquote>
<div><table class="docutils align-left" id="id51">
<caption><span class="caption-number">表 4.27 </span><span class="caption-text">Variable adoption rule</span><a class="headerlink" href="#id51" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 27.3%" />
<col style="width: 27.3%" />
<col style="width: 45.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>defaults variable definition file</p></th>
<th class="head"><p>ITA readme</p></th>
<th class="head"><p>Variable structure destination</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Defined</p></td>
<td><p>Not defined</p></td>
<td><p>Default variable definition file</p></td>
</tr>
<tr class="row-odd"><td><p>Not defined</p></td>
<td><p>Defined</p></td>
<td><p>ITA readme</p></td>
</tr>
<tr class="row-even"><td><p>Defined</p></td>
<td><p>Defined</p></td>
<td><p>ITA readme</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The ITA readme is cut of from the Role package when executed.</div>
<div class="line">Variables and specific values written in the ITA readme file will not be given to Ansible.</div>
</div>
</div></blockquote>
<p>&quot;ita_readme&quot; use example</p>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line">This section uses 7 cases to explain how the &quot;ita_readmy&quot; file can be used in Ansible-LegacyRole.</div>
<div class="line"><br /></div>
<div class="line">This section assumes that Ansible-LegacyRole (&quot;roles&quot; directory) is fetched from an external source.</div>
<div class="line">The following figure illustrates of using the ita_readme file to uploading it and checking the results.</div>
</div>
<figure class="align-default" id="id52">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_base.png"><img alt="Overall image" src="../../_images/ansible-legacyrole_usage_base.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.30 </span><span class="caption-text">Overall image</span><a class="headerlink" href="#id52" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">The 7 use examples uses the previous figure as a base.</div>
</div>
<table class="docutils align-left" id="id53">
<caption><span class="caption-number">表 4.28 </span><span class="caption-text">Ansible Automation Controller system requirements</span><a class="headerlink" href="#id53" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 30.4%" />
<col style="width: 69.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No.</p></th>
<th class="head"><p>Case</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Using externally fetched Ansible-LegacyRole without editing it.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>&quot;ita_readme&quot; role</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Variable definitions and default values described in the &quot;defaults/main.yml&quot; file.</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>&quot;host_vars&quot; files and &quot;ITA Parameter sheet&quot;</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Adding variables to “defaults/main.yml”</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Applying Playbook Length evaluation</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Applying Playbook Defined evaluation</p></td>
</tr>
</tbody>
</table>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case １：Using externally fetched Ansible-LegacyRole without editing it</strong></div>
<div class="line">Users can use Ansible-Legacy Role (roles directory) acquired from anexternal source without modifying it.</div>
<div class="line">Therefore, users can put the ita_readme file and/or substitute table in the “roles” directory and assign parameters to the variables used inside the directory.</div>
</div>
</li>
</ul>
<figure class="align-default" id="id54">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example1.png"><img alt="Case １ figure" src="../../_images/ansible-legacyrole_usage_example1.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.31 </span><span class="caption-text">Case １ figure</span><a class="headerlink" href="#id54" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ２：&quot;ita_readme&quot; role</strong></div>
<div class="line">The ita_readme file is used to send variables/variable types to ITA.</div>
<div class="line">In other words, they are not used to define specific values (Parameters).</div>
<div class="line">ITA will not be able to read any specific values written in them.</div>
<div class="line">Please see the other cases below for information on how to assign specific values.</div>
</div>
</li>
</ul>
<figure class="align-default" id="id55">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example2.png"><img alt="Case ２ figure" src="../../_images/ansible-legacyrole_usage_example2.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.32 </span><span class="caption-text">Case ２ figure</span><a class="headerlink" href="#id55" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ３：Variable definitions and default values described in the &quot;defaults/main.yml&quot; file</strong></div>
<div class="line">The &quot;defaults/main.yml&quot; file stored under &quot;roles&quot; is automatically passed to ansible.</div>
<div class="line">The file will be automatically sent as long only if no variables or default values are defined in host_vars.(E.g: &quot;VAR_A：aaa&quot;).</div>
</div>
</li>
</ul>
<figure class="align-default" id="id56">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example3.png"><img alt="Case ３ figure" src="../../_images/ansible-legacyrole_usage_example3.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.33 </span><span class="caption-text">Case ３ figure</span><a class="headerlink" href="#id56" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ４：&quot;host_vars&quot; files and &quot;ITA Parameter sheet&quot;</strong></div>
<div class="line">Host_vars files are automatically created everytime ITA parameter sheets executes something.</div>
</div>
</li>
</ul>
<figure class="align-default" id="id57">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example4.png"><img alt="Case ４ figure" src="../../_images/ansible-legacyrole_usage_example4.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.34 </span><span class="caption-text">Case ４ figure</span><a class="headerlink" href="#id57" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ５：Adding variables to “defaults/main.yml”</strong></div>
<div class="line">In order to add any changes to Ansible-Legacy Role (&quot;roles&quot; directory), users can describe variable names/types in the &quot;ita_readme&quot; file.</div>
<div class="line"><br /></div>
<div class="line">Users do not have to define any variables in the ita_readme file that are already defined in the &quot;defaults/main.yml&quot; file.</div>
<div class="line">If there are different definitions for the same variables in the files, the ones in the &quot;ita_readme&quot; file will be prioritized.</div>
<div class="line"><br /></div>
<div class="line">※The figure below illustrates that it is possible to add variables by describing a variable(VAR_H) in the ita_readme file</div>
</div>
</li>
</ul>
<figure class="align-default" id="id58">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example5.png"><img alt="Case ５ figure" src="../../_images/ansible-legacyrole_usage_example5.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.35 </span><span class="caption-text">Case ５ figure</span><a class="headerlink" href="#id58" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ６：Applying Playbook Length evaluation</strong></div>
<div class="line">Depending on whether a variable has a concrete value or not, it can be used as a conditional branch for length evaluation.</div>
<div class="line">For example if &quot;VAR_C：[]&quot; is written in &quot;defaults/main.yml&quot;, the length will equal 0 if the operation is executed with no specific value set to &quot;VAR_C&quot;.</div>
<div class="line">On the other hand, doing the same with a specific value set will have length be &lt;0 (length&lt;0). (E.g.: VAR_X：sss)</div>
</div>
</li>
</ul>
<figure class="align-default" id="id59">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example6.png"><img alt="Case ６ figure" src="../../_images/ansible-legacyrole_usage_example6.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.36 </span><span class="caption-text">Case ６ figure</span><a class="headerlink" href="#id59" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><div class="line-block">
<div class="line"><strong>Case ７：Applying Playbook Defined evaluation</strong></div>
<div class="line">Depending on whether a variable has a concrete value or not, it can be used as a conditional branch for defined valuation.</div>
<div class="line">For example, first write a definition for the variables &quot;VAR_G&quot; and &quot;VAR_H&quot; in the &quot;ita_readme&quot; file. By doing so, they can be used by ITA parameter sheets.</div>
<div class="line"><br /></div>
<div class="line">Running an operation without giving a specific value to &quot;VAR_G&quot; while it is not defined in &quot;defaults/main.yml&quot; or &quot;host_vars&quot; will turn &quot;defined&quot; to &quot;false&quot;.</div>
<div class="line">On the other hand, if the specific value &quot;kkk&quot; is added to &quot;VAR_H&quot;, &quot;defined&quot; will turn into &quot;true&quot;.</div>
</div>
</li>
</ul>
<figure class="align-default" id="id60">
<a class="reference internal image-reference" href="../../_images/ansible-legacyrole_usage_example7.png"><img alt="Case ７ figure" src="../../_images/ansible-legacyrole_usage_example7.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 4.37 </span><span class="caption-text">Case ７ figure</span><a class="headerlink" href="#id60" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">4.7. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="link-between-ita-menus-and-input-data-when-executing-ansible">
<span id="ansible-legacyrole-the-linkage-between-the-input-data-used-during-ansible-execution-and-ita-menu"></span><h3><span class="section-number">4.7.1. </span>Link between ITA menus and Input data when executing Ansible<a class="headerlink" href="#link-between-ita-menus-and-input-data-when-executing-ansible" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Information from the different ITA menus are extracted in order to create input data required to execute Ansible. When this happens, <span class="menuselection">Password</span> items in the <span class="menuselection">Ansible common ▶ Device list</span> menu and items with their <span class="menuselection">Sensitive settings</span> set to &quot;True&quot; in the <span class="menuselection">Ansible-Legacy ▶ Substitute value management</span> menu.</div>
<div class="line">The Input data can be downloaded from the <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span> menu's <span class="menuselection">Input data</span>.</div>
<div class="line">Useres can also directly execute Ansible by unzipping the downloaded input data in a specified directory.</div>
<div class="line"><br /></div>
<div class="line">The relationships between the different data and ITA menus are as following.</div>
</div>
<section id="ansible-legacyrole-input-data">
<h4>Ansible-LegacyRole input data<a class="headerlink" href="#ansible-legacyrole-input-data" title="Link to this heading">¶</a></h4>
</section>
</section>
<section id="result-data-created-when-executing-ansible">
<span id="ansible-legacyrole-the-linkage-between-the-output-data-used-during-ansible-execution-and-ita-menu"></span><h3><span class="section-number">4.7.2. </span>Result data created when executing Ansible<a class="headerlink" href="#result-data-created-when-executing-ansible" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The results from executing &quot;Input data&quot; with Ansible are saved as &quot;Result data&quot; in a ZIP file.</div>
<div class="line">&quot;Result data&quot; can be downloaded from <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span> menu's <span class="menuselection">Result data</span> in a ZIP file.</div>
</div>
<section id="ansible-legacyrole-result-data-file-list">
<h4>Ansible-LegacyRole result data File list<a class="headerlink" href="#ansible-legacyrole-result-data-file-list" title="Link to this heading">¶</a></h4>
<table class="docutils align-left" id="id61">
<caption><span class="caption-number">表 4.29 </span><span class="caption-text">Ansible-LegacyRole result data File list</span><a class="headerlink" href="#id61" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 15.4%" />
<col style="width: 38.5%" />
<col style="width: 15.4%" />
<col style="width: 15.4%" />
<col style="width: 15.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File name</p></th>
<th class="head"><p>Recorded contents</p></th>
<th class="head"><p>Ansible Core</p></th>
<th class="head"><p>Ansible Automation Controller</p></th>
<th class="head"><p>Ansible Execution Agent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>result.txt</p></td>
<td><p>Records Ansible execution result's execution results</p></td>
<td><p>〇</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>error.log</p></td>
<td><div class="line-block">
<div class="line">Error output file with Executing.</div>
<div class="line">Ansible-playbbok command standard error output file.</div>
<div class="line">Contents displayed in the Execute confirmation error log.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec.log.org</p></td>
<td><p>xecution log output by Ansible-playbook</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>exec.log</p></td>
<td><div class="line-block">
<div class="line">Edited Aexec.log.org</div>
<div class="line">Contents displayed to the Execution confirmation execution log</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec_&lt;Execution number&gt;_&lt;group number&gt;</p></td>
<td><div class="line-block">
<div class="line">Divided execution log file</div>
<div class="line">For more information regarding file name conventions, see the execution log in <a class="reference internal" href="#ansible-legacyrole-check-operation-status"><span class="std std-ref">Confirm execution status</span></a> .</div>
</div>
</td>
<td></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>forced.txt</p></td>
<td><p>Text file if stopped with Emergency stop</p></td>
<td><p>〇</p></td>
<td></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>user_files</p></td>
<td><p>A directory where files are recorded when some file is output to ITA's original variable &quot;__workflowdir__&quot; in the playbook executed.</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">child_exec.log</div>
<div class="line">child_error.log</div>
</div>
</td>
<td><p>ansible-builder execution log</p></td>
<td></td>
<td></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="ansible_pioneer.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">3. </span>Ansible-Pioneer</a></li>
    <li class="next"><a href="collect.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">5. </span>Collect function</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2025 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>