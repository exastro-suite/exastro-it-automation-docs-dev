<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>5. Collect function &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fe63c2af" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="Terraform Driver" href="../terraform_driver/index.html" />
    <link rel="prev" title="4. Ansible-LegacyRole" href="ansible_legacyrole.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/collect.html" selected>current</option>
              <option value="../../../../ja/2.5/manuals/ansible-driver/collect.html" selected>2.5(current)</option>
              <option value="../../../../ja/2.4/manuals/ansible-driver/collect.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/ansible-driver/collect.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/ansible-driver/collect.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/ansible-driver/collect.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/ansible-driver/collect.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/collect.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/ansible-driver/collect.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="ansible_legacyrole.html" title="前のトピックへ"><span class="section-number">4. </span>Ansible-LegacyRole</a></li>
        <li class="next"><a href="../terraform_driver/index.html" title="次のトピックへ">Terraform Driver</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learn/index.html">Learn</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manuals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Ansible Driver</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ansible_common.html">1. Ansible common</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacy.html">2. Ansible-Legacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_pioneer.html">3. Ansible-Pioneer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacyrole.html">4. Ansible-LegacyRole</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5. Collect function</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">5.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#collect-function-overview">5.2. Collect function overview</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">5.2.1. Collect function</a></li>
<li class="toctree-l5"><a class="reference internal" href="#registering-to-parameter-sheets">5.2.2. Registering to Parameter sheets</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collect-function-directory-file-structure-and-variable-handling-methods">5.3. Collect function directory, file structure and Variable handling methods</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#collect-target-directory-file-structure">5.3.1. Collect target directory file structure</a></li>
<li class="toctree-l5"><a class="reference internal" href="#variable-and-variable-types">5.3.2. Variable and Variable types</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collect-function-menu-structure">5.4. Collect function menu structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menu-list">5.4.1. Menu list</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collect-function-procedure">5.5. Collect function procedure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#workflow">5.5.1. Workflow</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collect-function-operation">5.6. Collect function operation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ansible-common">5.6.1. Ansible common</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-legacyansible-pioneeransible-legacyrole">5.6.2. Ansible-Legacy、Ansible-Pioneer、Ansible-LegacyRole</a></li>
<li class="toctree-l5"><a class="reference internal" href="#backyard-contents">5.6.3. BackYard contents</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">5.7. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#references">5.7.1. References</a></li>
<li class="toctree-l5"><a class="reference internal" href="#collect-function-examples">5.7.2. Collect function examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terraform_driver/index.html">Terraform Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oase/index.html">OASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">5. Collect function</a><ul>
<li><a class="reference internal" href="#introduction">5.1. Introduction</a></li>
<li><a class="reference internal" href="#collect-function-overview">5.2. Collect function overview</a><ul>
<li><a class="reference internal" href="#id1">5.2.1. Collect function</a><ul>
<li><a class="reference internal" href="#collect-function-overview-figure">Collect function overview figure</a></li>
<li><a class="reference internal" href="#collect-function-data-registration-process-figure">Collect function data registration process figure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registering-to-parameter-sheets">5.2.2. Registering to Parameter sheets</a><ul>
<li><a class="reference internal" href="#collect-function-requirements">Collect function requirements</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#collect-function-directory-file-structure-and-variable-handling-methods">5.3. Collect function directory, file structure and Variable handling methods</a><ul>
<li><a class="reference internal" href="#collect-target-directory-file-structure">5.3.1. Collect target directory file structure</a></li>
<li><a class="reference internal" href="#variable-and-variable-types">5.3.2. Variable and Variable types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collect-function-menu-structure">5.4. Collect function menu structure</a><ul>
<li><a class="reference internal" href="#menu-list">5.4.1. Menu list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collect-function-procedure">5.5. Collect function procedure</a><ul>
<li><a class="reference internal" href="#workflow">5.5.1. Workflow</a><ul>
<li><a class="reference internal" href="#collect-function-workflow">Collect function workflow</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#collect-function-operation">5.6. Collect function operation</a><ul>
<li><a class="reference internal" href="#ansible-common">5.6.1. Ansible common</a><ul>
<li><a class="reference internal" href="#collection-item-value-management">Collection item value management</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-legacyansible-pioneeransible-legacyrole">5.6.2. Ansible-Legacy、Ansible-Pioneer、Ansible-LegacyRole</a><ul>
<li><a class="reference internal" href="#check-collect-status">Check Collect status</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backyard-contents">5.6.3. BackYard contents</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">5.7. Appendix</a><ul>
<li><a class="reference internal" href="#references">5.7.1. References</a></li>
<li><a class="reference internal" href="#collect-function-examples">5.7.2. Collect function examples</a><ul>
<li><a class="reference internal" href="#when-target-have-multiple-files-for-single-menu">When target have multiple files for single menu</a></li>
<li><a class="reference internal" href="#handling-collect-target-file-values">Handling Collect target file values</a></li>
<li><a class="reference internal" href="#if-multiple-files-with-the-same-file-names-are-upload-target-files">If multiple files with the same file names are Upload target files</a></li>
<li><a class="reference internal" href="#target-file-contents-when-file-is-deleted">Target file contents when File is deleted.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">Manuals</a></li>
    <li><a href="index.html">Ansible Driver</a></li>
    
    <li><span class="section-number">5. </span>Collect function</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="collect-function">
<h1><span class="section-number">5. </span>Collect function<a class="headerlink" href="#collect-function" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">5.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explain how to use the ITA Collect function.</div>
</div>
</section>
<section id="collect-function-overview">
<h2><span class="section-number">5.2. </span>Collect function overview<a class="headerlink" href="#collect-function-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Collect function.</div>
</div>
<section id="id1">
<h3><span class="section-number">5.2.1. </span>Collect function<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Collect function is a function that automatically registers values to parameters based on ITA execution results (source file output by a fixed format).</div>
<div class="line">This function can collect items from Ansible-Driver.</div>
<div class="line">For more information regarding Ansible, see the Official Ansible Product Manuals.</div>
<div class="line">For more information regarding the Ansible-Driver, see <a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>.</div>
<div class="line">For more information regarding Parameter sheets, see <a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>.</div>
</div>
<section id="collect-function-overview-figure">
<h4>Collect function overview figure<a class="headerlink" href="#collect-function-overview-figure" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The following figure illustrates using the Collect function.</div>
</div>
<figure class="align-left" id="id3">
<span id="overview-all"></span><a class="reference internal image-reference" href="../../_images/overview_all.drawio.png"><img alt="Collect function overview figure" src="../../_images/overview_all.drawio.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.7 </span><span class="caption-text">Collect function overview figure</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="collect-function-data-registration-process-figure">
<h4>Collect function data registration process figure<a class="headerlink" href="#collect-function-data-registration-process-figure" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The following figure illustrates using the Collect function to register data.</div>
<div class="line">File storage destination is edited/registeered to the Parameter sheet following the Collect item value mnagement settings.</div>
</div>
<figure class="align-left" id="id4">
<a class="reference internal image-reference" href="../../_images/overview_process.drawio.png"><img alt="Collect function data registration process figure" src="../../_images/overview_process.drawio.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.8 </span><span class="caption-text">Collect function data registration process figure</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※For more information regarding Collect function data type examples, see <a class="reference internal" href="#about-values-for-collected-files"><span class="std std-ref">Handling Collect target file values</span></a>.</div>
</div>
</div>
</section>
</section>
<section id="registering-to-parameter-sheets">
<h3><span class="section-number">5.2.2. </span>Registering to Parameter sheets<a class="headerlink" href="#registering-to-parameter-sheets" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Collect function registers and edits registered setting values and file values to parameter sheets.</div>
</div>
<section id="collect-function-requirements">
<h4>Collect function requirements<a class="headerlink" href="#collect-function-requirements" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Make sure that the requirements below are met.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">A parameter sheet (with host/operation) is created in the <span class="menuselection">Define/Create Parameter sheets</span> menu.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">The registration information (source file) is linked to the items in the parameter sheet in <span class="menuselection">Collection item value management</span>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Collect target device （Host name） is registered to the Device list.</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">If the executed operations outputs any of the statuses below, it will be registered to the parameter sheet.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Operation execution result, the operation has successfully ended.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Directories and files are arranged in a specific structure as a result of the output of the operation execution.</div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">Each user must prepare the IaC(Plabook, Role) that generates source files going to be registered to the parameter sheets.</div>
<div class="line">Reference： Ansible Playbook Collection（OS settings collection）</div>
<div class="line"><a class="reference external" href="https://github.com/exastro-suite/playbook-collection-docs/blob/master/README.ja.md">https://github.com/exastro-suite/playbook-collection-docs/blob/master/README.ja.md</a></div>
</div>
</div>
</section>
</section>
</section>
<section id="collect-function-directory-file-structure-and-variable-handling-methods">
<h2><span class="section-number">5.3. </span>Collect function directory, file structure and Variable handling methods<a class="headerlink" href="#collect-function-directory-file-structure-and-variable-handling-methods" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains directories, file structures and variables handled by the Collect function.</div>
</div>
<section id="collect-target-directory-file-structure">
<span id="target-directory-file-structure"></span><h3><span class="section-number">5.3.1. </span>Collect target directory file structure<a class="headerlink" href="#collect-target-directory-file-structure" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Collect target file format</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-number">リスト 5.29 </span><span class="caption-text">Files output in YAML format.</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>■File<span class="w"> </span>name：RH_snmp.yml
■File<span class="w"> </span>contents：
VAR_RH_sshd_config:
<span class="w">  </span>-<span class="w"> </span>key:<span class="w"> </span>PermitRootLogin
<span class="w">    </span>value:<span class="w"> </span>yes
<span class="w">  </span>-<span class="w"> </span>key:<span class="w"> </span>PasswordAuthentication
<span class="w">    </span>value:<span class="w"> </span>no
</pre></div>
</div>
</div>
</li>
<li><p>Collect target directory structure</p></li>
</ol>
<div class="line-block">
<div class="line">The collectable directory path (output destination for the source file) can be handled as the following variable in IaC (Playbook, Role).</div>
</div>
<span id="table-ita-original-variable"></span><table class="docutils align-left" id="id6">
<caption><span class="caption-number">表 5.29 </span><span class="caption-text">Collect function target directory ITA original variables</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 35.7%" />
<col style="width: 53.6%" />
<col style="width: 10.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ITA original variable</p></th>
<th class="head"><p>Variable specified contents</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>__parameter_dir__</p></td>
<td><p>&quot;_parameters&quot;  Operation result directory path</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>__parameters_file_dir__</p></td>
<td><p>&quot;_parameters_file&quot; Operation result directory path</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>__parameters_dir_for_epc__</p></td>
<td><p>&quot;_parameters&quot; Operation result directory path</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>__parameters_file_dir_for_epc__</p></td>
<td><p>&quot;_parameters_file&quot; Operation result directory path</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The upper directory of the collectable directories (parameters) depends on the &quot;Data relay storage path (Ansible”, Ansible driver execution mdoe and the No. of the operation.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">リスト 5.30 </span><span class="caption-text">Collect target directory path</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="p">|</span>-<span class="w">  </span>_parameters<span class="w">           </span>※1
<span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost<span class="w">         </span>※2
<span class="p">|</span><span class="w">       </span><span class="p">|</span>-<span class="w">  </span>SAMPLE.yml<span class="w">    </span>※3
<span class="p">|</span>-<span class="w">  </span>_parameters_file<span class="w">      </span>※4
<span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost<span class="w">         </span>※2
<span class="w">        </span><span class="p">|</span>-<span class="w">  </span>test.txt<span class="w">      </span>※5
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※Hierarchy structure after the upper directory path</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Remarks</div>
<div class="line">※1 Collectable directory（Fixed name）</div>
<div class="line">※2 Host name（Items registered in the device list are collectable）</div>
<div class="line">※3 Collect target file</div>
<div class="line">※4 Collectable directory for file uploads（Fixed name）</div>
<div class="line">※5 Uploadable file</div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">If &quot;<a class="reference internal" href="#table-ita-original-variable"><span class="std std-ref">Collect function target directory ITA original variables</span></a>&quot; is not used for the output destination when creating a Playbook that generates source files, the following structure must be recognised and the Playbook written.</div>
</div>
</div>
<table class="docutils align-left" id="id8">
<caption><span class="caption-number">表 5.30 </span><span class="caption-text">Upper directory paths for the different Ansible-Driver modes</span><a class="headerlink" href="#id8" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 17.9%" />
<col style="width: 17.9%" />
<col style="width: 53.6%" />
<col style="width: 10.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Mode identifier</p></th>
<th class="head"><p>Hierarchy structure</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ansible-Legacy</p></td>
<td><p>legacy</p></td>
<td><p>/&lt;Upper directory(Ansible）&gt;/legacy/</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Ansible-Pioneer</p></td>
<td><p>pioneer</p></td>
<td><p>/&lt;Upper directory(Ansible）&gt;/pioneer/</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Ansible-LegacyRole</p></td>
<td><p>legacy_role</p></td>
<td><p>/&lt;Upper directory(Ansible）&gt;/legacy_role/</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">※Upper directory(Ansible） is <code class="file docutils literal notranslate"><span class="pre">/storage/&lt;Organization&gt;/&lt;Workspace&gt;/driver/ansible/</span></code>.</div>
</div>
</div>
<div class="line-block">
<div class="line">■　e.g.) File path and Directory structure for Collect target file.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-number">リスト 5.31 </span><span class="caption-text">Collect targetfile path and directory structure</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Execution<span class="w"> </span>mode：<span class="w"> </span>Ansible-Legacy
Execution<span class="w"> </span>No：<span class="w"> </span><span class="m">00000000</span>-0000-0000-0000-000000000001
Target：<span class="w"> </span>localhost
Execution<span class="w"> </span>directory<span class="w">    </span>：<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/in/
Execution<span class="w"> </span>result<span class="w"> </span>directory：<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/out/
Collect<span class="w"> </span>target<span class="w"> </span>file<span class="w"> </span>path<span class="w"> </span>and<span class="w"> </span>directory<span class="w"> </span>structure:
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/in/_parameters/localhost/SAMPLE.yml
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/in/_parameters/localhost/OS/RH_snmpd.yml
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/in/_parameters_file/localhost/TEST.txt
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/out/_parameters/localhost/SAMPLE.yml
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/out/_parameters/localhost/OS/RH_snmpd.yml
<span class="w">  </span>-<span class="w"> </span>/storage/Organization/Workspace/driver/ansible/legacy/00000000-0000-0000-0000-000000000001/out/_parameters_file/localhost/TEST.txt
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">If the user wants the file upload menu to be collectable, a file with the same name as the value of the source file variable (file name) must be placed under _parameters_.</div>
<div class="line">For more information about Collection item value list settings, please refer to &quot;Collection item value management&quot;.</div>
<div class="line">As the maximum file size for uploads depends on the server specifications, please refer to  &quot;<a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>&quot; for more information.</div>
<div class="line">The following description methods are available for specifying the files to be uploaded, which are placed under the _parameters_file distribution.</div>
</div>
<table class="docutils align-left" id="id10">
<caption><span class="caption-number">表 5.31 </span><span class="caption-text">Upload target file specification method</span><a class="headerlink" href="#id10" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 21.7%" />
<col style="width: 65.2%" />
<col style="width: 13.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Specification method</p></th>
<th class="head"><p>YAML file input method</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>File name specification</p></td>
<td><p>VAR_FILE_NAME : &lt;‘File name&gt; ’</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>File path specification (Backwards match)</p></td>
<td><p>VAR_FILE_NAME : ‘/&lt;HierarchyX&gt;/&lt;File name&gt;’</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">If multiple corresponding files exists when specifying file names, the target file will be random.</div>
<div class="line">When specifying file path (backwards match) and there are multiple corresponding files, the target file will be random.</div>
</div>
</div>
<div class="line-block">
<div class="line">■　e.g.) Directory structure and source file contents when using variables of Normal variable structure.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-number">リスト 5.32 </span><span class="caption-text">Directory structure and source file contents when using variables of Normal variable structure.</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>■Structure
<span class="w"> </span>【Upper<span class="w"> </span>directory】
<span class="w">    </span><span class="p">|</span>-<span class="w">  </span>_parameters
<span class="w">    </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost
<span class="w">    </span><span class="p">|</span><span class="w">       </span><span class="p">|</span>-<span class="w">  </span>SAMPLE.yml<span class="w">             </span>※Source<span class="w"> </span>file
<span class="w">    </span><span class="p">|</span>-<span class="w">  </span>_parameters_file
<span class="w">    </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost
<span class="w">    </span><span class="p">|</span><span class="w">      </span><span class="p">|</span>-<span class="w">  </span>test.txt<span class="w">                </span>※Upload<span class="w"> </span>target<span class="w"> </span>file
<span class="w">    </span><span class="p">|</span><span class="w">      </span><span class="p">|</span>-<span class="w">  </span>APP001
<span class="w">              </span><span class="p">|</span>-<span class="w">  </span>config<span class="w">               </span>※Upload<span class="w"> </span>target<span class="w"> </span>file
<span class="w"> </span>■Collect<span class="w"> </span>target<span class="w"> </span>File<span class="w"> </span>name：SAMPLE.yml
<span class="w"> </span>■File<span class="w"> </span>contents
<span class="w"> </span>VAR_upload_file:<span class="w"> </span>test.txt
<span class="w"> </span>VAR_upload_fileX:<span class="w"> </span>config
<span class="w"> </span>VAR_upload_fileZ:<span class="w"> </span><span class="s1">&#39;/APP001/config&#39;</span>
</pre></div>
</div>
</div>
</section>
<section id="variable-and-variable-types">
<h3><span class="section-number">5.3.2. </span>Variable and Variable types<a class="headerlink" href="#variable-and-variable-types" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The following 3 types of variables can be handled in the Collect function source file.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Normal variable</div>
<div class="line-block">
<div class="line">Can have one specific value defined per each variable name.</div>
</div>
</div>
</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-number">リスト 5.33 </span><span class="caption-text">Normal variable</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_users</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
</pre></div>
</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Multiple specific value variable</div>
<div class="line-block">
<div class="line">Can have multiple specific values defined per each variable name</div>
</div>
</div>
</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-number">リスト 5.34 </span><span class="caption-text">Multiple specific value structure</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">VAR_users</span><span class="p">:</span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql</span>
</pre></div>
</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Multistage variable</div>
<div class="line-block">
<div class="line">Hierarchical variable.</div>
</div>
</div>
</li>
</ul>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-number">リスト 5.35 </span><span class="caption-text">多段変数の構造の変数の場合</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="nt">VAR_users</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span><span class="w">      </span><span class="c1">#Member variable</span>
<span class="w">      </span><span class="nt">authorized</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Member variable names can contain any ascii charactere xcluding the seven characters below. ( ‘0x20~0x7e can be used)</div>
<div class="line-block">
<div class="line">&quot; . [ ] ' \ :</div>
</div>
<div class="line">Keep in mind that there are a few characters that can’t be used at the beginning of a variable name unless they are enclosed in quotation marks.</div>
<div class="line">For more information, see the official Ansible document, <a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#gotchas">Yamlsyntax</a>.</div>
</div>
</div>
</section>
</section>
<section id="collect-function-menu-structure">
<h2><span class="section-number">5.4. </span>Collect function menu structure<a class="headerlink" href="#collect-function-menu-structure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Collect function menu structure</div>
</div>
<section id="menu-list">
<h3><span class="section-number">5.4.1. </span>Menu list<a class="headerlink" href="#menu-list" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><span class="menuselection">Ansible common</span> menus</div>
<div class="line">The <span class="menuselection">Ansible common</span> menu list are as following.</div>
</div>
</li>
</ol>
<table class="docutils align-left" id="id15">
<caption><span class="caption-number">表 5.32 </span><span class="caption-text">Ansible common Menu list</span><a class="headerlink" href="#id15" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>Menu group</p></th>
<th class="head"><p>Menu</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Ansible common</p></td>
<td><p>Collection item value management</p></td>
<td><div class="line-block">
<div class="line">Set up the connection between the executed operation output results (Source file) and the parameter sheet items and manages the Collect function parameter sheets.</div>
</div>
</td>
</tr>
</tbody>
</table>
<figure class="align-left" id="id16">
<a class="reference internal image-reference" href="../../_images/collected_item_value_list.png"><img alt="Setting item value management menu" src="../../_images/collected_item_value_list.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.9 </span><span class="caption-text">Setting item value management menu</span><a class="headerlink" href="#id16" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Ansible driver menu</div>
<div class="line">The Ansible common console menu list is as following.</div>
</div>
</li>
</ol>
<table class="docutils align-left" id="id17">
<caption><span class="caption-number">表 5.33 </span><span class="caption-text">Ansible driver menu list</span><a class="headerlink" href="#id17" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>Menu group</p></th>
<th class="head"><p>Menu</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Ansible-Legacy</p></td>
<td><p>Execution management</p></td>
<td><p>Manages operation execution history.  Refers to the registration status of the parameter sheet and execution log by the Collect function.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Ansible-LegacyRole</p></td>
<td><p>Execution management</p></td>
<td><p>Manages operation execution history.  Refers to the registration status of the parameter sheet and execution log by the Collect function.</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Ansible-Pioneer</p></td>
<td><p>Execution management</p></td>
<td><p>Manages operation execution history.  Refers to the registration status of the parameter sheet and execution log by the Collect function.</p></td>
</tr>
</tbody>
</table>
<figure class="align-left" id="id18">
<a class="reference internal image-reference" href="../../_images/execution_list_legacy.png"><img alt="Execution management menu" src="../../_images/execution_list_legacy.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.10 </span><span class="caption-text">Execution management menu</span><a class="headerlink" href="#id18" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="collect-function-procedure">
<h2><span class="section-number">5.5. </span>Collect function procedure<a class="headerlink" href="#collect-function-procedure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section describes the how to use the Collect function.</div>
</div>
<section id="workflow">
<h3><span class="section-number">5.5.1. </span>Workflow<a class="headerlink" href="#workflow" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">A standard workflow using the Collect function can be seen below.</div>
<div class="line">For more information regarding using the ITA Ansible-Driver, see &quot;<a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>&quot;.</div>
<div class="line">For more information regarding using the ITA Basic console, see &quot;<a class="reference internal" href="../it_automation_base/basic_console.html"><span class="doc">Basic console</span></a>&quot;.</div>
</div>
<section id="collect-function-workflow">
<h4>Collect function workflow<a class="headerlink" href="#collect-function-workflow" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The following workflow starts from executing Ansible to collecting the values to Parameter sheets.</div>
</div>
<ul>
<li><p>Workflow details and references</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Create Parameter sheet (with host/operation)</div>
<div class="line"><span class="menuselection">Create Parameter sheet</span>'s  <span class="menuselection">Define/Create Parameter sheets</span> menu. For more information, see &quot;<a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Register <span class="menuselection">Collection item value management</span></div>
<div class="line">From the <span class="menuselection">Ansible common</span> and <span class="menuselection">Collection item value management</span> menus, link Source files and Parameter sheet items.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="#about-collected-item-value-list"><span class="std std-ref">Collection item value management</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Prepare execution</div>
<div class="line">Prepare for the execution.</div>
<div class="line">For more information, see  &quot;<a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>&quot; and &quot;<a class="reference internal" href="../it_automation_base/conductor.html"><span class="doc">Conductor</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Execute</div>
<div class="line">Select Execution date, Input operation and Movement and execute.</div>
<div class="line">For more information regarding execution, see &quot;<a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>&quot; and &quot;<a class="reference internal" href="../it_automation_base/conductor.html"><span class="doc">Conductor</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Execute Collect function</div>
<div class="line">Use the Execution number from the Finished execution and use the Collect function to register the values to the parameter sheet.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="#about-backyard"><span class="std std-ref">BackYard contents</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Check Collection status</div>
<div class="line-block">
<div class="line">In the &quot;<span class="menuselection">Ansible-Legacy</span> &quot; / &quot;<span class="menuselection">Ansible-Pioneer</span> &quot; / &quot;<span class="menuselection">Ansible-LegacyRole</span> &quot;'s <span class="menuselection">Execution management</span> menu, users can check the status of the collection process and download the log file.</div>
</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="#about-collect-status"><span class="std std-ref">Check Collect status</span></a>&quot;.</div>
</div>
</li>
</ol>
</li>
</ul>
</section>
</section>
</section>
<section id="collect-function-operation">
<h2><span class="section-number">5.6. </span>Collect function operation<a class="headerlink" href="#collect-function-operation" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the menu functions used by the Collect function.</div>
<div class="line">For more information regarding registering information, see &quot;<a class="reference internal" href="../it_automation_base/basic_console.html"><span class="doc">Basic console</span></a>&quot;.</div>
</div>
<section id="ansible-common">
<h3><span class="section-number">5.6.1. </span>Ansible common<a class="headerlink" href="#ansible-common" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Ansible common menus, see <a class="reference internal" href="ansible_common.html"><span class="doc">Ansible common</span></a></div>
</div>
<section id="collection-item-value-management">
<span id="about-collected-item-value-list"></span><h4>Collection item value management<a class="headerlink" href="#collection-item-value-management" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">In the <span class="menuselection">Collection item value management</span> menu, users can configure links between the collect items and the paramter sheet items.</div>
</div>
<figure class="align-left" id="id19">
<a class="reference internal image-reference" href="../../_images/submenu_collected_item_value_list.png"><img alt="Submenu （Collection item value management）" src="../../_images/submenu_collected_item_value_list.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.11 </span><span class="caption-text">Submenu （Collection item value management）</span><a class="headerlink" href="#id19" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press <span class="menuselection">List ▶ Register or Edit</span> and register a collect item.</div>
</div>
<figure class="align-left" id="id20">
<a class="reference internal image-reference" href="../../_images/edit_collected_item_value_list.png"><img alt="Registration/Edit page（Collection item value management）" src="../../_images/edit_collected_item_value_list.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.12 </span><span class="caption-text">Registration/Edit page（Collection item value management）</span><a class="headerlink" href="#id20" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the <span class="menuselection">Collection item value management</span> menu are as following.</div>
</div>
</li>
</ol>
<table class="docutils align-left" id="id21">
<caption><span class="caption-number">表 5.34 </span><span class="caption-text">Registration page item list（Collection item value management）：Collect item(From)</span><a class="headerlink" href="#id21" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item：Collect item(From)</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Restriction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Parse format</p></td>
<td><p>YAML: Analyses YAML format file and generates Parameter.</p></td>
<td><p>〇</p></td>
<td><p>※1</p></td>
</tr>
<tr class="row-odd"><td><p>PREFIX（File name）</p></td>
<td><p>Input the File name without the format extention.</p></td>
<td><p>〇</p></td>
<td><p>※1</p></td>
</tr>
<tr class="row-even"><td><p>Variable name</p></td>
<td><div class="line-block">
<div class="line">Input the Collect target's variable name.</div>
<div class="line">If the variable name is an Array or hash structure, the user must input Member variable as well.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>※1</p></td>
</tr>
<tr class="row-odd"><td><p>Member variable</p></td>
<td><p>Input if the variable is multiple specific values or multistage variable.</p></td>
<td></td>
<td><p>※1</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id22">
<caption><span class="caption-number">表 5.35 </span><span class="caption-text">Registration page item list（Collection item value management）：Parameter sheet(To)</span><a class="headerlink" href="#id22" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item：Parameter sheet(To)</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Menu group:Menu:Item</p></td>
<td><div class="line-block">
<div class="line">Select an Item.</div>
<div class="line">The items are displayed in the following format with the Menu group, Menu name and Item name divided with &quot;:&quot;.</div>
</div>
</td>
<td></td>
<td><p>※2</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">※1 File name, Variable, Variable, Member variable input value example.</div>
<div class="line">※2 If multiple &quot;<span class="menuselection">PREFIX(File name)</span> - <span class="menuselection">Variable names</span> are defined to single &quot;<span class="menuselection">Parameter sheet(To)</span> - <span class="menuselection">Menu group：Menu：Items</span>&quot;, the execution will follow the file order. For more information, see &quot;<a class="reference internal" href="#about-execute-example"><span class="std std-ref">Collect function examples</span></a>&quot;.</div>
</div>
</div>
<div class="line-block">
<div class="line">■e.g.) If the variable has a normal variable structure.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-number">リスト 5.36 </span><span class="caption-text">If the variable has a normal variable structure.</span><a class="headerlink" href="#id23" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>■File<span class="w"> </span>name:<span class="w"> </span>SAMPLE.yml
■File<span class="w"> </span>contents

VAR_sample_config_1:<span class="w"> </span>yes
VAR_sample_config_2:<span class="w"> </span>test_parameter

■Values<span class="w"> </span>that<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>input<span class="w"> </span>to<span class="w"> </span>Collect<span class="w"> </span>item<span class="w"> </span>value<span class="w"> </span>management<span class="err">&#39;</span>s<span class="w"> </span>Collect<span class="w"> </span>item<span class="o">(</span>FROM<span class="o">)</span>

PREFIX<span class="o">(</span>File<span class="w"> </span>name<span class="o">)</span>:<span class="w"> </span>SAMPLE
Variable<span class="w"> </span>name:<span class="w"> </span>VAR_sample_config_1
<span class="w">         </span>VAR_sample_config_2
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">■ e.g.) If the variable has a multiple variable structure 1</div>
</div>
<div class="literal-block-wrapper docutils container" id="id24">
<div class="code-block-caption"><span class="caption-number">リスト 5.37 </span><span class="caption-text">If the variable has a multiple variable structure 1</span><a class="headerlink" href="#id24" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>■File<span class="w"> </span>name:<span class="w"> </span>SAMPLE_2.yml
■File<span class="w"> </span>contents

VAR_sample2_conf:
<span class="w">  </span>-<span class="w"> </span>SAMPLE1
<span class="w">  </span>-<span class="w"> </span>SAMPLE2
<span class="w">  </span>-<span class="w"> </span>SAMPLE3

■Values<span class="w"> </span>that<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>input<span class="w"> </span>to<span class="w"> </span>Collect<span class="w"> </span>item<span class="w"> </span>value<span class="w"> </span>management<span class="err">&#39;</span>s<span class="w"> </span>Collect<span class="w"> </span>item<span class="o">(</span>FROM<span class="o">)</span>
PREFIX<span class="o">(</span>File<span class="w"> </span>name<span class="o">)</span>:<span class="w"> </span>SAMPLE_2
Variable<span class="w"> </span>name:<span class="w"> </span>VAR_sample2_conf
Member<span class="w"> </span>variable：<span class="w">  </span><span class="o">[</span><span class="m">0</span><span class="o">]</span>
<span class="w">             </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>
<span class="w">             </span><span class="o">[</span><span class="m">2</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">■ e.g.) If the variable has a multiple variable structure 2</div>
</div>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-number">リスト 5.38 </span><span class="caption-text">If the variable has a multiple variable structure 2</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>■File<span class="w"> </span>name:<span class="w"> </span>RH_sshd.yml
■File<span class="w"> </span>contents

VAR_RH_sshd_config:
<span class="w">  </span>-<span class="w"> </span>key:<span class="w"> </span>PermitRootLogin
<span class="w">    </span>value:<span class="w"> </span>yes
<span class="w">  </span>-<span class="w"> </span>key:<span class="w"> </span>PasswordAuthentication
<span class="w">    </span>value:<span class="w"> </span>no

<span class="w"> </span>■Values<span class="w"> </span>that<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>input<span class="w"> </span>to<span class="w"> </span>Collect<span class="w"> </span>item<span class="w"> </span>value<span class="w"> </span>management<span class="err">&#39;</span>s<span class="w"> </span>Collect<span class="w"> </span>item<span class="o">(</span>FROM<span class="o">)</span>
<span class="w"> </span>PREFIX<span class="o">(</span>File<span class="w"> </span>name<span class="o">)</span>:<span class="w"> </span>RH_sshd
<span class="w"> </span>Variable<span class="w"> </span>name:<span class="w"> </span>VAR_RH_sshd_config:
<span class="w"> </span>Member<span class="w"> </span>variable：<span class="w">  </span><span class="o">[</span><span class="m">0</span><span class="o">]</span>.key
<span class="w">              </span><span class="o">[</span><span class="m">0</span><span class="o">]</span>.value
<span class="w">              </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>.key
<span class="w">              </span><span class="o">[</span><span class="m">1</span><span class="o">]</span>.value
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">■e.g.)If the variable has a multiple variable structure 3</div>
</div>
<div class="literal-block-wrapper docutils container" id="id26">
<div class="code-block-caption"><span class="caption-number">リスト 5.39 </span><span class="caption-text">If the variable has a multiple variable structure 3</span><a class="headerlink" href="#id26" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>■File<span class="w"> </span>name:<span class="w"> </span>RH_snmp.yml
■File<span class="w"> </span>contents

VAR_RH_snmpd_info:
<span class="w">  </span>com2sec:
<span class="w">    </span>-<span class="w"> </span>sec_name:<span class="w"> </span><span class="s2">&quot;testsec&quot;</span>
<span class="w">      </span>source:<span class="w"> </span><span class="s2">&quot;192.168.1.0/24&quot;</span>
<span class="w">      </span>community:<span class="w"> </span><span class="s2">&quot;public&quot;</span>
<span class="w">    </span>-<span class="w"> </span>sec_name:<span class="w"> </span><span class="s2">&quot;local&quot;</span>
<span class="w">      </span>source:<span class="w"> </span><span class="s2">&quot;localhost&quot;</span>
<span class="w">      </span>community:<span class="w"> </span><span class="s2">&quot;private&quot;</span>

■Values<span class="w"> </span>that<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>input<span class="w"> </span>to<span class="w"> </span>Collect<span class="w"> </span>item<span class="w"> </span>value<span class="w"> </span>management<span class="err">&#39;</span>s<span class="w"> </span>Collect<span class="w"> </span>item<span class="o">(</span>FROM<span class="o">)</span>
PREFIX<span class="o">(</span>File<span class="w"> </span>name<span class="o">)</span>:<span class="w"> </span>RH_snmp
Variable<span class="w"> </span>name:<span class="w"> </span>VAR_RH_snmp_config:
Member<span class="w"> </span>variable：<span class="w">  </span>com2sec<span class="o">[</span><span class="m">0</span><span class="o">]</span>.sec_name
<span class="w">             </span>com2sec<span class="o">[</span><span class="m">0</span><span class="o">]</span>.source
<span class="w">             </span>com2sec<span class="o">[</span><span class="m">0</span><span class="o">]</span>.community
<span class="w">             </span>com2sec<span class="o">[</span><span class="m">1</span><span class="o">]</span>.sec_name
<span class="w">             </span>com2sec<span class="o">[</span><span class="m">1</span><span class="o">]</span>.source
<span class="w">             </span>com2sec<span class="o">[</span><span class="m">1</span><span class="o">]</span>.community
</pre></div>
</div>
</div>
</section>
</section>
<section id="ansible-legacyansible-pioneeransible-legacyrole">
<h3><span class="section-number">5.6.2. </span>Ansible-Legacy、Ansible-Pioneer、Ansible-LegacyRole<a class="headerlink" href="#ansible-legacyansible-pioneeransible-legacyrole" title="Link to this heading">¶</a></h3>
<section id="check-collect-status">
<span id="about-collect-status"></span><h4>Check Collect status<a class="headerlink" href="#check-collect-status" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Users can check the status of completed operations and download the log files from the different console's (<span class="menuselection">Ansible-Legacy</span> /<span class="menuselection">Ansible-Pioneer</span> /<span class="menuselection">Ansible-LegacyRole</span> ) <span class="menuselection">Execution management</span> menu.</div>
</div>
<figure class="align-left" id="id27">
<a class="reference internal image-reference" href="../../_images/submenu_execution_list_legacy.png"><img alt="Execution management menu" src="../../_images/submenu_execution_list_legacy.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.13 </span><span class="caption-text">Execution management menu</span><a class="headerlink" href="#id27" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-left" id="id28">
<caption><span class="caption-number">表 5.36 </span><span class="caption-text">Execution management collect status details</span><a class="headerlink" href="#id28" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Status</p></td>
<td><div class="line-block">
<div class="line">Collect function execution status</div>
<div class="line">Not target; Not a Collect function target (No target file)</div>
<div class="line">Collected: Collect function executed.</div>
<div class="line">Collected (with notification): If any errors occurred during registration/update.</div>
<div class="line">Collection error：There is something wrong with the Movement operation or Host.</div>
</div>
</td>
<td><p>※</p></td>
</tr>
<tr class="row-odd"><td><p>Collect log</p></td>
<td><p>Downloads the Collect function execution log</p></td>
<td></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id29">
<caption><span class="caption-number">表 5.37 </span><span class="caption-text">Collect status details</span><a class="headerlink" href="#id29" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">Operation status</div>
<div class="line">Status</div>
</div>
</th>
<th class="head"><p>Collect function target</p></th>
<th class="head"><p>Target file</p></th>
<th class="head"><div class="line-block">
<div class="line">Collect status</div>
<div class="line">Status</div>
</div>
</th>
<th class="head"><p>Collect log</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Other than Complete</p></td>
<td><p>No</p></td>
<td><p>Not target</p></td>
<td><p>Blank</p></td>
<td><p>Blank</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Other than Complete</p></td>
<td><p>Yes</p></td>
<td><p>Not target</p></td>
<td><p>Blank</p></td>
<td><p>Blank</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Complete</p></td>
<td><p>No</p></td>
<td><p>Target</p></td>
<td><p>Not target</p></td>
<td><p>With log file</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Complete</p></td>
<td><p>Yes</p></td>
<td><p>Target</p></td>
<td><p>Collected</p></td>
<td><p>With log file</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Complete</p></td>
<td><p>Yes</p></td>
<td><p>Target</p></td>
<td><p>Collected(with notification）</p></td>
<td><p>With log file</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Complete</p></td>
<td><p>Yes</p></td>
<td><p>Target</p></td>
<td><p>Collect error</p></td>
<td><p>With log file</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">※Status notations</div>
<div class="line">If the Operation status shows “Not complete”, the <span class="menuselection">Collect status</span> will not be updated because it is not subject to the Collect function.</div>
<div class="line">If the operation status shows as “Complete” and there are no files to collect, the status will show as “Collected” and the collection log will be blank.</div>
<div class="line">Even if the RESTAPI registration process fails during collecting the “ Collection interface information, <span class="menuselection">Setting item value management</span> or “ Menu access rights/permission roles”, the collection will show as “ Complete (with notification)”.</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>Logfile Output contents example</strong></div>
</div>
<div class="line-block">
<div class="line">■ e.g.) Logfile Output contents example</div>
</div>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-number">リスト 5.40 </span><span class="caption-text">Logfile Output contents example - Collected</span><a class="headerlink" href="#id30" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="w"> </span>REST<span class="w"> </span>DATA<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="w"> </span>menu<span class="w"> </span>ID:<span class="w"> </span>collect_001<span class="w"> </span>operation<span class="w"> </span>NO:<span class="w"> </span>4001e182-51d2-4918-96e0-5981c4dc6d5f<span class="o">)</span>
<span class="w"> </span>Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="w"> </span>Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="w"> </span>REST<span class="w"> </span>DATA<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="w"> </span>menu<span class="w"> </span>ID:<span class="w"> </span>collect_001<span class="w"> </span>operation<span class="w"> </span>NO:<span class="w"> </span>4001e182-51d2-4918-96e0-5981c4dc6d5f<span class="o">)</span>
<span class="w"> </span>Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="w"> </span>Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="w"> </span>REST<span class="w"> </span>DATA<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="w"> </span>menu<span class="w"> </span>ID:<span class="w"> </span>collect_001<span class="w"> </span>operation<span class="w"> </span>NO:<span class="w"> </span>4001e182-51d2-4918-96e0-5981c4dc6d5f<span class="o">)</span>
<span class="w"> </span>Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-number">リスト 5.41 </span><span class="caption-text">Logfile Output contents example - Collected(with notification)</span><a class="headerlink" href="#id31" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="o">{</span><span class="s1">&#39;item_1&#39;</span>:<span class="w"> </span><span class="o">[{</span><span class="s1">&#39;status_code&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg_args&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg&#39;</span>:<span class="w"> </span><span class="s1">&#39;Regular expression error (1,Value:sample_value)&#39;</span><span class="o">}]}</span>
<span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>register<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>CMDB.<span class="w"> </span><span class="o">(</span><span class="m">1</span>/1<span class="o">)</span>
Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="o">{</span><span class="s1">&#39;item_1&#39;</span>:<span class="w"> </span><span class="o">[{</span><span class="s1">&#39;status_code&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg_args&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg&#39;</span>:<span class="w"> </span><span class="s1">&#39;Regular expression error (1,Value:sample_value)&#39;</span><span class="o">}]}</span>
<span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>register<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>CMDB.<span class="w"> </span><span class="o">(</span><span class="m">1</span>/1<span class="o">)</span>
Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
Collect<span class="w"> </span>START<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
<span class="o">{</span><span class="s1">&#39;item_1&#39;</span>:<span class="w"> </span><span class="o">[{</span><span class="s1">&#39;status_code&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg_args&#39;</span>:<span class="w"> </span><span class="s1">&#39;&#39;</span>,<span class="w"> </span><span class="s1">&#39;msg&#39;</span>:<span class="w"> </span><span class="s1">&#39;Regular expression error (1,Value:sample_value)&#39;</span><span class="o">}]}</span>
<span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>register<span class="w"> </span>or<span class="w"> </span>update<span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>CMDB.<span class="w"> </span><span class="o">(</span><span class="m">1</span>/1<span class="o">)</span>
Collect<span class="w"> </span>END<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Ansible_conf&#39;</span><span class="o">])</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id32">
<div class="code-block-caption"><span class="caption-number">リスト 5.42 </span><span class="caption-text">Logfile Output contents example - Collect error [Operation]</span><a class="headerlink" href="#id32" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>Operation<span class="w"> </span>is<span class="w"> </span>abolished,<span class="w"> </span>so<span class="w"> </span>registration<span class="w"> </span>and<span class="w"> </span>update<span class="w"> </span>processing<span class="w"> </span>is<span class="w"> </span>skipped<span class="w"> </span><span class="o">(</span>Operation<span class="w"> </span>No:<span class="w"> </span>4001e182-51d2-4918-96e0-5981c4dc6d5f<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-number">リスト 5.43 </span><span class="caption-text">Logfile Output contents example - Collect error [host]</span><a class="headerlink" href="#id33" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>The<span class="w"> </span>registration<span class="w"> </span>/<span class="w"> </span>update<span class="w"> </span>process<span class="w"> </span>is<span class="w"> </span>skipped<span class="w"> </span>because<span class="w"> </span>the<span class="w"> </span>target<span class="w"> </span>device<span class="w"> </span>has<span class="w"> </span>not<span class="w"> </span>been<span class="w"> </span>registered<span class="w"> </span>or<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>abolished<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-1<span class="o">)</span>.
<span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>The<span class="w"> </span>registration<span class="w"> </span>/<span class="w"> </span>update<span class="w"> </span>process<span class="w"> </span>is<span class="w"> </span>skipped<span class="w"> </span>because<span class="w"> </span>the<span class="w"> </span>target<span class="w"> </span>device<span class="w"> </span>has<span class="w"> </span>not<span class="w"> </span>been<span class="w"> </span>registered<span class="w"> </span>or<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>abolished<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-2<span class="o">)</span>.
<span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>The<span class="w"> </span>registration<span class="w"> </span>/<span class="w"> </span>update<span class="w"> </span>process<span class="w"> </span>is<span class="w"> </span>skipped<span class="w"> </span>because<span class="w"> </span>the<span class="w"> </span>target<span class="w"> </span>device<span class="w"> </span>has<span class="w"> </span>not<span class="w"> </span>been<span class="w"> </span>registered<span class="w"> </span>or<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>abolished<span class="w"> </span><span class="o">(</span>host<span class="w"> </span>name:<span class="w"> </span>exastro-test-3<span class="o">)</span>.
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-number">リスト 5.44 </span><span class="caption-text">Logfile Output contents example - Not target</span><a class="headerlink" href="#id34" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Process<span class="o">]</span><span class="w"> </span>There<span class="w"> </span>is<span class="w"> </span>no<span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>collection<span class="w"> </span>target<span class="w"> </span>directory.
</pre></div>
</div>
</div>
</section>
</section>
<section id="backyard-contents">
<span id="about-backyard"></span><h3><span class="section-number">5.6.3. </span>BackYard contents<a class="headerlink" href="#backyard-contents" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Acquire Collection interface information</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Acquire list over completed operations (with Normal end)</div>
<div class="line">Collect targetStatus： Complete</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Acquire the following information from the collectable operation no.</div>
<div class="line">- Operation information</div>
<div class="line">- Target host</div>
<div class="line">- Target source file</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Inquire wether the target host is registered in the Device list or not</div>
</div>
<div class="line-block">
<div class="line">Registered： Collect target</div>
<div class="line">Not registered： Not target</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Acquire the Menu ID of the target Parameter sheet from the source file and the Collection item value list</div>
<div class="line">※If there are multiple Target soruce files, the File names will be processed in rising order.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Create RESTAPI Parameter with the information gathered in Step 1-4.</div>
<div class="line">Query the Menu ID for data and determine the RESTAPI Execution type.</div>
<div class="line">Register：　Unique operation and Host combination data is not registered.</div>
<div class="line">Update：　 Unique operation and Host combination data is registered.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Register/Update the data using ITA Standard RESTAPI functions</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Update the status of the Collection status to the Operation No.</div>
</div>
</li>
</ol>
</li>
</ol>
<div class="line-block">
<div class="line">Keep in mind that the timing of the data registration to the Parameter sheet depends on the startup cycle of the Automatic process.</div>
<div class="line">For more information regarding Target execution results, see &quot;<a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>&quot;.</div>
</div>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">5.7. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="references">
<h3><span class="section-number">5.7.1. </span>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Below are examples of IaCs (Playbook and Role)</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Exastro Playbook Collection</div>
<div class="line"><a class="reference external" href="https://github.com/exastro-suite/playbook-collection-docs/blob/master/README.ja.md">https://github.com/exastro-suite/playbook-collection-docs/blob/master/README.ja.md</a></div>
</div>
</li>
<li><div class="line-block">
<div class="line">2. Ansible config collecting and Parameter creating Playbook.</div>
</div>
<div class="literal-block-wrapper docutils container" id="makeyml-ansible-yml">
<div class="code-block-caption"><span class="caption-number">リスト 5.45 </span><span class="caption-text">makeYml_Ansible.yml</span><a class="headerlink" href="#makeyml-ansible-yml" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make yaml file</span>
<span class="w">   </span><span class="nt">blockinfile</span><span class="p">:</span>
<span class="w">     </span><span class="nt">create</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">     </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0644</span>
<span class="w">     </span><span class="nt">insertbefore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EOF</span>
<span class="w">     </span><span class="nt">marker</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">     </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">__parameter_dir__</span><span class="nv">  </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}/Ansible_conf.yml&quot;</span>
<span class="w">     </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">ansible_architecture: {{ ansible_architecture }}</span>
<span class="w">      </span><span class="no">ansible_bios_version: {{ ansible_bios_version }}</span>
<span class="w">      </span><span class="no">ansible_default_ipv4__address: {{ ansible_default_ipv4.address }}</span>
<span class="w">      </span><span class="no">ansible_default_ipv4__interface: {{ ansible_default_ipv4.interface }}</span>
<span class="w">      </span><span class="no">ansible_default_ipv4__network: {{ ansible_default_ipv4.network }}</span>
<span class="w">      </span><span class="no">ansible_distribution: {{ ansible_distribution }}</span>
<span class="w">      </span><span class="no">ansible_distribution_file_path: {{ ansible_distribution_file_path }}</span>
<span class="w">      </span><span class="no">ansible_distribution_file_variety: {{ ansible_distribution_file_variety }}</span>
<span class="w">      </span><span class="no">ansible_distribution_major_version: {{ ansible_distribution_major_version }}</span>
<span class="w">      </span><span class="no">ansible_distribution_release: {{ ansible_distribution_release }}</span>
<span class="w">      </span><span class="no">ansible_distribution_version: {{ ansible_distribution_version }}</span>
<span class="w">      </span><span class="no">ansible_machine: {{ ansible_machine }}</span>
<span class="w">      </span><span class="no">ansible_memtotal_mb: {{ ansible_memtotal_mb }}</span>
<span class="w">      </span><span class="no">ansible_nodename: {{ ansible_nodename }}</span>
<span class="w">      </span><span class="no">ansible_os_family: {{ ansible_os_family }}</span>
<span class="w">      </span><span class="no">ansible_pkg_mgr: {{ ansible_pkg_mgr }}</span>
<span class="w">      </span><span class="no">ansible_processor_cores: {{ ansible_processor_cores }}</span>
<span class="w">      </span><span class="no">ansible_processor_count: {{ ansible_processor_count }}</span>
<span class="w">      </span><span class="no">ansible_processor_threads_per_core: {{ ansible_processor_threads_per_core }}</span>
<span class="w">      </span><span class="no">ansible_processor_vcpus: {{ ansible_processor_vcpus }}</span>
<span class="w">      </span><span class="no">ansible_product_name: {{ ansible_product_name }}</span>
<span class="w">      </span><span class="no">ansible_product_serial: {{ ansible_product_serial }}</span>
<span class="w">      </span><span class="no">ansible_product_uuid: {{ ansible_product_uuid }}</span>
<span class="w">      </span><span class="no">ansible_product_version: {{ ansible_product_version }}</span>
<span class="w">      </span><span class="no">ansible_python__executable: {{ ansible_python.executable }}</span>
<span class="w">      </span><span class="no">ansible_python_version: {{ ansible_python_version }}</span>
<span class="w">      </span><span class="no">ansible_service_mgr: {{ ansible_service_mgr }}</span>
<span class="w">      </span><span class="no">vconsole_config: vconsole.conf</span>
<span class="w">      </span><span class="no">yum_config: yum.conf</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get vconsole config</span>
<span class="w">  </span><span class="nt">fetch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/vconsole.conf</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">__parameters_file_dir__</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}/&quot;</span>
<span class="w">    </span><span class="nt">flat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get yum config</span>
<span class="w">  </span><span class="nt">fetch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/yum.conf</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">__parameters_file_dir__</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">inventory_hostname</span><span class="nv"> </span><span class="s">}}/&quot;</span>
<span class="w">    </span><span class="nt">flat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</pre></div>
</div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">※　When executing makeYML_Ansible.yml and generate the Collectable source file (yaml), gather_facts must be enabled.</div>
<div class="line">When editing the Movement list in Ansible Legacy, enter the following in the header section.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="index.html"><span class="doc">Ansible Driver</span></a>&quot;.</div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-number">リスト 5.46 </span><span class="caption-text">gather_facts valid setting example</span><a class="headerlink" href="#id35" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span>
<span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</pre></div>
</div>
</div>
</section>
<section id="collect-function-examples">
<span id="about-execute-example"></span><h3><span class="section-number">5.7.2. </span>Collect function examples<a class="headerlink" href="#collect-function-examples" title="Link to this heading">¶</a></h3>
<section id="when-target-have-multiple-files-for-single-menu">
<h4>When target have multiple files for single menu<a class="headerlink" href="#when-target-have-multiple-files-for-single-menu" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The following section shows an example of the directory and the collect process when multiple &quot;PREFIX (file name)-Variable names&quot; are set to a single &quot;Menu-Item&quot; and there are multiple corresponding source files in the target host's collect directory.</div>
</div>
<div class="literal-block-wrapper docutils container" id="collect-target-file">
<div class="code-block-caption"><span class="caption-number">リスト 5.47 </span><span class="caption-text">Collect target file</span><a class="headerlink" href="#collect-target-file" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>【Upper<span class="w"> </span>directory】
<span class="w">   </span><span class="p">|</span>-<span class="w">  </span>_parameters
<span class="w">       </span><span class="p">|</span>-<span class="w">  </span>ita-sample01
<span class="w">           </span><span class="p">|</span>-<span class="w">  </span>SAMPLE_01.yml
<span class="w">           </span><span class="p">|</span>-<span class="w">  </span>SAMPLE_02.yml
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>■ Collection item value management settings</strong></div>
</div>
<div class="line-block">
<div class="line">■File name：SAMPLE_01.yml ,SAMPLE_02.yml</div>
</div>
<table class="docutils align-left" id="id36">
<caption><span class="caption-number">表 5.38 </span><span class="caption-text">File contents</span><a class="headerlink" href="#id36" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SAMPLE_01.yml</p></th>
<th class="head"><p>SAMPLE_02.yml</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">VAR_sample_config_1: 1</div>
<div class="line">VAR_sample_config_2: 2</div>
<div class="line">VAR_sample_config_3: 3</div>
</div>
</td>
<td><div class="line-block">
<div class="line">VAR_sample_config_1: “A”</div>
<div class="line">VAR_sample_config_B: “B”</div>
<div class="line">VAR_sample_config_X: “X”</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><strong>■ Collecting target menu items and configuring collected value item lists</strong></div>
</div>
<ol class="arabic simple">
<li><p>Collecting target menu items and configuring collected value item lists</p></li>
</ol>
<figure class="align-left" id="id37">
<a class="reference internal image-reference" href="../../_images/link_parameter_collected_item_value_list.drawio.png"><img alt="Collect value item target settings and parameter sheet" src="../../_images/link_parameter_collected_item_value_list.drawio.png" style="width: 6.67391in; height: 3.20028in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.14 </span><span class="caption-text">Collect value item target settings and parameter sheet</span><a class="headerlink" href="#id37" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line"><strong>■Execute Collect process per File according to the Collect value item management's setting contents</strong></div>
</div>
<ol class="arabic simple">
<li><p>SAMPLE_01.yml registration process（Register）</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/var_sample_01_register.png"><img alt="SAMPLE_01.yml registration process（Register）" src="../../_images/var_sample_01_register.png" style="width: 6.00785in; height: 0.51786in;" />
</a>
</figure>
<ol class="arabic simple" start="2">
<li><p>SAMPLE_02.yml registration process（Update）</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/var_sample_02_update.png"><img alt="SAMPLE_02.yml registration process（Update）" src="../../_images/var_sample_02_update.png" style="width: 6.06086in; height: 0.52304in;" />
</a>
</figure>
<ol class="arabic simple" start="3">
<li><p>Record status after running the collect function.</p></li>
</ol>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/var_sample_03_end.png"><img alt="Record status after running the collect function." src="../../_images/var_sample_03_end.png" style="width: 6.06086in; height: 0.52834in;" />
</a>
</figure>
</section>
<section id="handling-collect-target-file-values">
<span id="about-values-for-collected-files"></span><h4>Handling Collect target file values<a class="headerlink" href="#handling-collect-target-file-values" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">For Collect target files output in Yaml format, the handling of values during the registration process in the parameter sheet are handled as following.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-number">リスト 5.48 </span><span class="caption-text">Sample.yml</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_TEST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TEST</span>
<span class="nt">VAR_STR_TEST1</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;TEST1&#39;</span>
<span class="nt">VAR_STR_TEST2</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TEST2&quot;</span>
<span class="nt">VAR_null</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">VAR_NULL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NULL</span>
<span class="nt">VAR_STR_null</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;null&quot;</span>
<span class="nt">VAR_STR_NULL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NULL&quot;</span>
<span class="nt">VAR_true</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">VAR_false</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">VAR_STR_true</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="nt">VAR_STR_false</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span>
<span class="nt">VAR_YES</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
<span class="nt">VAR_NO</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NO</span>
<span class="nt">VAR_STR_YES</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;YES&quot;</span>
<span class="nt">VAR_STR_NO</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;NO&quot;</span>
<span class="nt">VAR_NON</span><span class="p">:</span>
<span class="nt">VAR_Quotation</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="nt">VAR_WQuotation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="nt">VAR_INT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">■ Collect target YAML (sample.yml) key and value</div>
</div>
<table class="docutils align-left" id="id38">
<caption><span class="caption-number">表 5.39 </span><span class="caption-text">Collect target YAML (sample.yml) key and value</span><a class="headerlink" href="#id38" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 10.7%" />
<col style="width: 35.7%" />
<col style="width: 35.7%" />
<col style="width: 17.9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_TEST</p></td>
<td><p>TEST</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_STR_TEST1</p></td>
<td><p>'TEST1'</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>VAR_STR_TEST2</p></td>
<td><p>&quot;TEST2&quot;</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>VAR_null</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>VAR_NULL</p></td>
<td><p>NULL</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>VAR_STR_null</p></td>
<td><p>&quot;null&quot;</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>VAR_STR_NULL</p></td>
<td><p>&quot;NULL&quot;</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>VAR_true</p></td>
<td><p>true</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>VAR_false</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>VAR_STR_true</p></td>
<td><p>&quot;true&quot;</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>VAR_STR_false</p></td>
<td><p>&quot;false&quot;</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>VAR_YES</p></td>
<td><p>YES</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>VAR_NO</p></td>
<td><p>NO</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>VAR_STR_YES</p></td>
<td><p>&quot;YES&quot;</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>VAR_STR_NO</p></td>
<td><p>&quot;NO&quot;</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>VAR_NON</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>VAR_Quotation</p></td>
<td><p>''</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>VAR_WQuotation</p></td>
<td><p>&quot;&quot;</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>VAR_INT</p></td>
<td><p>100</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">■ Collecting YAML(sample.yml)</div>
</div>
<table class="docutils align-left" id="id39">
<caption><span class="caption-number">表 5.40 </span><span class="caption-text">Collecting YAML(sample.yml)</span><a class="headerlink" href="#id39" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>Collect target (Key:Value)</p></th>
<th class="head"><div class="line-block">
<div class="line">Parameter sheet</div>
<div class="line">Item name</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">RESTAPI response</div>
<div class="line">Value</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">RESTAPI response</div>
<div class="line">Data type</div>
</div>
</th>
<th class="head"><p>WEB page display</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_TEST: TEST</p></td>
<td><p>Parameter/VAR_TEST</p></td>
<td><p>&quot;TEST&quot;</p></td>
<td><p>string</p></td>
<td><p>TEST</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_STR_TEST1: 'TEST1'</p></td>
<td><p>Parameter/VAR_STR_TEST1</p></td>
<td><p>&quot;TEST1&quot;</p></td>
<td><p>string</p></td>
<td><p>TEST1</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>VAR_STR_TEST2: &quot;TEST2&quot;</p></td>
<td><p>Parameter/VAR_STR_TEST2</p></td>
<td><p>&quot;TEST2&quot;</p></td>
<td><p>string</p></td>
<td><p>TEST2</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>VAR_null: null</p></td>
<td><p>Parameter/VAR_null</p></td>
<td><p>null</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>VAR_NULL: NULL</p></td>
<td><p>Parameter/VAR_NULL</p></td>
<td><p>null</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>VAR_STR_null: &quot;null&quot;</p></td>
<td><p>Parameter/VAR_STR_null</p></td>
<td><p>&quot;null&quot;</p></td>
<td><p>string</p></td>
<td><p>null</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>VAR_STR_NULL: &quot;NULL&quot;</p></td>
<td><p>Parameter/VAR_STR_NULL</p></td>
<td><p>&quot;NULL&quot;</p></td>
<td><p>string</p></td>
<td><p>NULL</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>VAR_true: true</p></td>
<td><p>Parameter/VAR_true</p></td>
<td><p>true</p></td>
<td><p>boolean</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>VAR_false: false</p></td>
<td><p>Parameter/VAR_false</p></td>
<td><p>false</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>VAR_STR_true: &quot;true&quot;</p></td>
<td><p>Parameter/VAR_STR_true</p></td>
<td><p>&quot;true&quot;</p></td>
<td><p>string</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>VAR_STR_false: &quot;false&quot;</p></td>
<td><p>Parameter/VAR_STR_false</p></td>
<td><p>&quot;false&quot;</p></td>
<td><p>string</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>VAR_YES: YES</p></td>
<td><p>Parameter/VAR_YES</p></td>
<td><p>true</p></td>
<td><p>boolean</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>13</p></td>
<td><p>VAR_NO: NO</p></td>
<td><p>Parameter/VAR_NO</p></td>
<td><p>false</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
</tr>
<tr class="row-odd"><td><p>14</p></td>
<td><p>VAR_STR_YES: &quot;YES&quot;</p></td>
<td><p>Parameter/VAR_STR_YES</p></td>
<td><p>&quot;YES&quot;</p></td>
<td><p>string</p></td>
<td><p>YES</p></td>
</tr>
<tr class="row-even"><td><p>15</p></td>
<td><p>VAR_STR_NO: &quot;NO&quot;</p></td>
<td><p>Parameter/VAR_STR_NO</p></td>
<td><p>&quot;NO&quot;</p></td>
<td><p>string</p></td>
<td><p>NO</p></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>VAR_NON:</p></td>
<td><p>Parameter/VAR_NON</p></td>
<td><p>null</p></td>
<td><p>null</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>VAR_Quotation: ''</p></td>
<td><p>Parameter/VAR_Quotation</p></td>
<td><p>&quot;&quot;</p></td>
<td><p>string</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>VAR_WQuotation: &quot;&quot;</p></td>
<td><p>Parameter/VAR_WQuotation</p></td>
<td><p>&quot;&quot;</p></td>
<td><p>string</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>VAR_INT: 100</p></td>
<td><p>パラメータ/VAR_INT</p></td>
<td><p>&quot;100&quot;</p></td>
<td><p>string</p></td>
<td><p>100</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">※This section explains RESTAPI response values and Data types displayed on the WebUI.</div>
<div class="line">※The Parameter sheet items are strings (single line).</div>
</div>
<ul class="simple">
<li><p>Target parameter sheet on WebUI display result</p></li>
</ul>
<figure class="align-default" id="id40">
<a class="reference internal image-reference" href="../../_images/val_test_filter_item1_9.png"><img alt="Target parameter sheet on WebUI display result 1" src="../../_images/val_test_filter_item1_9.png" style="width: 6.96252in; height: 1.98221in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.15 </span><span class="caption-text">Target parameter sheet on WebUI display result 1</span><a class="headerlink" href="#id40" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id41">
<a class="reference internal image-reference" href="../../_images/val_test_filter_item10_19.png"><img alt="Target parameter sheet on WebUI display result 2" src="../../_images/val_test_filter_item10_19.png" style="width: 6.96252in; height: 1.98221in;" />
</a>
<figcaption>
<p><span class="caption-number">図 5.16 </span><span class="caption-text">Target parameter sheet on WebUI display result 2</span><a class="headerlink" href="#id41" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Results fetched with Target Parameter sheet's RESTAPI(filter)</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id42">
<div class="code-block-caption"><span class="caption-number">リスト 5.49 </span><span class="caption-text">RESTAPI(filter) response</span><a class="headerlink" href="#id42" title="Link to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nt">&quot;parameter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;base_datetime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023/05/17 13:58:47&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;discard&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;host_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;exastro-test-1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TEST&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_10&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_11&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_12&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_13&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_14&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;YES&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_15&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NO&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_16&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_17&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_18&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_19&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;100&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TEST1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_3&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TEST2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_4&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_5&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_6&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;null&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_7&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NULL&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_8&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;item_9&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;last_execute_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023/05/17 13:58:47&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;last_update_date_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023/05/17 14:00:07.944031&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;last_updated_user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Collect execute function&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;operation_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023/01/01 00:00:00&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;operation_name_disp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OP1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;operation_name_select&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023/01/01 00:00_OP1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remarks&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ede113f8-14b1-48bf-8b3f-409f68b107ae&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;000-00000&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;ts&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-05-17T05:54:03.937Z&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</section>
<section id="if-multiple-files-with-the-same-file-names-are-upload-target-files">
<h4>If multiple files with the same file names are Upload target files<a class="headerlink" href="#if-multiple-files-with-the-same-file-names-are-upload-target-files" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This section describes an example of specifying an Upload target file for a Collect target file output in Yaml format, when the same file name needs to be handled on the same host and by hierarchy.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-number">リスト 5.50 </span><span class="caption-text">Collect target file File path and Directory structure (Multiple file with same file name)</span><a class="headerlink" href="#id43" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>【Upper<span class="w"> </span>directory】
<span class="w">   </span><span class="p">|</span>-<span class="w">  </span>_parameters
<span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost
<span class="w">   </span><span class="p">|</span><span class="w">       </span><span class="p">|</span>-<span class="w">  </span>SAMPLE.yml
<span class="w">   </span><span class="p">|</span>-<span class="w">  </span>_parameters_file
<span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost
<span class="w">             </span><span class="p">|</span>-<span class="w">  </span>APP001
<span class="w">                 </span><span class="p">|</span>-<span class="w">  </span>config<span class="w">                   </span><span class="c1">#①</span>
<span class="w">             </span><span class="p">|</span>-<span class="w">  </span>APP002
<span class="w">                 </span><span class="p">|</span>-<span class="w">  </span>config<span class="w">                   </span><span class="c1">#②</span>
<span class="w">             </span><span class="p">|</span>-<span class="w">  </span>APP003
<span class="w">                 </span><span class="p">|</span>-<span class="w">  </span>config<span class="w">                   </span><span class="c1">#③</span>
<span class="w">             </span><span class="p">|</span>-<span class="w">  </span>APP002
<span class="w">                 </span><span class="p">|</span>-<span class="w">  </span>config<span class="w">                   </span><span class="c1">#④</span>

<span class="w">  </span>■Collect<span class="w"> </span>target<span class="w"> </span>file<span class="w"> </span>name：SAMPLE.yml
<span class="w">  </span>■File<span class="w"> </span>contents
<span class="w">  </span>VAR_upload_file_1:<span class="w"> </span>config
<span class="w">  </span>VAR_upload_file_2:<span class="w"> </span>‘/APP002/config’
<span class="w">  </span>VAR_upload_file_3:<span class="w"> </span>‘/APP001/config’
<span class="w">  </span>VAR_upload_file_4:<span class="w"> </span>‘/APP003/APP002/config’
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※For more information regarding Upper directories, see &quot;<a class="reference internal" href="#target-directory-file-structure"><span class="std std-ref">Collect target directory file structure</span></a>&quot;.</div>
<div class="line-block">
<div class="line">The target Collect file when collected are as following.</div>
</div>
</div>
<table class="docutils align-left" id="id44">
<caption><span class="caption-number">表 5.41 </span><span class="caption-text">Collect target file</span><a class="headerlink" href="#id44" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 40.0%" />
<col style="width: 40.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Collect item(FROM)/Variable name</p></th>
<th class="head"><p>Target file</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_upload_file_1</p></td>
<td><p>Random from File ①、②、③、④</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>VAR_upload_file_2</p></td>
<td><p>Random from File ②、④</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>VAR_upload_file_3</p></td>
<td><p>File ① is Target</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>VAR_upload_file_4</p></td>
<td><p>File ④ is Target</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="target-file-contents-when-file-is-deleted">
<h4>Target file contents when File is deleted.<a class="headerlink" href="#target-file-contents-when-file-is-deleted" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This section contains Collect target file specification examples for deleting File upload items.</div>
<div class="line">Files being deleted must have the Target variable name's value be blank.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id45">
<div class="code-block-caption"><span class="caption-number">リスト 5.51 </span><span class="caption-text">Collect target file's File path and Directory structure when deleting File upload item</span><a class="headerlink" href="#id45" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>【Upper<span class="w"> </span>directory】
<span class="w">   </span><span class="p">|</span>-<span class="w">  </span>_parameters
<span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost
<span class="w">   </span><span class="p">|</span><span class="w">       </span><span class="p">|</span>-<span class="w">  </span>SAMPLE.yml<span class="w">   </span>※Source<span class="w"> </span>file
<span class="w">   </span><span class="p">|</span>-<span class="w">  </span>_parameters_file
<span class="w">   </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>-<span class="w">  </span>localhost

<span class="w"> </span>■Collect<span class="w"> </span>target<span class="w"> </span>file<span class="w"> </span>name:<span class="w"> </span>SAMPLE.yml
<span class="w"> </span>■File<span class="w"> </span>contents
<span class="w"> </span>VAR_upload_file:<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">         </span>※Upload<span class="w"> </span>target<span class="w"> </span>file
</pre></div>
</div>
</div>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="ansible_legacyrole.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">4. </span>Ansible-LegacyRole</a></li>
    <li class="next"><a href="../terraform_driver/index.html" title="次のトピックへ"><span>次のトピックへ</span>Terraform Driver</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>