<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>2. OASE management &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fe63c2af" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="3. OASE" href="oase.html" />
    <link rel="prev" title="1. OASE common" href="oase_common.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/oase/oase_management.html" selected>current</option>
              <option value="../../../../ja/2.5/manuals/oase/oase_management.html" selected>2.5(current)</option>
              <option value="../../../../ja/2.4/manuals/oase/oase_management.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/oase/oase_management.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/oase/oase_management.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/oase/oase_management.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/oase/oase_management.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/oase/oase_management.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/oase/oase_management.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="oase_common.html" title="前のトピックへ"><span class="section-number">1. </span>OASE common</a></li>
        <li class="next"><a href="oase.html" title="次のトピックへ"><span class="section-number">3. </span>OASE</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learn/index.html">Learn</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manuals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ansible-driver/index.html">Ansible Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../terraform_driver/index.html">Terraform Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">OASE</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="oase_common.html">1. OASE common</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2. OASE management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">2.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#menu-structure">2.2. Menu structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menu-list">2.2.1. Menu list</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#agent-overview">2.3. Agent overview</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#agent">2.3.1. Agent</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use-the-agent">2.4. How to use the Agent</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#workflow">2.4.1. Workflow</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#notification-template-common-overview">2.5. Notification template (common) overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-use-notification-template-common">2.6. How to use Notification template (common)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#function-menu-operation">2.7. Function menu operation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menus">2.7.1. Menus</a></li>
<li class="toctree-l5"><a class="reference internal" href="#event-collection">2.7.2. Event collection</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notification-template-common">2.7.3. Notification template (common)</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">2.8. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#oase-agent-operation-flow-and-env-setting-values">2.8.1. OASE Agent operation flow and &quot;.env&quot; setting Values</a></li>
<li class="toctree-l5"><a class="reference internal" href="#instant-event-collection-settings-display">2.8.2. Instant event collection settings display</a></li>
<li class="toctree-l5"><a class="reference internal" href="#agent-decoding-process">2.8.3. Agent decoding process</a></li>
<li class="toctree-l5"><a class="reference internal" href="#response-key-and-event-id-key">2.8.4. Response key and Event ID key</a></li>
<li class="toctree-l5"><a class="reference internal" href="#agent-examples-for-the-different-monitoring-softwares">2.8.5. Agent examples for the different monitoring softwares</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="oase.html">3. OASE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">2. OASE management</a><ul>
<li><a class="reference internal" href="#introduction">2.1. Introduction</a></li>
<li><a class="reference internal" href="#menu-structure">2.2. Menu structure</a><ul>
<li><a class="reference internal" href="#menu-list">2.2.1. Menu list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#agent-overview">2.3. Agent overview</a><ul>
<li><a class="reference internal" href="#agent">2.3.1. Agent</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-use-the-agent">2.4. How to use the Agent</a><ul>
<li><a class="reference internal" href="#workflow">2.4.1. Workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notification-template-common-overview">2.5. Notification template (common) overview</a></li>
<li><a class="reference internal" href="#how-to-use-notification-template-common">2.6. How to use Notification template (common)</a></li>
<li><a class="reference internal" href="#function-menu-operation">2.7. Function menu operation</a><ul>
<li><a class="reference internal" href="#menus">2.7.1. Menus</a></li>
<li><a class="reference internal" href="#event-collection">2.7.2. Event collection</a></li>
<li><a class="reference internal" href="#notification-template-common">2.7.3. Notification template (common)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">2.8. Appendix</a><ul>
<li><a class="reference internal" href="#oase-agent-operation-flow-and-env-setting-values">2.8.1. OASE Agent operation flow and &quot;.env&quot; setting Values</a></li>
<li><a class="reference internal" href="#instant-event-collection-settings-display">2.8.2. Instant event collection settings display</a></li>
<li><a class="reference internal" href="#agent-decoding-process">2.8.3. Agent decoding process</a><ul>
<li><a class="reference internal" href="#confirmed-supported-character-codes">Confirmed supported character codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#response-key-and-event-id-key">2.8.4. Response key and Event ID key</a><ul>
<li><a class="reference internal" href="#response-key">Response key</a></li>
<li><a class="reference internal" href="#jmespath">JMESPath</a></li>
<li><a class="reference internal" href="#response-list-flag">Response list flag</a></li>
<li><a class="reference internal" href="#event-id-key">Event ID key</a></li>
</ul>
</li>
<li><a class="reference internal" href="#agent-examples-for-the-different-monitoring-softwares">2.8.5. Agent examples for the different monitoring softwares</a><ul>
<li><a class="reference internal" href="#zabbix">Zabbix</a></li>
<li><a class="reference internal" href="#grafan">Grafan</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">Manuals</a></li>
    <li><a href="index.html">OASE</a></li>
    
    <li><span class="section-number">2. </span>OASE management</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="oase-management">
<h1><span class="section-number">2. </span>OASE management<a class="headerlink" href="#oase-management" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">2.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explain the OASE management function and how to use it.</div>
</div>
</section>
<section id="menu-structure">
<h2><span class="section-number">2.2. </span>Menu structure<a class="headerlink" href="#menu-structure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the OASE management menu structure.</div>
</div>
<section id="menu-list">
<h3><span class="section-number">2.2.1. </span>Menu list<a class="headerlink" href="#menu-list" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The OASE management menu list are as following.</div>
</div>
<table class="docutils align-left" id="id5">
<caption><span class="caption-number">表 2.72 </span><span class="caption-text">OASE management menu list</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 10.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>No</strong></p></th>
<th class="head"><p><strong>Menu group</strong></p></th>
<th class="head"><p><strong>Menu</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td rowspan="2"><p>OASE management</p></td>
<td><p>Event collection</p></td>
<td><p>Manages event collection target information.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Notification template (common)</p></td>
<td><p>Manages information used by the OASE notification function.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="agent-overview">
<span id="agent-about"></span><h2><span class="section-number">2.3. </span>Agent overview<a class="headerlink" href="#agent-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Exastro OASE Agent.</div>
</div>
<section id="agent">
<h3><span class="section-number">2.3.1. </span>Agent<a class="headerlink" href="#agent" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Agent is independent from Exastro IT Automation (hereinafter written as ITA) and functions as a middleman between OASE and external services.</div>
<div class="line">The Agent collects Event collection settings for external services from ITA and uses them to gather events from the external services. After that, the Agent will send the events to ITA.</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/agent_overview_v2-4.png"><img alt="OASE Agent overview" src="../../_images/agent_overview_v2-4.png" style="width: 800px;" />
</a>
</figure>
</section>
</section>
<section id="how-to-use-the-agent">
<h2><span class="section-number">2.4. </span>How to use the Agent<a class="headerlink" href="#how-to-use-the-agent" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to use the Exastro OASE Agent.</div>
</div>
<section id="workflow">
<h3><span class="section-number">2.4.1. </span>Workflow<a class="headerlink" href="#workflow" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">A standard OASE workflow can be seen below (including using the Agent).</div>
<div class="line">See the following sections for more detailed information regarding each of the steps.</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/oase_process_v2-3.png"><img alt="OASE workflow" src="../../_images/oase_process_v2-3.png" style="width: 700px;" />
</a>
</figure>
<ul>
<li><p><strong>Workflow details and references</strong></p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Configure Event collection settings</strong></div>
<div class="line">In the OASE management's Event collection menu, register settings related to the Event collection target services.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Configure labels</strong></div>
<div class="line">In the OASE Label creation/Labeling menu, configure settings for labeling events OASE.</div>
<div class="line">For more information, see <a class="reference internal" href="oase.html#label-creation"><span class="std std-ref">Create label</span></a> and <a class="reference internal" href="oase.html#labeling"><span class="std std-ref">Labeling</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Install and start the Agent</strong></div>
<div class="line">Start the Agent and collect Events.</div>
<div class="line">For more information, see <a class="reference internal" href="../../installation/online/oase_agent/docker_compose.html#oase-agent-docker-compose-install"><span class="std std-ref">Installation guide (Docker Compose)</span></a>.</div>
<div class="line">For more information, see <a class="reference internal" href="../../installation/online/oase_agent/kubernetes.html#oase-agent-kubernetes-install"><span class="std std-ref">Installation guide (Kubernetes)</span></a>.</div>
</div>
</li>
</ol>
</li>
</ul>
</section>
</section>
<section id="notification-template-common-overview">
<h2><span class="section-number">2.5. </span>Notification template (common) overview<a class="headerlink" href="#notification-template-common-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">The following figure illustrates the OASE notification function.</div>
</div>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="../../_images/notification_template_overview.png"><img alt="Notification template (common) overview" src="../../_images/notification_template_overview.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.72 </span><span class="caption-text">Notification template (common) overview</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-use-notification-template-common">
<h2><span class="section-number">2.6. </span>How to use Notification template (common)<a class="headerlink" href="#how-to-use-notification-template-common" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">A standard workflow containing operations needed to use the OASE Notification function can be seen below.</div>
<div class="line">See the following sections for more detailed information regarding each of the steps.</div>
</div>
<figure class="align-default" id="id7">
<a class="reference internal image-reference" href="../../_images/notification_template_process.png"><img alt="Notification template (common) workflow" src="../../_images/notification_template_process.png" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.73 </span><span class="caption-text">Notification template (common) workflow</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ul>
<li><p><strong>Workflow details and references</strong></p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Maintaining (View/Edit)Notification template (common)</strong></div>
<div class="line">From the OASE Management's Notification template (common) menu, users can maintain (view/edit) templates used by the OASE Notification function.</div>
<div class="line">For more information, see <a class="reference internal" href="#notification-template-common"><span class="std std-ref">Notification template (common)</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Registering Notification settings</strong></div>
<div class="line">Log in to the Exastro system as the Organization administrator and register notification settings from the <span class="menuselection">Notification management</span> menu.</div>
<div class="line">For more information, see <a class="reference internal" href="../organization_management/notification.html#id1"><span class="std std-ref">Registering Notification destination settings</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Configure Mail server(only for cases where the notification destination is set to a mail address).</strong></div>
<div class="line">Log in to the Exastro system as the Organization administrator and register mail server settings from the  <span class="menuselection">Mail server settings</span> menu.</div>
<div class="line">For more information, see <a class="reference internal" href="../organization_management/mailserver_settings.html#email-sending-server-settings"><span class="std std-ref">Mail server settings</span></a>.</div>
</div>
</li>
</ol>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">The Notification template (common) can be used without changing it.</div>
</div>
</div>
</section>
<section id="function-menu-operation">
<h2><span class="section-number">2.7. </span>Function menu operation<a class="headerlink" href="#function-menu-operation" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to operate the OASE Management function menus.</div>
</div>
<section id="menus">
<h3><span class="section-number">2.7.1. </span>Menus<a class="headerlink" href="#menus" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This chapter explains how to operate the menus displayed when OASE management is installed.</div>
</div>
</section>
<section id="event-collection">
<span id="id1"></span><h3><span class="section-number">2.7.2. </span>Event collection<a class="headerlink" href="#event-collection" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">In <span class="menuselection">OASE management ▶ Event collection</span>, users can maintain (view/register/edit/discard) TIL, connection methods, authentication methods, event collection targets, etc.</div>
</div>
</li>
</ol>
<figure class="align-default" id="id8">
<a class="reference internal image-reference" href="../../_images/agent_menu.png"><img alt="Submenu (Event collection)" src="../../_images/agent_menu.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.74 </span><span class="caption-text">Submenu (Event collection)</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The Event collection※1 page's input items are as following.</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">※1 Configurations for Event collection targets</div>
</div>
<div class="line-block">
<div class="line">※2 The required combinations for Connection methods, Authentication information and Request methods are as following.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Connection method</p></th>
<th class="head"><p>Request method</p></th>
<th class="head"><p>Authenticatio information</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IMAP password authentication</p></td>
<td><p>・IMAP: Plaintext</p></td>
<td><div class="line-block">
<div class="line">・Username</div>
<div class="line">・Password</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Bearer authentication</p></td>
<td><div class="line-block">
<div class="line">・GET</div>
<div class="line">・POST</div>
</div>
</td>
<td><p>・Authentication token</p></td>
</tr>
<tr class="row-even"><td><p>Password authentication</p></td>
<td><div class="line-block">
<div class="line">・GET</div>
<div class="line">・POST</div>
</div>
</td>
<td><div class="line-block">
<div class="line">・Username</div>
<div class="line">・Password</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Free authentication</p></td>
<td><div class="line-block">
<div class="line">・GET</div>
<div class="line">・POST</div>
</div>
</td>
<td><p>・Input to Parameter</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">※3 For more information regarding Response keys, Response list flags and Event ID keys, see <a class="reference internal" href="#oase-agent-respons-key-enevnt-id-key"><span class="std std-ref">Response key and Event ID keyキー</span></a>.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If the collection destination is a mail, there might be cases where the collection events might be saved without characters that could not be decoded depending on the charachter code type.</div>
<div class="line">For more information, see <a class="reference internal" href="#about-decode"><span class="std std-ref">Agent decoding process</span></a>.</div>
</div>
</div>
</section>
<section id="notification-template-common">
<span id="id2"></span><h3><span class="section-number">2.7.3. </span>Notification template (common)<a class="headerlink" href="#notification-template-common" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">In the <span class="menuselection">OASE management ▶ Notification template (common)</span> menu, the user can maintain (view/update) template used by the OASE notification function.</div>
</div>
</li>
</ol>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../../_images/notification_template_menu.png"><img alt="Submenu (Notification template (common) )" src="../../_images/notification_template_menu.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.75 </span><span class="caption-text">Submenu (Notification template (common) )</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The items found in the Notification template (common) page are as following.</div>
</div>
</li>
</ol>
<table class="docutils align-left">
<colgroup>
<col style="width: 9.1%" />
<col style="width: 54.5%" />
<col style="width: 9.1%" />
<col style="width: 9.1%" />
<col style="width: 18.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Template</p></td>
<td><div class="line-block">
<div class="line">Allows the user to edit the Notification template. The types are the following 4.</div>
<div class="line">・New.j2</div>
<div class="line">・Known(evaluated).j2</div>
<div class="line">・Known(timeout).j2</div>
<div class="line">・Undetected.j2</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>Manual</p></td>
<td><p>Maximum size 2MB</p></td>
</tr>
<tr class="row-odd"><td><p>Remarks</p></td>
<td><p>Free description field.</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>Maximum length 4000 bytes</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The template's default values are as following.</div>
</div>
<div class="literal-block-wrapper docutils container" id="new-j2">
<div class="code-block-caption"><span class="caption-number">リスト 2.49 </span><span class="caption-text">New.j2</span><a class="headerlink" href="#new-j2" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> [TITLE]
<span class="linenos"> 2</span> A new event has occured.
<span class="linenos"> 3</span>
<span class="linenos"> 4</span> [BODY]
<span class="linenos"> 5</span> Detailed information
<span class="linenos"> 6</span> 　Event ID                 : {{ _id }}
<span class="linenos"> 7</span> 　Event collection settings: {{ labels._exastro_event_collection_settings_id }}
<span class="linenos"> 8</span> 　Event fetch time         : {{ labels._exastro_fetched_time }}
<span class="linenos"> 9</span> 　Event end time           : {{ labels._exastro_end_time }}
<span class="linenos">10</span> 　Event type               : {{ labels._exastro_type }}
<span class="linenos">11</span>
<span class="linenos">12</span> 　Re-evaluation
<span class="linenos">13</span> 　　Evaluation rule name   : {{ labels._exastro_rule_name }}
<span class="linenos">14</span> 　　Event                  : {{ exastro_events }}
<span class="linenos">15</span>
<span class="linenos">16</span> 　Label:
<span class="linenos">17</span> 　  {% for key, value in labels.items() %}
<span class="linenos">18</span> 　　・{{ key }}: {{ value }}
<span class="linenos">19</span> 　　{% endfor %}
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="known-evaluated-j2">
<div class="code-block-caption"><span class="caption-number">リスト 2.50 </span><span class="caption-text">Known(evaluated).j2</span><a class="headerlink" href="#known-evaluated-j2" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> [TITLE]
<span class="linenos"> 2</span> A known(evaluated) event has occured.
<span class="linenos"> 3</span>
<span class="linenos"> 4</span> [BODY]
<span class="linenos"> 5</span> Detailed information
<span class="linenos"> 6</span> 　Event ID                 : {{ _id }}
<span class="linenos"> 7</span> 　Event collection settings: {{ labels._exastro_event_collection_settings_id }}
<span class="linenos"> 8</span> 　Event fetch time         : {{ labels._exastro_fetched_time }}
<span class="linenos"> 9</span> 　Event end time           : {{ labels._exastro_end_time }}
<span class="linenos">10</span> 　Event type               : {{ labels._exastro_type }}
<span class="linenos">11</span>
<span class="linenos">12</span> 　Re-evaluation
<span class="linenos">13</span> 　　Evaluation rule name   : {{ labels._exastro_rule_name }}
<span class="linenos">14</span> 　　Event                  : {{ exastro_events }}
<span class="linenos">15</span>
<span class="linenos">16</span> 　Label:
<span class="linenos">17</span> 　  {% for key, value in labels.items() %}
<span class="linenos">18</span> 　　・{{ key }}: {{ value }}
<span class="linenos">19</span> 　　{% endfor %}
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="known-timeout-j2">
<div class="code-block-caption"><span class="caption-number">リスト 2.51 </span><span class="caption-text">Known(timeout).j2</span><a class="headerlink" href="#known-timeout-j2" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> [TITLE]
<span class="linenos"> 2</span> A known(timeout) event has occured.
<span class="linenos"> 3</span>
<span class="linenos"> 4</span> [BODY]
<span class="linenos"> 5</span> Detailed information
<span class="linenos"> 6</span> 　Event ID                 : {{ _id }}
<span class="linenos"> 7</span> 　Event collection settings: {{ labels._exastro_event_collection_settings_id }}
<span class="linenos"> 8</span> 　Event fetch time         : {{ labels._exastro_fetched_time }}
<span class="linenos"> 9</span> 　Event end time           : {{ labels._exastro_end_time }}
<span class="linenos">10</span> 　Event type               : {{ labels._exastro_type }}
<span class="linenos">11</span>
<span class="linenos">12</span> 　Re-evaluation
<span class="linenos">13</span> 　　Evaluation rule name   : {{ labels._exastro_rule_name }}
<span class="linenos">14</span> 　　Event                  : {{ exastro_events }}
<span class="linenos">15</span>
<span class="linenos">16</span> 　Label:
<span class="linenos">17</span> 　  {% for key, value in labels.items() %}
<span class="linenos">18</span> 　　・{{ key }}: {{ value }}
<span class="linenos">19</span> 　　{% endfor %}
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="undetected-j2">
<div class="code-block-caption"><span class="caption-number">リスト 2.52 </span><span class="caption-text">Undetected.j2</span><a class="headerlink" href="#undetected-j2" title="Link to this code">¶</a></div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> [TITLE]
<span class="linenos"> 2</span> An unknown event has occured.
<span class="linenos"> 3</span>
<span class="linenos"> 4</span> [BODY]
<span class="linenos"> 5</span> Detailed information
<span class="linenos"> 6</span> 　Event ID                 : {{ _id }}
<span class="linenos"> 7</span> 　Event collection settings: {{ labels._exastro_event_collection_settings_id }}
<span class="linenos"> 8</span> 　Event fetch time         : {{ labels._exastro_fetched_time }}
<span class="linenos"> 9</span> 　Event end time           : {{ labels._exastro_end_time }}
<span class="linenos">10</span> 　Event type               : {{ labels._exastro_type }}
<span class="linenos">11</span>
<span class="linenos">12</span> 　Re-evaluation
<span class="linenos">13</span> 　　Evaluation rule name   : {{ labels._exastro_rule_name }}
<span class="linenos">14</span> 　　Event                  : {{ exastro_events }}
<span class="linenos">15</span>
<span class="linenos">16</span> 　Label:
<span class="linenos">17</span> 　  {% for key, value in labels.items() %}
<span class="linenos">18</span> 　　・{{ key }}: {{ value }}
<span class="linenos">19</span> 　　{% endfor %}
</pre></div>
</div>
</div>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">2.8. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="oase-agent-operation-flow-and-env-setting-values">
<span id="oase-agent-flow"></span><h3><span class="section-number">2.8.1. </span>OASE Agent operation flow and &quot;.env&quot; setting Values<a class="headerlink" href="#oase-agent-operation-flow-and-env-setting-values" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains the following.</div>
<div class="line">- OASE Agent's operation flow</div>
<div class="line">- Parts of the .env file's setting values when OASE Agent is installed.</div>
</div>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../../_images/agent_detailed_flow_v2-4.png"><img alt="OASE Agent flow diagram" src="../../_images/agent_detailed_flow_v2-4.png" style="width: 1000px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.76 </span><span class="caption-text">OASE Agent flow diagram</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 41.7%" />
<col style="width: 58.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AGENT_NAME</p></td>
<td><p>Used as the database file name and the name of the OASE Agent.</p></td>
</tr>
<tr class="row-odd"><td><p>EXASTRO_URL</p></td>
<td><p>Used as the request destination when API requests are sent to ITA.</p></td>
</tr>
<tr class="row-even"><td><p>EXASTRO_ORGANIZATION_ID</p></td>
<td><p>Used to distinguish Organizations when API requests are sent to ITA.</p></td>
</tr>
<tr class="row-odd"><td><p>EXASTRO_WORKSPACE_ID</p></td>
<td><div class="line-block">
<div class="line">Used to distinguish Workspaces when API requests are sent to ITA.</div>
<div class="line">The specified workspace must be linked to the organization specified to EXASTRO_ORGANIZATION_ID.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>EXASTRO_REFRESH_TOKEN</p></td>
<td><div class="line-block">
<div class="line">Used as a authentication token for Bearer authentication when API requesting to ITA.</div>
<div class="line">※The user's role must be able to edit the OASE - Event - Event history menu.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>EXASTRO_USERNAME</p></td>
<td><div class="line-block">
<div class="line">Used as the Basic authentication username when API requests are sent to ITA.</div>
<div class="line">※The user's role must be able to edit the OASE - Event - Event history menu.</div>
<div class="line">※If not using EXASTRO_REFRESH_TOKEN (Not recommended)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>EXASTRO_PASSWORD</p></td>
<td><div class="line-block">
<div class="line">Used as the Basic authentication password when API requests are sent to ITA.</div>
<div class="line">※If not using EXASTRO_REFRESH_TOKEN (Not recommended)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>EVENT_COLLECTION_SETTINGS_NAMES</p></td>
<td><p>The values set to this parameter fetches event collection settings from ITA and generates a setting file.</p></td>
</tr>
<tr class="row-even"><td><p>ITERATION</p></td>
<td><p>The number of how many the processes depicted with green arrows in the figure above will loop.</p></td>
</tr>
<tr class="row-odd"><td><p>EXECUTE_INTERVAL</p></td>
<td><p>The interval time for the processes depicted with green arrows in the figure above.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="instant-event-collection-settings-display">
<h3><span class="section-number">2.8.2. </span>Instant event collection settings display<a class="headerlink" href="#instant-event-collection-settings-display" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains how to instantly display the event collection settings when they are changed.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Start the OASE Agent bash shell.</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;OASE<span class="w"> </span>Agent<span class="w"> </span>container<span class="w"> </span>name&gt;<span class="w"> </span>bash
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Delete the setting file &quot;event_collection_settings.json&quot; within /tmp.</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>/tmp/event_collection_settings.json
</pre></div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">If the OASE Agent has no event_collection_settings.json setting file, fetch the Event collection settings from ITA and create a setting file.</div>
<div class="line">The user can instantly have the settings take affect by deleting the settings file.</div>
<div class="line">※If the users are not willing to delete the settings file, the user will have to wait until the proccess loops the amount of times specified by &quot;ITERATION&quot; from the <a class="reference internal" href="#oase-agent-flow"><span class="std std-ref">previous chapter</span></a>.</div>
</div>
</div>
</section>
<section id="agent-decoding-process">
<span id="about-decode"></span><h3><span class="section-number">2.8.3. </span>Agent decoding process<a class="headerlink" href="#agent-decoding-process" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">When Collection destination is set to Mail, information regarding the Agent's decoding proccess for the Collected events  can be seen below.</div>
</div>
<section id="confirmed-supported-character-codes">
<h4>Confirmed supported character codes<a class="headerlink" href="#confirmed-supported-character-codes" title="Link to this heading">¶</a></h4>
<table class="docutils align-left" id="id11">
<caption><span class="caption-number">表 2.73 </span><span class="caption-text">Confirmed supported character codes</span><a class="headerlink" href="#id11" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 14.3%" />
<col style="width: 14.3%" />
<col style="width: 28.6%" />
<col style="width: 42.9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p><strong>Transmission method</strong></p></th>
<th class="head" colspan="2"><p><strong>Mail Header</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p><strong>Frormat</strong></p></th>
<th class="head"><p><strong>Language</strong></p></th>
<th class="head"><p><strong>Content-Transfer-Encoding</strong></p></th>
<th class="head"><p><strong>Content-Type</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>plaintext</p></td>
<td><p>English</p></td>
<td><p>7bit</p></td>
<td><p>text/plain; charset=US-ASCII</p></td>
</tr>
<tr class="row-even"><td><p>plaintext</p></td>
<td><p>Japanese</p></td>
<td><p>8bit</p></td>
<td><p>text/plain; charset=UTF-8</p></td>
</tr>
<tr class="row-odd"><td><p>plaintext</p></td>
<td><p>English</p></td>
<td><p>8bit</p></td>
<td><p>text/plain; charset=&quot;ANSI_X3.4-1968&quot;</p></td>
</tr>
<tr class="row-even"><td><p>html</p></td>
<td><p>English</p></td>
<td><p>・plaintext: 7bit</p>
<p>・html: quoted-printable</p>
</td>
<td><p>multipart/alternative</p>
<p>・plaintext: text/plain; charset=US-ASCII</p>
<p>・html: text/html; charset=UTF-8</p>
</td>
</tr>
<tr class="row-odd"><td><p>html</p></td>
<td><p>Japanese</p></td>
<td><p>・plaintext: 8bit</p>
<p>・html: quoted-printable</p>
</td>
<td><p>multipart/alternative</p>
<p>・plaintext: text/plain; charset=UTF-8</p>
<p>・html: text/html; charset=UTF-8</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The following is an example decpicts saved collection events with undecodable characters excluded.</div>
</div>
<dl>
<dt>Sending mail</dt><dd><div class="line-block">
<div class="line">Format：plaintext</div>
<div class="line">Content-Transfer-Encoding：8bit</div>
<div class="line">Content-Type：text/plain; charset=&quot;ANSI_X3.4-1968&quot;</div>
<div class="line">Subject：Failure</div>
<div class="line">Contents：Failure：Server01\r\n</div>
</div>
</dd>
<dt>When seen on ITA</dt><dd><div class="line-block">
<div class="line">Subject：Failure</div>
<div class="line">Contents：Server01\r\n</div>
</div>
</dd>
</dl>
<figure class="align-default" id="id12">
<a class="reference internal image-reference" href="../../_images/decode_failed.png"><img alt="Collecting events without undecodable characters example/results (Event flow)" src="../../_images/decode_failed.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 2.77 </span><span class="caption-text">Collecting events without undecodable characters example/results (Event flow)</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
<div class="legend">
</div>
</figcaption>
</figure>
</section>
</section>
<section id="response-key-and-event-id-key">
<span id="oase-agent-respons-key-enevnt-id-key"></span><h3><span class="section-number">2.8.4. </span>Response key and Event ID key<a class="headerlink" href="#response-key-and-event-id-key" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains the following.</div>
</div>
<div class="line-block">
<div class="line">・ <em class="dfn">Response key</em></div>
<div class="line">・ <em class="dfn">JMESPath</em></div>
<div class="line">・ <em class="dfn">Response list flag</em></div>
<div class="line">・ <em class="dfn">Event ID key</em></div>
</div>
<section id="response-key">
<h4>Response key<a class="headerlink" href="#response-key" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line"><em class="dfn">Response keys</em> are keys that filters events from the response payload.</div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">・Monitoring softwares have functions to fetch alerts and metrics (statuses) from the monitored machine through HTTP API,</div>
<div class="line">・The Agent uses the HTTP API to fetch the alerts and metrics.</div>
<div class="line">・However, the response payloads returned by the monitoring softwares can only be used by the Agent if they are in JSON format.</div>
</div>
</div>
<div class="line-block">
<div class="line">Items that can be specified as <em class="dfn">Response key</em> are:</div>
</div>
<div class="line-block">
<div class="line">　・Response payloads that stores items handled as Events in child elements.</div>
<div class="line">　・Child elements stored in array if there are multiple items that are handled as Events.</div>
</div>
<div class="line-block">
<div class="line"><em class="dfn">Response key</em> is specified in <em class="dfn">JMESPath format</em>.</div>
<div class="line">For more information regarding <em class="dfn">JMESPath format</em>, see the next section.</div>
</div>
</section>
<section id="jmespath">
<h4>JMESPath<a class="headerlink" href="#jmespath" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line"><em class="dfn">JMESPath</em> is a query language for JSON targets.</div>
<div class="line">Values corresponding to the specified <em class="dfn">JMESPath</em> are filtered from the JSON.</div>
<div class="line">The path is specified in a format where the JSON key is combined with periods (&quot;.&quot;).</div>
<div class="line">If the JSON key values are in an array, put &quot;[]&quot; at the end of the JSON key.</div>
<div class="line">　Example) The <strong class="program">Parent</strong> value is an array and the array's child element key, <strong class="program">children</strong>, is filtered.</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parent</span><span class="p">[]</span><span class="o">.</span><span class="n">children</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">　Specify the line above.</div>
</div>
<div class="line-block">
<div class="line">The following example uses the Sample response from the following URL to explain specifying JMESPaths.</div>
<div class="line">Azure RESET-API <cite>Get Metric for data &lt;https://learn.microsoft.com/ja-jp/rest/api/monitor/metrics/list?view=rest-monitor-2023-10-01&amp;tabs=HTTP&gt;</cite>.</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;cost&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">598</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;timespan&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-04-20T09:00:00Z/2021-04-20T14:00:00Z&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nt">&quot;interval&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PT1H&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="p">{</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/subscriptions/1f3･･･c38/･･･/metrics/BlobCount&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Microsoft.Insights/metrics&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">10</span><span class="w">        </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BlobCount&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">        </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Blob Count&quot;</span>
<span class="linenos">12</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">13</span><span class="w">      </span><span class="nt">&quot;displayDescription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The number of blob objects stored in the storage account.&quot;</span><span class="p">,</span>
<span class="linenos">14</span><span class="w">      </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Count&quot;</span><span class="p">,</span>
<span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;timeseries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">16</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">17</span><span class="w">          </span><span class="nt">&quot;metadatavalues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">18</span><span class="w">            </span><span class="p">{</span>
<span class="linenos">19</span><span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="linenos">21</span><span class="w">                </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="linenos">22</span><span class="w">              </span><span class="p">},</span>
<span class="linenos">23</span><span class="w">              </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hot&quot;</span>
<span class="linenos">24</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">25</span><span class="w">          </span><span class="p">]</span>
<span class="linenos">26</span><span class="w">        </span><span class="p">},</span>
<span class="linenos">27</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">28</span><span class="w">          </span><span class="nt">&quot;metadatavalues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">29</span><span class="w">            </span><span class="p">{</span>
<span class="linenos">30</span><span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">31</span><span class="w">                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="linenos">32</span><span class="w">                </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="linenos">33</span><span class="w">              </span><span class="p">},</span>
<span class="linenos">34</span><span class="w">              </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Standard&quot;</span>
<span class="linenos">35</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">36</span><span class="w">          </span><span class="p">]</span>
<span class="linenos">37</span><span class="w">        </span><span class="p">},</span>
<span class="linenos">38</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">39</span><span class="w">          </span><span class="nt">&quot;metadatavalues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">40</span><span class="w">            </span><span class="p">{</span>
<span class="linenos">41</span><span class="w">              </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">42</span><span class="w">                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="linenos">43</span><span class="w">                </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="linenos">44</span><span class="w">              </span><span class="p">},</span>
<span class="linenos">45</span><span class="w">              </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cool&quot;</span>
<span class="linenos">46</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">47</span><span class="w">          </span><span class="p">]</span>
<span class="linenos">48</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">49</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">50</span><span class="w">      </span><span class="nt">&quot;errorCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success&quot;</span>
<span class="linenos">51</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">52</span><span class="w">  </span><span class="p">],</span>
<span class="linenos">53</span><span class="w">  </span><span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;microsoft.storage/storageaccounts/blobservices&quot;</span><span class="p">,</span>
<span class="linenos">54</span><span class="w">  </span><span class="nt">&quot;resourceregion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;westus2&quot;</span>
<span class="linenos">55</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">For more information regarding <em class="dfn">JMESPath</em>, see the JMESPath  Tutorial <a class="reference external" href="https://JMESPath.org/tutorial.html">https://JMESPath.org/tutorial.html</a>.</div>
<div class="line">We also recommend that the user tries out JMESPath Try it Out! <a class="reference external" href="https://JMESPath.org/">https://JMESPath.org/</a> where they can try out the JSON above.</div>
</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">JMESPath fetching array values</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">For the JSON above, specifying the following for the <em class="dfn">JMESPath</em> fetching the :program:<a href="#id3"><span class="problematic" id="id4">`</span></a>value`(array) from the 5th line</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">value</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">will fetch the following results.</div>
<div class="line">(The line <strong class="program">&quot;//&quot; : &quot;･･･Sample Response line 14 ～line 49 shortened･･･&quot;</strong> is an comment and have no effect on the results.)</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/subscriptions/1f3･･･c38/･･･/metrics/BlobCount&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Microsoft.Insights/metrics&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BlobCount&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Blob Count&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;displayDescription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The number of blob objects stored in the storage account.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;//&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;･･･Sample Response line 14 ～line 49 shortened･･･&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;errorCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line">JMESPath fetching objects</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">For the JSON above, specifying the following for the <em class="dfn">JMESPath</em> fetching the <strong class="program">value</strong> (array)'s <strong class="program">name</strong> value</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">value</span><span class="p">[]</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">will fetch the following results.</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BlobCount&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Blob Count&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><div class="line-block">
<div class="line">JMESPath fetching multiple values from deep hierarchies</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">Specifying the following for the <em class="dfn">JMESPath</em> fetching the <strong class="program">value</strong> (array)'s <strong class="program">timeseries</strong> (array)'s  <strong class="program">metadatavalues</strong> (array)'s' <strong class="program">name</strong></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">value</span><span class="p">[]</span><span class="o">.</span><span class="n">timeseries</span><span class="p">[]</span><span class="o">.</span><span class="n">metadatavalues</span><span class="p">[]</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">will fetch the following results.</div>
<div class="line-block">
<div class="line">(The line <strong class="program">&quot;//&quot; : &quot; lines xx metadatavalues.name&quot;</strong>  is an comment and have no effect on the results.)</div>
</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">  </span><span class="nt">&quot;//&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Line 19 metadatavalues.name&quot;</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;//&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Line 30 metadatavalues.name&quot;</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;//&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Line 41 metadatavalues.name&quot;</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="response-list-flag">
<h4>Response list flag<a class="headerlink" href="#response-list-flag" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line"><em class="dfn">Response list flag</em> specifies whether the events filtered by the <em class="dfn">Response key</em> are stored in arrays or not.</div>
<div class="line">・<strong class="program">True</strong>  ： For when the events filtered by the <em class="dfn">Response key</em> are stored in arrays</div>
<div class="line">　　　　　　For cases like No 1. where JMESPath is used to fetch array values or for cases like No 3. where it is used to fetch multiple values from deep hierarchies.</div>
<div class="line">・<strong class="program">False</strong> ： For when the events filtered by the <em class="dfn">Response key</em> are not stored in arrays (but in values and/or objects with child components</div>
<div class="line">　　　　　　For cases like No 2. where the JMESPath is used to fetch objects.</div>
</div>
</section>
<section id="event-id-key">
<h4>Event ID key<a class="headerlink" href="#event-id-key" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line"><em class="dfn">Inventory ID key</em> specifies keys used to fetch values that distinguishes events filtered by the <em class="dfn">Response key</em>.</div>
<div class="line">The <em class="dfn">Event ID key</em> specifies a key existing in the results filtered by <em class="dfn">Response key</em>.</div>
</div>
<div class="line-block">
<div class="line"><em class="dfn">Event ID key</em> is also specified in <em class="dfn">JMESPath format</em>.</div>
<div class="line">If the <em class="dfn">Response key</em> and <em class="dfn">Response list flag</em> has the following specified for the Azure RESET-API's JSON above.</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Setting value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Response key</p></td>
<td><p><strong class="program">value</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Response list flag</p></td>
<td><p><strong class="program">True</strong></p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The values filtered by <em class="dfn">Response key</em> are as following</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">[</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="p">{</span>
<span class="linenos"> 3</span><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/subscriptions/1f3･･･c38/･･･/metrics/BlobCount&quot;</span><span class="p">,</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Microsoft.Insights/metrics&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BlobCount&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Blob Count&quot;</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="p">},</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nt">&quot;displayDescription&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The number of blob objects stored in the storage account.&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">&quot;unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Count&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">    </span><span class="nt">&quot;timeseries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">12</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">13</span><span class="w">        </span><span class="nt">&quot;metadatavalues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">14</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">15</span><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">              </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">              </span><span class="nt">&quot;localizedValue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tier&quot;</span>
<span class="linenos">18</span><span class="w">            </span><span class="p">},</span>
<span class="linenos">19</span><span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hot&quot;</span>
<span class="linenos">20</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">21</span><span class="w">        </span><span class="p">]</span>
<span class="linenos">22</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">23</span><span class="w">      </span><span class="nt">&quot;//&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;･･･ (metadatavalues are repeated and shortened) ･･･&quot;</span>
<span class="linenos">24</span><span class="w">    </span><span class="p">],</span>
<span class="linenos">25</span><span class="w">    </span><span class="nt">&quot;errorCode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Success&quot;</span>
<span class="linenos">26</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">27</span><span class="p">]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">From these results, the Event type values will have <strong class="program">id</strong> values applied,</div>
<div class="line">meaning that the <span class="menuselection">OASE management ▶ Event collection</span> setting values should be as following.</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Setting value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Response key</p></td>
<td><p><strong class="program">value</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Response list flag</p></td>
<td><p><strong class="program">True</strong></p></td>
</tr>
<tr class="row-even"><td><p>Event ID key</p></td>
<td><p><strong class="program">id</strong></p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If <em class="dfn">Response key</em> has a key specified to it that does not exist in one of the filtered values, the value will fetch blank values and will not function properly.</div>
<div class="line">If a key that does not exist in the filtered values is specified to the <em class="dfn">Response key</em> above, the system will not function properly.</div>
</div>
<table class="docutils align-default" id="id13">
<caption><span class="caption-number">表 2.74 </span><span class="caption-text">Invalid Event ID key settings</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Setting value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Response key</p></td>
<td><p><strong class="program">value</strong></p></td>
</tr>
<tr class="row-odd"><td><p>Response lsit flag</p></td>
<td><p><strong class="program">True</strong></p></td>
</tr>
<tr class="row-even"><td><p>Event ID key</p></td>
<td><p><strong class="program">value[].id</strong></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="agent-examples-for-the-different-monitoring-softwares">
<span id="oase-agent-settings"></span><h3><span class="section-number">2.8.5. </span>Agent examples for the different monitoring softwares<a class="headerlink" href="#agent-examples-for-the-different-monitoring-softwares" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section contains setting examples in <span class="menuselection">OASE management ▶ Event collection</span> for using <em class="dfn">Zabbix</em> and <em class="dfn">Grafana</em>.</div>
</div>
<div class="line-block">
<div class="line">This section will first display examples using cURL commands to fetch alerts from the softwares.</div>
<div class="line">Then, it will explain the order of configuring cURL parameters to <span class="menuselection">OASE management ▶ Event collection</span>.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">The HTTP API might differ depending on the monitoring software version.</div>
<div class="line">Make sure to check how the HTTP API works for the version the user is using before configuring the settings in <span class="menuselection">OASE management ▶ Event collection</span>.</div>
</div>
</div>
<section id="zabbix">
<h4>Zabbix<a class="headerlink" href="#zabbix" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This section contains an example for configuring <span class="menuselection">OASE management ▶ Event collection</span> to fetch events from <em class="dfn">Zabbix</em>.</div>
</div>
<div class="line-block">
<div class="line">The <em class="dfn">Zabbix</em> used in the following section is running the following version.</div>
<div class="line">・zabbix 6.4.12</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Fetch events from <em class="dfn">Zabbix</em> with cURL command</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The following example is an cURL command to fetch Faults(problems) from <em class="dfn">Zabbix</em>.</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--request<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
--url<span class="w"> </span>http://&lt;Zabbix<span class="w"> </span>IP<span class="w"> </span>Address<span class="w"> </span>or<span class="w"> </span>Domain&gt;/zabbix/api_jsonrpc.php<span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;content-type: application/json-rpc&#39;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s2">&quot;{\&quot;jsonrpc\&quot;: \&quot;2.0\&quot;,\&quot;method\&quot;: \&quot;problem.get\&quot;,\&quot;id\&quot;: 1,\&quot;params\&quot;: {},\&quot;auth\&quot;: \&quot;&lt;Zabbix API token&gt;&quot;</span><span class="o">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">(More information regarding commands and &lt;Zabbix API token&gt; within parameters are written later in this section.)</div>
</div>
<div class="line-block">
<div class="line">The cURL command above returns a response similar to the one below.</div>
</div>
<div class="highlight-json notranslate" id="oase-agent-zabbix-responss"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">   </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 4</span><span class="w">       </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">           </span><span class="nt">&quot;eventid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;89&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">           </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">           </span><span class="nt">&quot;object&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos"> 8</span><span class="w">           </span><span class="nt">&quot;objectid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;16046&quot;</span><span class="p">,</span>
<span class="linenos"> 9</span><span class="w">           </span><span class="nt">&quot;clock&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1709636653&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">           </span><span class="nt">&quot;ns&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;906955445&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">           </span><span class="nt">&quot;r_eventid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">12</span><span class="w">           </span><span class="nt">&quot;r_clock&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">13</span><span class="w">           </span><span class="nt">&quot;r_ns&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">14</span><span class="w">           </span><span class="nt">&quot;correlationid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">15</span><span class="w">           </span><span class="nt">&quot;userid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">16</span><span class="w">           </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;High CPU utilization (over 90% for 5m)&quot;</span><span class="p">,</span>
<span class="linenos">17</span><span class="w">           </span><span class="nt">&quot;acknowledged&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">18</span><span class="w">           </span><span class="nt">&quot;severity&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="p">,</span>
<span class="linenos">19</span><span class="w">           </span><span class="nt">&quot;opdata&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Current utilization: 100 %&quot;</span><span class="p">,</span>
<span class="linenos">20</span><span class="w">           </span><span class="nt">&quot;suppressed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
<span class="linenos">21</span><span class="w">           </span><span class="nt">&quot;urls&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="linenos">22</span><span class="w">       </span><span class="p">}</span>
<span class="linenos">23</span><span class="w">   </span><span class="p">],</span>
<span class="linenos">24</span><span class="w">   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos">25</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">For more information regarding <em class="dfn">Zabbix</em> faults (problems), see the following.</div>
<div class="line-block">
<div class="line"><a class="reference external" href="https://www.zabbix.com/documentation/current/jp/manual/api/reference/problem/get">https://www.zabbix.com/documentation/current/jp/manual/api/reference/problem/get</a></div>
</div>
</div>
</div>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line">Agent settings example for fetching events from <em class="dfn">Zabbix</em>.</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The following settings configures the <span class="menuselection">OASE management ▶ Event collection</span> values to fetch values similar to the cURL command listed above.</div>
</div>
<table class="docutils align-left" id="id14">
<caption><span class="caption-number">表 2.75 </span><span class="caption-text">Zabbix setting value example</span><a class="headerlink" href="#id14" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Setting value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Event collection name</p></td>
<td><p>&lt;Name for fetching Zabbix faults&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>Connection method</p></td>
<td><p>Free authentication</p></td>
</tr>
<tr class="row-even"><td><p>Requestion method</p></td>
<td><p>POST</p></td>
</tr>
<tr class="row-odd"><td><p>Connection destination</p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="http:/">http:/</a>/&lt;Zabbix IP Address or Domain&gt;/zabbix/api_jsonrpc.php</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Request header</p></td>
<td><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;content-type&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/json-rpc&quot;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Parameter</p></td>
<td><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="s2">&quot;problem.get&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;params&quot;</span><span class="p">:{},</span>
<span class="w">  </span><span class="nt">&quot;auth&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;Zabbix API token&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Response key</p></td>
<td><p>result</p></td>
</tr>
<tr class="row-odd"><td><p>REsponse list flag</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p>Event ID key</p></td>
<td><p>eventid</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">The &lt;Zabbix API token&gt; configured to <span class="menuselection">Parameter</span> is Zabbix user authentication information. The following command can be used to fetch user information.</div>
<div class="line">Note that running the command below might cause already created &lt;Zabbix API token&gt; not being usable by existing users.</div>
<div class="line">We recommend creating a new user and creating a new &lt;Zabbix API token&gt; with said user.</div>
</div>
<div class="line-block">
<div class="line">Create a new user</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Sign in to <em class="dfn">Zabbix</em> as an admin through the browser.</div>
<div class="line">　The default admin login inforamtion are as following:</div>
<div class="line">　　・Username： Admin</div>
<div class="line">　　・Password： zabbix</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Select  a user Side menu  &gt; User</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">Create user</span> at the top right part of the user page.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Input username and password</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click the <span class="guilabel">Permission</span> tab</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Go to the user role and click <span class="guilabel">Select</span> select.</div>
<div class="line">Select a &quot;User role&quot; or a role that has more API access.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Input other required items</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">Add</span>.</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">Follow the following steps to create a user.</div>
</div>
<div class="line-block">
<div class="line">The following example is a command for creating an &lt;API token&gt;.</div>
<div class="line">The <em class="dfn">Zabbix</em> login information for the example below are as following.</div>
<div class="line">　・Username: The user's &lt;Username&gt; from the previous operation.</div>
<div class="line">　・Password: The user's &lt;Password&gt; from the previous operation.</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--request<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
--url<span class="w"> </span>ttp://&lt;Zabbix<span class="w"> </span>IP<span class="w"> </span>Address<span class="w"> </span>or<span class="w"> </span>Domain&gt;/zabbix/api_jsonrpc.php<span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s2">&quot;Content-Type: application/json-rpc&quot;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span><span class="s2">&quot;{\&quot;auth\&quot;:null,\&quot;method\&quot;:\&quot;user.login\&quot;,\&quot;id\&quot;:1,\&quot;params\&quot;:{\&quot;user\&quot;:\&quot;&lt;Username&gt;\&quot;,\&quot;password\&quot;:\&quot;&lt;Password&gt;\&quot;},\&quot;jsonrpc\&quot;:\&quot;2.0\&quot;}&quot;</span><span class="w"> </span><span class="se">\</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The cURL command above returns a response similar to the one below.</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">{</span>
<span class="linenos">2</span><span class="w">    </span><span class="nt">&quot;jsonrpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0&quot;</span><span class="p">,</span>
<span class="linenos">3</span><span class="w">     </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;Zabbix API token&gt;&quot;</span><span class="p">,</span>
<span class="linenos">4</span><span class="w">     </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Paste the &lt;Zabbix API token&gt; to the  <span class="menuselection">OASE management ▶ Event collection</span>'s <span class="menuselection">Parameter</span>'s &lt;Zabbix API token&gt;.</div>
<div class="line">※ &lt;Zabbix API token&gt; can be created from browsers.</div>
<div class="line">After logging in through the browser, access Side menu &gt; User settings &gt; API token and create the token by pressing <span class="guilabel">Create API token</span>.</div>
</div>
</div>
</section>
<section id="grafan">
<h4>Grafan<a class="headerlink" href="#grafan" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This section contains an example for configuring <span class="menuselection">OASE management ▶ Event collection</span> to fetch events from <em class="dfn">Grafan</em>.</div>
</div>
<div class="line-block">
<div class="line">The <em class="dfn">Grafan</em> used in the following section is running the following version.</div>
<div class="line">・Grafan 10.3</div>
<div class="line">・Use Prometheus 2.49 for data source</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Fetch events from <em class="dfn">Grafan</em> with cURL command.</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The following example is an cURL command to fetch alerts from <em class="dfn">Grafan</em>.</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--request<span class="w"> </span>GET<span class="w"> </span><span class="se">\</span>
--url<span class="w"> </span><span class="s1">&#39;http://&lt;GrafanaのIP addres か Domain&gt;:3000/api/prometheus/grafana/api/v1/alerts&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;authorization: Bearer &lt;Authentication token&gt;&#39;</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">(More information regarding commands and &lt;Authentication token&gt; within parameters are written later in this section.)</div>
</div>
<div class="line-block">
<div class="line">The cURL command above returns a response similar to the one below.</div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 3</span><span class="w">        </span><span class="nt">&quot;alerts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 4</span><span class="w">            </span><span class="p">{</span>
<span class="linenos"> 5</span><span class="w">                </span><span class="nt">&quot;activeAt&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2018-07-04T20:27:12.60602144+02:00&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">                </span><span class="nt">&quot;annotations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="linenos"> 7</span><span class="w">                </span><span class="nt">&quot;labels&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">                    </span><span class="nt">&quot;alertname&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-alert&quot;</span>
<span class="linenos"> 9</span><span class="w">                </span><span class="p">},</span>
<span class="linenos">10</span><span class="w">                </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;firing&quot;</span><span class="p">,</span>
<span class="linenos">11</span><span class="w">                </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1e+00&quot;</span>
<span class="linenos">12</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">13</span><span class="w">        </span><span class="p">]</span>
<span class="linenos">14</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
<span class="linenos">16</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">For more information regarding Grafana alerts, see the following URL.</div>
<div class="line-block">
<div class="line"><a class="reference external" href="https://prometheus.io/docs/prometheus/latest/querying/api/#alerts">https://prometheus.io/docs/prometheus/latest/querying/api/#alerts</a></div>
</div>
</div>
</div>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line">Event collection settings example for fetching events from <em class="dfn">Grafana</em>.</div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The following settings configures the <span class="menuselection">OASE management ▶ Event collection</span> values to fetch values similar to the cURL command listed above.</div>
</div>
<table class="docutils align-left" id="id15">
<caption><span class="caption-number">表 2.76 </span><span class="caption-text">Grafana setting example</span><a class="headerlink" href="#id15" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Setting value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Event collection name</p></td>
<td><p>&lt;Name for fetching Grafana alerts&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>Connection method</p></td>
<td><p>Bearer authentication</p></td>
</tr>
<tr class="row-even"><td><p>Request method</p></td>
<td><p>GET</p></td>
</tr>
<tr class="row-odd"><td><p>Connection destination</p></td>
<td><div class="line-block">
<div class="line"><a class="reference external" href="http:/">http:/</a>/&lt;Grafana IP addres or Domain&gt;:3000/api/prometheus/grafana/api/v1/rules</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Request header</p></td>
<td><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;Content-Type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Authentication token</p></td>
<td><p>&lt;Authentication token&gt;</p></td>
</tr>
<tr class="row-even"><td><p>Response key</p></td>
<td><p>data.alerts</p></td>
</tr>
<tr class="row-odd"><td><p>Response list flag</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p>Event ID key</p></td>
<td><p>activeAt</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">&lt;Authentication token&gt; is Grafana authentication information.</div>
<div class="line">It can be fetched by following the steps below.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Log in to <em class="dfn">Grafan</em> through the browser.</div>
<div class="line">　The default values are as following:</div>
<div class="line">　・username: admin</div>
<div class="line">　・Password: admin  (Might have been changed if someone already has logged in)</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Select Home &gt; Administration &gt; Service accounts</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">service account</span> and create a service account.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Input a name for the service name (uncapitalized alphanumeric characters only).</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">Add service account token</span> and create an Authentication token.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">For expiration,</div>
<div class="line">　Select either &quot;No expiration&quot; (no period　※recommended) or</div>
<div class="line">　&quot;Set expiration&quot; (with period).</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">Generate token</span>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Click <span class="guilabel">Copy to clipboard and close</span></div>
<div class="line">and paste the Authentication token to the clipboard.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Paste the Authentication token from the clipboard to <span class="menuselection">OASE management ▶ Event collection</span>'s <span class="menuselection">Authentication token</span>.</div>
</div>
</li>
</ol>
</div>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="oase_common.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">1. </span>OASE common</a></li>
    <li class="next"><a href="oase.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">3. </span>OASE</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>