<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>1. Terraform driver Common &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=639405c8" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="2. Terraform Cloud/EP driver" href="terraform_cloud_ep.html" />
    <link rel="prev" title="Terraform Driver" href="index.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/terraform_driver/terraform_common.html" selected>current</option>
              <option value="../../../../ja/2.5/manuals/terraform_driver/terraform_common.html" selected>2.5(current)</option>
              <option value="../../../../ja/2.4/manuals/terraform_driver/terraform_common.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/terraform_driver/terraform_common.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/terraform_driver/terraform_common.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/terraform_driver/terraform_common.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/terraform_driver/terraform_common.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/terraform_driver/terraform_common.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/terraform_driver/terraform_common.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="index.html" title="前のトピックへ">Terraform Driver</a></li>
        <li class="next"><a href="terraform_cloud_ep.html" title="次のトピックへ"><span class="section-number">2. </span>Terraform Cloud/EP driver</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">インストール</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">マニュアル</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ansible-driver/index.html">Ansible Driver</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Terraform Driver</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Terraform driver Common</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overview">1.2. Overview</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#terraform">1.2.1. Terraform</a></li>
<li class="toctree-l5"><a class="reference internal" href="#terrform-driver">1.2.2. Terrform driver</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#handling-variables">1.3. Handling Variables</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#variable-types">1.3.1. Variable types</a></li>
<li class="toctree-l5"><a class="reference internal" href="#extracting-variables-and-registering-specific-values">1.3.2. Extracting Variables and registering Specific values,</a></li>
<li class="toctree-l5"><a class="reference internal" href="#types-of-variables">1.3.3. Types of variables</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#describing-construction-code">1.4. Describing construction code</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#describing-module">1.4.1. Describing Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="#describing-policy">1.4.2. Describing Policy</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">1.5. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#module-file-variable-block-input-register-example">1.5.1. Module file &quot;Variable block&quot; input/register example</a></li>
<li class="toctree-l5"><a class="reference internal" href="#variable-nest-management-flow-example">1.5.2. Variable nest management flow example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="terraform_cloud_ep.html">2. Terraform Cloud/EP driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="terraform_cli.html">3. Terraform CLI driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oase/index.html">OASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">1. Terraform driver Common</a><ul>
<li><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li><a class="reference internal" href="#overview">1.2. Overview</a><ul>
<li><a class="reference internal" href="#terraform">1.2.1. Terraform</a></li>
<li><a class="reference internal" href="#terrform-driver">1.2.2. Terrform driver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#handling-variables">1.3. Handling Variables</a><ul>
<li><a class="reference internal" href="#variable-types">1.3.1. Variable types</a></li>
<li><a class="reference internal" href="#extracting-variables-and-registering-specific-values">1.3.2. Extracting Variables and registering Specific values,</a></li>
<li><a class="reference internal" href="#types-of-variables">1.3.3. Types of variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#describing-construction-code">1.4. Describing construction code</a><ul>
<li><a class="reference internal" href="#describing-module">1.4.1. Describing Module</a></li>
<li><a class="reference internal" href="#describing-policy">1.4.2. Describing Policy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">1.5. Appendix</a><ul>
<li><a class="reference internal" href="#module-file-variable-block-input-register-example">1.5.1. Module file &quot;Variable block&quot; input/register example</a></li>
<li><a class="reference internal" href="#variable-nest-management-flow-example">1.5.2. Variable nest management flow example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">マニュアル</a></li>
    <li><a href="index.html">Terraform Driver</a></li>
    
    <li><span class="section-number">1. </span>Terraform driver Common</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="terraform-driver-common">
<h1><span class="section-number">1. </span>Terraform driver Common<a class="headerlink" href="#terraform-driver-common" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">1.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document explains the common functions of the &quot;&quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a>&quot; and &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a>&quot; (Hereinafter written as Terraform Driver).</div>
</div>
</section>
<section id="overview">
<h2><span class="section-number">1.2. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains Terraform and the Terraform driver.</div>
</div>
<section id="terraform">
<h3><span class="section-number">1.2.1. </span>Terraform<a class="headerlink" href="#terraform" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Terraform is an Orchestration tool created by HashiCorp for optimizing infrastructures.</div>
<div class="line">It uses infrastructure files coded in HCL (HashiCorp Configuration Language) to generate an Execution plan before executing the construction process.</div>
<div class="line">Terraform Cloud and Terraform Enterprise can also codify Access policies through something called Policy as Code and manage them on the system.</div>
<div class="line">For more information regarding Terraform, see the Terraform product manuals..</div>
</div>
</section>
<section id="terrform-driver">
<h3><span class="section-number">1.2.2. </span>Terrform driver<a class="headerlink" href="#terrform-driver" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Terraform driver is an ITA Function that allows users to execute Terraform and fetch execution logs.</div>
<div class="line">The module files used for executions (Plan/Apply) and Policy files used to run PolicyChecks are turned into parts on the ITA system where they can be re-used.</div>
<div class="line">The Terraform Driver can also configure variables within the Module files.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="#terraform-common-variable-handling"><span class="std std-ref">Handling Variables</span></a>&quot;.</div>
</div>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../../_images/overview.png"><img alt="ITA system overview" src="../../_images/overview.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.77 </span><span class="caption-text">ITA system overview</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">There are 2 types of Terraform drivers.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line"><strong>Terraform Cloud/EP driver</strong></div>
<div class="line">Allows users to Create Organizations, Workspaces, execute operations (Plan/PolicyCheck/Apply) to Terraform Cloud and Terraform Enterprises registered to ITA and fetch operation logs.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a>&quot;.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Terraform CLI driver</strong></div>
<div class="line">Allows users to execute operations (Plan/Apply) to and fetch operation logs from Terraform systems installed on the same environment as ITA.</div>
<div class="line">For more information, see &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a>&quot;.</div>
</div>
</li>
</ul>
</section>
</section>
<section id="handling-variables">
<span id="terraform-common-variable-handling"></span><h2><span class="section-number">1.3. </span>Handling Variables<a class="headerlink" href="#handling-variables" title="Link to this heading">¶</a></h2>
<section id="variable-types">
<h3><span class="section-number">1.3.1. </span>Variable types<a class="headerlink" href="#variable-types" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">In the Terraform driver, users can configure Specific values within Modules from the ITA settings page.</div>
</div>
<div class="line-block">
<div class="line">※For more information, see &quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a> -&gt; <a class="reference internal" href="terraform_cloud_ep.html#terraform-cloud-ep-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot; and &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a> -&gt; <a class="reference internal" href="terraform_cli.html#terraform-cli-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot;.</div>
<div class="line">The Variable blocks defined within the Module files can be handled as Variables.</div>
</div>
</section>
<section id="extracting-variables-and-registering-specific-values">
<h3><span class="section-number">1.3.2. </span>Extracting Variables and registering Specific values,<a class="headerlink" href="#extracting-variables-and-registering-specific-values" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">User can register specific values by extrating variables out from module files uploaded to ITA.</div>
<div class="line">The extracted specific values are registered as specific values in the &quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a> -&gt; <a class="reference internal" href="terraform_cloud_ep.html#terraform-cloud-ep-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot; and &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a> -&gt; <a class="reference internal" href="terraform_cli.html#terraform-cli-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot; by linking with the Parameter sheets..</div>
</div>
<div class="line-block">
<div class="line">In the Terraform Cloud/EP driver, registered values and specific values are registered as &quot;Key&quot; for &quot;Variable name&quot; and &quot;Value&quot; for &quot;Specific value&quot; to the Link Terraform's Workspace.</div>
<div class="line">In the Terraform CLI driver, registered variables and specific values are described and applied as &quot;Key&quot; for the &quot;Variable name&quot; and &quot;Value&quot; for the &quot;Specific value&quot; in the terraform.tfvars file which is generated when execution starts.</div>
</div>
</section>
<section id="types-of-variables">
<span id="terraform-common-variable-type"></span><h3><span class="section-number">1.3.3. </span>Types of variables<a class="headerlink" href="#types-of-variables" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Users can configure the type within the variables.</div>
<div class="line">The variables within the Module must follow the HCL (HashiCorp ConfigurationLanguage) variable rules.</div>
</div>
<div class="line-block">
<div class="line">The variables handled by ITA are as following.</div>
</div>
<table class="docutils align-left" id="id2">
<caption><span class="caption-number">表 1.50 </span><span class="caption-text">Variable type</span><a class="headerlink" href="#id2" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 10.0%" />
<col style="width: 30.0%" />
<col style="width: 10.0%" />
<col style="width: 10.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>type</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><div class="line-block">
<div class="line">Member variable target</div>
<div class="line">※1</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">Substitute order target</div>
<div class="line">※2</div>
</div>
</th>
<th class="head"><p>type description example</p></th>
<th class="head"><p>default description example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>string</p></td>
<td><p>String type</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>string</p></td>
<td><p>ABC</p></td>
</tr>
<tr class="row-odd"><td><p>number</p></td>
<td><p>Number type</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>number</p></td>
<td><p>123</p></td>
</tr>
<tr class="row-even"><td><p>bool</p></td>
<td><p>Boolean type (True or false).</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>bool</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-odd"><td><p>list</p></td>
<td><p>Array type.</p></td>
<td><p>×</p></td>
<td><p>〇</p></td>
<td><p>list(string)</p></td>
<td><p>[&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]</p></td>
</tr>
<tr class="row-even"><td><p>set</p></td>
<td><div class="line-block">
<div class="line">Array type. Asks for unique values.</div>
<div class="line">ITA does not check if the specific value is unique or not.</div>
</div>
</td>
<td><p>×</p></td>
<td><p>〇</p></td>
<td><p>set(number)</p></td>
<td><p>[1, 2, 3]</p></td>
</tr>
<tr class="row-odd"><td><p>tuple</p></td>
<td><div class="line-block">
<div class="line">Array type.The user must decide what number is what type in beforehand.</div>
<div class="line">The value's input number is decided, meaning that they can be selected from pulldown selections as Member variables.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>×</p></td>
<td><p>tuple([string, number])</p></td>
<td><p>[&quot;ABC&quot;, 2023]</p></td>
</tr>
<tr class="row-even"><td><p>map</p></td>
<td><div class="line-block">
<div class="line">key-value (associative array) type. If a type containing more map types on ITA, the key value cannot be specified from the type information, meaning that the HCL settings must be set to ON if the user is using substitute value auto registration settings.</div>
<div class="line">For more information regarding HCL settings, see &quot;<a class="reference internal" href="terraform_cloud_ep.html#terraform-cloud-ep-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot;.</div>
</div>
</td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>map(string)</p></td>
<td><p>{&quot;test_key&quot; = &quot;test_value&quot;}</p></td>
</tr>
<tr class="row-odd"><td><p>object</p></td>
<td><div class="line-block">
<div class="line">key-value (associative array)  type. in ITA, the key name is handled as Member variables. the key name cannot contain Japanese characters.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>×</p></td>
<td><p>object({test_key = string})</p></td>
<td><p>{&quot;test_key&quot; = &quot;test_value&quot;}</p></td>
</tr>
<tr class="row-even"><td><p>any</p></td>
<td><p>A type that fits everything. however, it will be handled the same way as string types on ITA.</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>any</p></td>
<td><p>ABC</p></td>
</tr>
<tr class="row-odd"><td><p>No description</p></td>
<td><p>If no type is described, it will be handled the same way as string types on ITA.</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td></td>
<td><p>ABC</p></td>
</tr>
</tbody>
</table>
<ul id="terraform-common-member-vars-description">
<li><div class="line-block">
<div class="line"><strong>※1 …Member variable target</strong></div>
<div class="line">If the variable is a key-value type, it will be a key name..</div>
<div class="line">If the variable type is object, &lt;KEY&gt; = &lt;TYPE&gt;'s  &lt;KEY&gt; will be member variable.</div>
<div class="line">If the variable type is tuple, the variables defined within the tuple will be numbered from [0],[1],[2]… and become Member variables.</div>
</div>
<div class="line-block">
<div class="line">If the Variable type is registered to the Variable nest management menu, they will be numbered from [0],[1],[2]… and become Member variables based on the maximum cycle number.</div>
<div class="line">For more information regarding variable nests, see &quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a> -&gt; <a class="reference internal" href="terraform_cloud_ep.html#terraform-cloud-ep-nested-variable"><span class="std std-ref">Variable nest management</span></a>&quot; and &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a> -&gt; <a class="reference internal" href="terraform_cli.html#terraform-cli-nested-variable"><span class="std std-ref">Variable nest management</span></a>&quot;.</div>
</div>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Example: When variable type is object</strong></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line">tf file and registration values</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>variable<span class="w"> </span><span class="s2">&quot;VAR_hoge&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>object<span class="o">({</span>
<span class="w">      </span><span class="nv">NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>string,
<span class="w">      </span><span class="nv">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>string
<span class="w">    </span><span class="o">})</span>
<span class="w">    </span><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span>
<span class="w">      </span>“NAME”<span class="w"> </span><span class="o">=</span><span class="w"> </span>“machine_01”,
<span class="w">      </span>“IP”<span class="w"> </span><span class="o">=</span><span class="w"> </span>“127.0.0.1”
<span class="w">   </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Substitute value example(Substitute value auto registration settings)</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable</p></th>
<th class="head"><p>Substitute order</p></th>
<th class="head"><p>Parameter sheet input value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_hoge</p></td>
<td><p>NAME</p></td>
<td><p>No input</p></td>
<td><p>my_machine</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_hoge</p></td>
<td><p>IP</p></td>
<td><p>No input</p></td>
<td><p>192.168.100.1</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Value sent to Terraform</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">    </span><span class="nv">NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_machine&quot;</span>
<span class="w">    </span><span class="nv">IP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;192.168.100.1&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Example: When Variable type is tuple</strong></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line">tf file and registration value</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>variable<span class="w"> </span><span class="s2">&quot;VAR_hoge&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>tuple<span class="o">([</span>string,number<span class="o">])</span>
<span class="w">    </span><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;abc&quot;</span>,2023<span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Substitute value example(Substitute value auto registration settings)</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable</p></th>
<th class="head"><p>Substitute order</p></th>
<th class="head"><p>Parameter sheet input value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[0]</p></td>
<td><p>No input</p></td>
<td><p>def</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[1]</p></td>
<td><p>No input</p></td>
<td><p>2024</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Value sent to Terraform</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="s2">&quot;def&quot;</span>,<span class="w"> </span><span class="m">2024</span><span class="o">]</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Example: When variable type is nest management target</strong></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line">tf file and registration value</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>variable<span class="w"> </span><span class="s2">&quot;VAR_hoge&quot;</span><span class="o">{</span>
<span class="w">    </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>list<span class="o">(</span>set<span class="o">(</span>string<span class="o">))</span>
<span class="w">    </span><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="o">[</span><span class="s2">&quot;aaa&quot;</span>,<span class="s2">&quot;bbb&quot;</span><span class="o">]</span>
<span class="w">      </span><span class="o">[</span><span class="s2">&quot;ccc&quot;</span>,<span class="s2">&quot;ddd&quot;</span><span class="o">]</span>
<span class="w">    </span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Substitute value example(Substitute value auto registration settings)</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable</p></th>
<th class="head"><p>Substitute order</p></th>
<th class="head"><p>Parameter sheet input value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[0]</p></td>
<td><p>1</p></td>
<td><p>AAA</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[0]</p></td>
<td><p>2</p></td>
<td><p>BBB</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[1]</p></td>
<td><p>1</p></td>
<td><p>CCC</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>VAR_hoge</p></td>
<td><p>[1]</p></td>
<td><p>2</p></td>
<td><p>DDD</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Value sent to Terraform</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
<span class="w">   </span><span class="o">[</span><span class="s2">&quot;AAA&quot;</span>,<span class="w"> </span><span class="s2">&quot;BBB&quot;</span><span class="o">]</span>,
<span class="w">   </span><span class="o">[</span><span class="s2">&quot;CCC&quot;</span>,<span class="w"> </span><span class="s2">&quot;DDD&quot;</span><span class="o">]</span>
<span class="o">]</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</li>
</ul>
<ul id="terraform-common-substitution-order-description">
<li><div class="line-block">
<div class="line"><strong>※2 …Substitute order target</strong></div>
<div class="line">The substitute order is the order of which specific values are set to variables (starting from top).</div>
<div class="line">If the variable type (or the type for the lowest variable in a hierarchy configuration) is &quot;list&quot; or &quot;set&quot;, they can be configured in the &quot;<a class="reference internal" href="terraform_cloud_ep.html"><span class="doc">Terraform Cloud/EP driver</span></a> -&gt; <a class="reference internal" href="terraform_cloud_ep.html#terraform-cloud-ep-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>&quot; and &quot;<a class="reference internal" href="terraform_cli.html"><span class="doc">Terraform CLI driver</span></a> -&gt; <a class="reference internal" href="terraform_cli.html#terraform-cli-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a> menus.</div>
</div>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Example: When Variable type is list</strong></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line">tf file and registration value</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>variable<span class="w"> </span><span class="s2">&quot;VAR_hoge&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>list<span class="o">(</span>string<span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Substitute value example(Substitute value auto registration settings)</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable</p></th>
<th class="head"><p>Substitute order</p></th>
<th class="head"><p>Parameter sheet input value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_hoge</p></td>
<td><p>Input not required</p></td>
<td><p>1</p></td>
<td><p>ABC</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_hoge</p></td>
<td><p>Input not required</p></td>
<td><p>2</p></td>
<td><p>DEF</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Value sent to Terraform</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="s2">&quot;ABC&quot;</span>,<span class="s2">&quot;DEF&quot;</span><span class="o">]</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><ul>
<li><div class="line-block">
<div class="line"><strong>Example: When the Hierarchy variable's lowest variable type is &quot;set&quot;</strong></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line">tf file and registration value</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>variable<span class="w"> </span><span class="s2">&quot;VAR_hoge&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">   </span><span class="nb">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>object<span class="o">({</span>
<span class="w">      </span><span class="nv">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>set<span class="o">(</span>number<span class="o">)</span>
<span class="w">   </span><span class="o">})</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Substitute value example(Substitute value auto registration settings)</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 12.5%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item number</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Member variable</p></th>
<th class="head"><p>Substitute order</p></th>
<th class="head"><p>Parameter sheet input value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>VAR_hoge</p></td>
<td><p>key</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>VAR_hoge</p></td>
<td><p>key</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Value sent to Terraform</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">    </span><span class="nv">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="m">1</span>,2<span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="describing-construction-code">
<h2><span class="section-number">1.4. </span>Describing construction code<a class="headerlink" href="#describing-construction-code" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to write Modules and Policies for the Terraform driver.</div>
<div class="line">The Policy function is only activate for the Terraform Cloud/EP driver.</div>
</div>
<section id="describing-module">
<span id="terraform-common-module-description"></span><h3><span class="section-number">1.4.1. </span>Describing Module<a class="headerlink" href="#describing-module" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Module files are written in HasiCorp's original language, HCL (HashiCorp ConfigurationLanguage).</div>
<div class="line">For more information, see the Terraform product manuals.</div>
</div>
</section>
<section id="describing-policy">
<span id="terraform-common-policy-description"></span><h3><span class="section-number">1.4.2. </span>Describing Policy<a class="headerlink" href="#describing-policy" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Policy files are written in HasiCorp's original language, Sentinel language.</div>
<div class="line">For more information, see the Terraform product manuals.</div>
</div>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">1.5. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="module-file-variable-block-input-register-example">
<span id="terraform-cloud-ep-module-example"></span><h3><span class="section-number">1.5.1. </span>Module file &quot;Variable block&quot; input/register example<a class="headerlink" href="#module-file-variable-block-input-register-example" title="Link to this heading">¶</a></h3>
<p>This section contains substitute value auto registration settings registration examples and &quot;Variable block&quot; description examples for each variable type.</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Simple pattern</strong></div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">string type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_string.png"><img alt="string type" src="../../_images/variable_string.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">number type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_number.png"><img alt="number type" src="../../_images/variable_number.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">bool type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_bool.png"><img alt="bool type" src="../../_images/variable_bool.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">list type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_list.png"><img alt="list type" src="../../_images/variable_list.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">set type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_set.png"><img alt="set type" src="../../_images/variable_set.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">tuple type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_tuple.png"><img alt="tuple type" src="../../_images/variable_tuple.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">map type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_map.png"><img alt="map type" src="../../_images/variable_map.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">object type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_object.png"><img alt="object type" src="../../_images/variable_object.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">any type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_any.png"><img alt="map type" src="../../_images/variable_any.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">No type description</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_no_type.png"><img alt="No type description" src="../../_images/variable_no_type.png" style="width: 600px;" />
</a>
</figure>
</li>
</ol>
</li>
<li><div class="line-block">
<div class="line"><strong>Complicated patterns</strong></div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">list type within list type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_list_list.png"><img alt="list type within list type" src="../../_images/variable_list_list.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">object type within list type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_list_object.png"><img alt="object type within list type" src="../../_images/variable_list_object.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line">object type within list type within object type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_object_list_object.png"><img alt="object type within list type within object type" src="../../_images/variable_object_list_object.png" style="width: 600px;" />
</a>
</figure>
</li>
</ol>
</li>
<li><div class="line-block">
<div class="line"><strong>Special pattern</strong></div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">map type within list type</div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/variable_list_map.png"><img alt="map type within list type" src="../../_images/variable_list_map.png" style="width: 600px;" />
</a>
</figure>
</li>
</ol>
</li>
</ol>
</section>
<section id="variable-nest-management-flow-example">
<span id="terraform-nested-example"></span><h3><span class="section-number">1.5.2. </span>Variable nest management flow example<a class="headerlink" href="#variable-nest-management-flow-example" title="Link to this heading">¶</a></h3>
<p>This section contains examples on operating the Variable nest management menu.</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Increasing maximum number of cycles</strong></div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/nested_gain.png"><img alt="Increasing maximum number of cycles" src="../../_images/nested_gain.png" style="width: 600px;" />
</a>
</figure>
</li>
<li><div class="line-block">
<div class="line"><strong>Decreasing maximum number of cycles</strong></div>
</div>
<figure class="align-left">
<a class="reference internal image-reference" href="../../_images/nested_decrease.png"><img alt="Decreasing maximum number of cycles" src="../../_images/nested_decrease.png" style="width: 600px;" />
</a>
</figure>
</li>
</ol>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="index.html" title="前のトピックへ"><span>前のトピックへ</span>Terraform Driver</a></li>
    <li class="next"><a href="terraform_cloud_ep.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">2. </span>Terraform Cloud/EP driver</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>