<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>3. Ansible-Pioneer &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=639405c8" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="4. Ansible-LegacyRole" href="ansible_legacyrole.html" />
    <link rel="prev" title="2. Ansible-Legacy" href="ansible_legacy.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_pioneer.html" selected>current</option>
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_pioneer.html" selected>2.5(current)</option>
              <option value="../../../../ja/2.4/manuals/ansible-driver/ansible_pioneer.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/ansible-driver/ansible_pioneer.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/ansible-driver/ansible_pioneer.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/ansible-driver/ansible_pioneer.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/ansible-driver/ansible_pioneer.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_pioneer.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/ansible-driver/ansible_pioneer.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="ansible_legacy.html" title="前のトピックへ"><span class="section-number">2. </span>Ansible-Legacy</a></li>
        <li class="next"><a href="ansible_legacyrole.html" title="次のトピックへ"><span class="section-number">4. </span>Ansible-LegacyRole</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">インストール</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">マニュアル</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Ansible Driver</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ansible_common.html">1. Ansible common</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacy.html">2. Ansible-Legacy</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3. Ansible-Pioneer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">3.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-pioneer-overview">3.2. Ansible-Pioneer overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-pioneer-menu-structure">3.3. Ansible-Pioneer Menu structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menu">3.3.1. Menu</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-pioneer-procedure">3.4. Ansible-Pioneer procedure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ansible-pioneer-workflow">3.4.1. Ansible-Pioneer workflow</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-pioneer-menu-operation">3.5. Ansible-Pioneer Menu operation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#basic-console">3.5.1. Basic console</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-common">3.5.2. Ansible common</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id11">3.5.3. Ansible-Pioneer</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#writing-interactive-files-ansible-pioneer">3.6. Writing Interactive files （Ansible-Pioneer）</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#interactive-file-structure">3.6.1. Interactive file structure</a></li>
<li class="toctree-l5"><a class="reference internal" href="#interactive-module">3.6.2. Interactive Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="#regular-expression">3.6.3. Regular expression</a></li>
<li class="toctree-l5"><a class="reference internal" href="#warning">3.6.4. Warning</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">3.7. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#link-between-ita-menus-and-input-data-when-executing-ansible">3.7.1. Link between ITA menus and Input data when executing Ansible</a></li>
<li class="toctree-l5"><a class="reference internal" href="#result-data-created-when-executing-ansible">3.7.2. Result data created when executing Ansible</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacyrole.html">4. Ansible-LegacyRole</a></li>
<li class="toctree-l3"><a class="reference internal" href="collect.html">5. Collect function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terraform_driver/index.html">Terraform Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oase/index.html">OASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">3. Ansible-Pioneer</a><ul>
<li><a class="reference internal" href="#introduction">3.1. Introduction</a></li>
<li><a class="reference internal" href="#ansible-pioneer-overview">3.2. Ansible-Pioneer overview</a></li>
<li><a class="reference internal" href="#ansible-pioneer-menu-structure">3.3. Ansible-Pioneer Menu structure</a><ul>
<li><a class="reference internal" href="#menu">3.3.1. Menu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-pioneer-procedure">3.4. Ansible-Pioneer procedure</a><ul>
<li><a class="reference internal" href="#ansible-pioneer-workflow">3.4.1. Ansible-Pioneer workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-pioneer-menu-operation">3.5. Ansible-Pioneer Menu operation</a><ul>
<li><a class="reference internal" href="#basic-console">3.5.1. Basic console</a></li>
<li><a class="reference internal" href="#ansible-common">3.5.2. Ansible common</a></li>
<li><a class="reference internal" href="#id11">3.5.3. Ansible-Pioneer</a><ul>
<li><a class="reference internal" href="#os-type">OS type</a></li>
<li><a class="reference internal" href="#movement-list">Movement list</a></li>
<li><a class="reference internal" href="#interactive-type">Interactive type</a></li>
<li><a class="reference internal" href="#interactive-file-colletion">Interactive file colletion</a></li>
<li><a class="reference internal" href="#movement-interactive-type-link">Movement-Interactive type link</a></li>
<li><a class="reference internal" href="#substitute-value-auto-registration-settings">Substitute value auto registration settings</a></li>
<li><a class="reference internal" href="#execute">Execute</a></li>
<li><a class="reference internal" href="#confirm-execution-status">Confirm execution status</a></li>
<li><a class="reference internal" href="#execution-management">Execution management</a></li>
<li><a class="reference internal" href="#target-host">Target host</a></li>
<li><a class="reference internal" href="#substitute-value-management">Substitute value management</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#writing-interactive-files-ansible-pioneer">3.6. Writing Interactive files （Ansible-Pioneer）</a><ul>
<li><a class="reference internal" href="#interactive-file-structure">3.6.1. Interactive file structure</a></li>
<li><a class="reference internal" href="#interactive-module">3.6.2. Interactive Module</a><ul>
<li><a class="reference internal" href="#expect-module">expect module</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#format">Format</a></li>
<li><a class="reference internal" href="#input-example">Input example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#state-module">state module</a><ul>
<li><a class="reference internal" href="#id16">Overview</a></li>
<li><a class="reference internal" href="#id17">Format</a></li>
<li><a class="reference internal" href="#input-examples">Input examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-module">command module</a><ul>
<li><a class="reference internal" href="#id18">Overview</a></li>
<li><a class="reference internal" href="#id19">Format</a></li>
<li><a class="reference internal" href="#ansible-pioneer-coomand-example">Input examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#localaction-module">localaction module</a><ul>
<li><a class="reference internal" href="#id21">Overview</a></li>
<li><a class="reference internal" href="#id22">Format</a></li>
<li><a class="reference internal" href="#id23">Input examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#regular-expression">3.6.3. Regular expression</a></li>
<li><a class="reference internal" href="#warning">3.6.4. Warning</a><ul>
<li><a class="reference internal" href="#using-state-module-and-command-module">Using state module and command module</a></li>
<li><a class="reference internal" href="#using-multiple-specific-value-variables">Using multiple specific value variables</a></li>
<li><a class="reference internal" href="#ending-interactive-files">Ending interactive files</a></li>
<li><a class="reference internal" href="#writing-interactive-files-in-yaml-format">Writing interactive files in YAML format</a></li>
<li><a class="reference internal" href="#lang-for-target-device-login-user">LANG for Target device login user</a></li>
<li><a class="reference internal" href="#termination-codes-for-commands-input-to-the-target-device">Termination codes for commands input to the target device</a></li>
<li><a class="reference internal" href="#operating-system-command-sequence">Operating System Command sequence</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">3.7. Appendix</a><ul>
<li><a class="reference internal" href="#link-between-ita-menus-and-input-data-when-executing-ansible">3.7.1. Link between ITA menus and Input data when executing Ansible</a></li>
<li><a class="reference internal" href="#result-data-created-when-executing-ansible">3.7.2. Result data created when executing Ansible</a><ul>
<li><a class="reference internal" href="#file-list-saved-to-ansible-pioneer-result-data">File list saved to Ansible-Pioneer result data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">マニュアル</a></li>
    <li><a href="index.html">Ansible Driver</a></li>
    
    <li><span class="section-number">3. </span>Ansible-Pioneer</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="ansible-pioneer">
<h1><span class="section-number">3. </span>Ansible-Pioneer<a class="headerlink" href="#ansible-pioneer" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">3.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explains how to use Ansible-Pioneer.</div>
</div>
</section>
<section id="ansible-pioneer-overview">
<h2><span class="section-number">3.2. </span>Ansible-Pioneer overview<a class="headerlink" href="#ansible-pioneer-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Ansible-Pioneer adds original modules to Ansible, alowing users to input configuration in an interactive format.</div>
<div class="line">Servers, storage and network devices that log in through Telnet and SSH can be used.</div>
</div>
</section>
<section id="ansible-pioneer-menu-structure">
<h2><span class="section-number">3.3. </span>Ansible-Pioneer Menu structure<a class="headerlink" href="#ansible-pioneer-menu-structure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Ansible-Pioneer menu structure.</div>
</div>
<section id="menu">
<h3><span class="section-number">3.3.1. </span>Menu<a class="headerlink" href="#menu" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Basic console menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The basic console menus used by Ansible-Legacy are as following.</div>
</div>
<table class="docutils align-left" id="id24">
<caption><span class="caption-number">表 3.17 </span><span class="caption-text">基本コンソール メニュー/画面一覧</span><a class="headerlink" href="#id24" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 7.1%" />
<col style="width: 28.6%" />
<col style="width: 64.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>メニュー画面</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>オペレーション一覧</p></td>
<td><p>オペレーション一覧をメンテナンス(閲覧/登録/更新/廃止)できます。</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line"><strong>Ansible common menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic" start="3">
<li><div class="line-block">
<div class="line"><strong>Ansible-Pioneer menus</strong></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">The Ansible-Pioneer menus are as following.</div>
</div>
<table class="docutils align-left" id="id25">
<caption><span class="caption-number">表 3.18 </span><span class="caption-text">Ansible-Pioneer menu list</span><a class="headerlink" href="#id25" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 15.4%" />
<col style="width: 23.1%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>Menu</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Movement list</p></td>
<td><p>Manages Movements</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Interactive type</p></td>
<td><p>Manages Interactive types that compiles interactive files for the same goal.</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>OS type</p></td>
<td><p>Manages the OS type of the target device.</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Interactive file colletion</p></td>
<td><p>Manage the OS type linked with the Interactive type and the ITA system original format work procedure file (hereinafter refered to as Interactive files.).</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Movement-Interactive type link</p></td>
<td><p>Manages links between Movements and Interactive types for the Interactive file.</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Substitute value auto registration settings</p></td>
<td><p>Manages movements and variables that link items and values for each operation registered in the parameter sheet menu.</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Execute</p></td>
<td><p>Executes selected Movements and Operations.</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Execution management</p></td>
<td><p>Managed execution history.</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Check operation status</p></td>
<td><p>Displays the status of executions.</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>Target host</p></td>
<td><p>Manages target hosts.</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>Substitute value management</p></td>
<td><p>Manages variable substitute values.</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>Movement-variable link  (※1)</p></td>
<td><p>Manages links between Movements and variables.</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 Hidden menus are internal functions used to register and edit data.</div>
<div class="line">There are some hidden menus configured when the Ansible-Legacy driver function is installed.</div>
<div class="line">In order to display hidden menus, go to the <span class="menuselection">Management console▶Role/Menu link management</span> menu and restore the desired menus. For more information, see <a class="reference internal" href="../it_automation_base/management_console.html"><span class="doc">Management console</span></a>.</div>
<div class="line">Make sure to not register any data to these menus.</div>
</div>
</div>
</section>
</section>
<section id="ansible-pioneer-procedure">
<h2><span class="section-number">3.4. </span>Ansible-Pioneer procedure<a class="headerlink" href="#ansible-pioneer-procedure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to use Ansible-Pioneery.</div>
</div>
<section id="ansible-pioneer-workflow">
<h3><span class="section-number">3.4.1. </span>Ansible-Pioneer workflow<a class="headerlink" href="#ansible-pioneer-workflow" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">A standard workflow using Ansible-Pioneer can be seen below.</div>
</div>
<ul>
<li><p><strong>Workflow details and references</strong></p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Register OS type</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ OS type</span> menu, register the OS type of the target device.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-os-types"><span class="std std-ref">OS type</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register connection information for the target</strong></div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Device list</span> menu, register connection information for the target.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-device-list"><span class="std std-ref">Device list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register operation name</strong></div>
<div class="line">From the <span class="menuselection">Basic console ▶ Operation list</span> menu, register an Operation list.</div>
<div class="line">For more information, see <a class="reference internal" href="../it_automation_base/basic_console.html#basic-console-operation"><span class="std std-ref">Operation list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">**</span></a>Register Ansible Automation Controller host information (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Ansible Automation Controller host list</span> menu, Register information for the Ansible Automation Controller host.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-ansible-automation-controller-hosts"><span class="std std-ref">Ansible Automation Controller host list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Interface information</strong></div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Interface information</span> menu, select either Ansible Core or Ansible Automation Controller for the execution engine and register connection information for the execution engine server</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-interface-information"><span class="std std-ref">Interface information</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Movement</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Movement list</span> menu, register a Movement.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-movement-list"><span class="std std-ref">Movement list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Interactive type</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Interactive type</span> menu, register an Interactive type.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-dialog-type-list"><span class="std std-ref">Interactive type</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Interactive file</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Interactive file colletion</span> menu, register an interactive file for the Interactive type OS type combination.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-dialog-files"><span class="std std-ref">Interactive file colletion</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id3"><span class="problematic" id="id4">**</span></a>Register Global variables (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Global value management</span> menu, register global variables to be used in the Playbook.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-global-variable-list"><span class="std std-ref">Global variable management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id5"><span class="problematic" id="id6">**</span></a>Register Template files (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Template management</span> menu, register template files and template embedded variables to be used in the Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-template-list"><span class="std std-ref">Template management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id7"><span class="problematic" id="id8">**</span></a>Register File material (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ File management</span> menu, register file materials and file embedded variables to be used in the Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-file-list"><span class="std std-ref">File management</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id9"><span class="problematic" id="id10">**</span></a>Register Unmanaged variables (if needed) **</div>
<div class="line">From the <span class="menuselection">Ansible common ▶ Unmanaged target variable list</span> menu, register extracted variables which will not be displayed in <span class="menuselection">Ansible-Legacy ▶ Substitute value auto registration</span>'s <span class="menuselection">Movement name:Variable name</span>.</div>
<div class="line">For more information, see <a class="reference internal" href="ansible_common.html#ansible-common-unmanaged-var-list"><span class="std std-ref">Unmanaged target variable list</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register Interactive file to Movement</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Movement-Interactive type link</span> menu, register a link between the Interactive file and Movement.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-movement-details"><span class="std std-ref">Movement-Interactive type link</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Create parameter sheet</strong></div>
<div class="line">From the <span class="menuselection">Create/Define parameter sheets</span> menu, create a Parameter sheet which will have data registered to it that can configure settings for the target.</div>
<div class="line">For more information, see <a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Register data to Parameter sheet</strong></div>
<div class="line">Register data to the parameter sheet created in the previous step.</div>
<div class="line">For more information, see <a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Substitute value auto registration settings</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Substitute value auto registration settings</span> menu, link the Movement variables with the Parameter sheet's item's setting values.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Execute</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Execute</span> menu, select the desired Movement and Operation and execute them.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-execution"><span class="std std-ref">Execute</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm execution status</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Confirm execution status</span> menu,the status of all previously executed operations will be updated in realtime. Users can also monitor error logs and execution logs as well as stop them with an emergency stop.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-check-operation-status"><span class="std std-ref">Confirm execution status</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm execution history</strong></div>
<div class="line">From the <span class="menuselection">Ansible-Pioneer ▶ Execution management</span> menu, users can check the history of all previously executed operations..</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-execution-list"><span class="std std-ref">Execution management</span></a>.</div>
</div>
</li>
</ol>
</li>
</ul>
</section>
</section>
<section id="ansible-pioneer-menu-operation">
<h2><span class="section-number">3.5. </span>Ansible-Pioneer Menu operation<a class="headerlink" href="#ansible-pioneer-menu-operation" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to operate the Ansible-Pioneer menus.</div>
</div>
<section id="basic-console">
<h3><span class="section-number">3.5.1. </span>Basic console<a class="headerlink" href="#basic-console" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Basic console menu, see  <a class="reference internal" href="../it_automation_base/basic_console.html"><span class="doc">Basic console</span></a></div>
</div>
</section>
<section id="ansible-common">
<h3><span class="section-number">3.5.2. </span>Ansible common<a class="headerlink" href="#ansible-common" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For more information regarding Ansible common menus, see <a class="reference internal" href="ansible_common.html"><span class="doc">Ansible common</span></a></div>
</div>
</section>
<section id="id11">
<h3><span class="section-number">3.5.3. </span>Ansible-Pioneer<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains how to operate the Ansible-Pioneer menus.</div>
</div>
<section id="os-type">
<span id="ansible-pioneer-os-types"></span><h4>OS type<a class="headerlink" href="#os-type" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) target devices' OS types.</div>
</div>
<figure class="align-default" id="id26">
<a class="reference internal image-reference" href="../../_images/os_type_list.png"><img alt="Submenu （OS type）" src="../../_images/os_type_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.32 </span><span class="caption-text">Submenu （OS type）</span><a class="headerlink" href="#id26" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register an OS type.</div>
</div>
<figure class="align-default" id="id27">
<a class="reference internal image-reference" href="../../_images/registration_os_type_list.gif"><img alt="Registration page (Movement list)" src="../../_images/registration_os_type_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.33 </span><span class="caption-text">Registration page (Movement list)</span><a class="headerlink" href="#id27" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<table class="docutils align-left" id="id28">
<caption><span class="caption-number">表 3.19 </span><span class="caption-text">Registration page item list（OS type）</span><a class="headerlink" href="#id28" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restriction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>Item number</p></td>
<td><p>Displays an automatically numbered string of 36 characters.</p></td>
<td><p>ー</p></td>
<td><p>Automatic</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>OS type name</p></td>
<td><p>Input a name for the OS ty</p></td>
<td><p>〇</p></td>
<td><p>Manual</p></td>
<td><p>Maximum length 255 bytes</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>Device type</p></td>
<td><p>SV</p></td>
<td><p>Set to &quot;True&quot; if the target device is a Server device.</p></td>
<td><p>ー</p></td>
<td><p>List selection</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>NW</p></td>
<td><p>Set to &quot;True&quot; if the target device is a Network device.</p></td>
<td><p>ー</p></td>
<td><p>List selection</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-even"><td><p>ST</p></td>
<td><p>Set to &quot;True&quot; if the target device is a Storage device.</p></td>
<td><p>ー</p></td>
<td><p>List selection</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Remarks</p></td>
<td><p>Free description field</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>ー</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="movement-list">
<span id="ansible-pioneer-movement-list"></span><h4>Movement list<a class="headerlink" href="#movement-list" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view.register/edit/discard) Movement information.</div>
</div>
<figure class="align-default" id="id29">
<a class="reference internal image-reference" href="../../_images/movement_list2.png"><img alt="Submenu (Movement list)" src="../../_images/movement_list2.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.34 </span><span class="caption-text">Submenu (Movement list)</span><a class="headerlink" href="#id29" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Movement information.</div>
</div>
<figure class="align-default" id="id30">
<a class="reference internal image-reference" href="../../_images/registration_movement_list2.gif"><img alt="Registration page (Movement list)" src="../../_images/registration_movement_list2.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.35 </span><span class="caption-text">Registration page (Movement list)</span><a class="headerlink" href="#id30" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1  Select from data fetched from <a class="reference internal" href="ansible_common.html#ansible-common-aac-sync"><span class="std std-ref">Ansible Automation Controller data synchronization</span></a>.</div>
</div>
</div>
</li>
</ol>
</section>
<section id="interactive-type">
<span id="ansible-pioneer-dialog-type-list"></span><h4>Interactive type<a class="headerlink" href="#interactive-type" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) Interactive types.</div>
<div class="line">In Ansible-Pioneer, define differences per OS type in Interactive files, and dialogue files with the same purpose are grouped together as 'Interactive type' to absorb (extract) differences.</div>
</div>
<figure class="align-default" id="id31">
<a class="reference internal image-reference" href="../../_images/dialog_type_list_v2-4.png"><img alt="Submenu （Interactive type）" src="../../_images/dialog_type_list_v2-4.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.36 </span><span class="caption-text">Submenu （Interactive type）</span><a class="headerlink" href="#id31" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register an Interactive type.</div>
</div>
<figure class="align-default" id="id32">
<a class="reference internal image-reference" href="../../_images/registration_dialog_type_list_v2-4.gif"><img alt="Registration page（Interactive type）" src="../../_images/registration_dialog_type_list_v2-4.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.37 </span><span class="caption-text">Registration page（Interactive type）</span><a class="headerlink" href="#id32" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<table class="docutils align-left" id="id33">
<caption><span class="caption-number">表 3.20 </span><span class="caption-text">Registration page item list（Interactive type）</span><a class="headerlink" href="#id33" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 15.0%" />
<col style="width: 50.0%" />
<col style="width: 5.0%" />
<col style="width: 10.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><p>Displays an automatically numbered string of 36 characters.</p></td>
<td><p>ー</p></td>
<td><p>Automatic</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>Interactive type name</p></td>
<td><p>Input a name for the Interactive type.</p></td>
<td><p>〇</p></td>
<td><p>List selection</p></td>
<td><p>Maximum length 255 bytes</p></td>
</tr>
<tr class="row-even"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>Maximum 4000 bytes</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="interactive-file-colletion">
<span id="ansible-pioneer-dialog-files"></span><h4>Interactive file colletion<a class="headerlink" href="#interactive-file-colletion" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) user created interactive files</div>
<div class="line">For more information regarding writing Interactive files, see <a class="reference internal" href="#ansible-pioneer-write-dialog-file-ansible-pioneer"><span class="std std-ref">Writing Interactive files （Ansible-Pioneer）</span></a>.</div>
<div class="line">Register Interactive file for each Interactive type and OS type combination.</div>
<div class="line">In order to have multiple OS work for 1 Interactive type, the user must register an Interactive file for each OS type.</div>
</div>
<figure class="align-default" id="id34">
<a class="reference internal image-reference" href="../../_images/dialog_list.png"><img alt="Submenu （Interactive file colletion）" src="../../_images/dialog_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.38 </span><span class="caption-text">Submenu （Interactive file colletion）</span><a class="headerlink" href="#id34" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Interactive file materials.</div>
</div>
<figure class="align-default" id="id35">
<a class="reference internal image-reference" href="../../_images/registration_dialog_list.gif"><img alt="Registration page（Interactive file colletion）" src="../../_images/registration_dialog_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.39 </span><span class="caption-text">Registration page（Interactive file colletion）</span><a class="headerlink" href="#id35" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line"><strong>When variables defined within Interactive files are extracted</strong></div>
<div class="line">The variables defined within Interactive files are extracted by internal processes.The variables can have specific values registered to them in <a class="reference internal" href="#ansible-pioneer-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a></div>
<div class="line">The variables are not extracted in realtime, meaning that it may take time before they can be used in <a class="reference internal" href="#ansible-pioneer-substitution-value-auto-registration-setting"><span class="std std-ref">Substitute value auto registration settings</span></a> .</div>
</div>
</div>
</section>
<section id="movement-interactive-type-link">
<span id="ansible-pioneer-movement-details"></span><h4>Movement-Interactive type link<a class="headerlink" href="#movement-interactive-type-link" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) links between Movements and Interactive types.</div>
</div>
<figure class="align-default" id="id36">
<a class="reference internal image-reference" href="../../_images/movement_dialog_link.png"><img alt="Submenu （Movement-Interactive type link）" src="../../_images/movement_dialog_link.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.40 </span><span class="caption-text">Submenu （Movement-Interactive type link）</span><a class="headerlink" href="#id36" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Movement and Interactive type links.</div>
</div>
<figure class="align-default" id="id37">
<a class="reference internal image-reference" href="../../_images/registration_movement_dialog_link.gif"><img alt="Registration page（Movement-Interactive type link）" src="../../_images/registration_movement_dialog_link.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.41 </span><span class="caption-text">Registration page（Movement-Interactive type link）</span><a class="headerlink" href="#id37" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<table class="docutils align-left" id="id38">
<caption><span class="caption-number">表 3.21 </span><span class="caption-text">Registration page item list（Movement-Interactive type linkの場合）</span><a class="headerlink" href="#id38" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 15.0%" />
<col style="width: 50.0%" />
<col style="width: 5.0%" />
<col style="width: 10.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Input required</p></th>
<th class="head"><p>Input method</p></th>
<th class="head"><p>Restrictions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><div class="line-block">
<div class="line">Displays an automatically numbered string of 36 characters.</div>
</div>
</td>
<td><p>ー</p></td>
<td><p>Automatic</p></td>
<td><p>ー</p></td>
</tr>
<tr class="row-odd"><td><p>Movement</p></td>
<td><div class="line-block">
<div class="line">Displays <span class="menuselection">Movement names</span> registered in <span class="menuselection">Ansible-Legacy ▶ Movement list</span>.</div>
<div class="line">Select Movement.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>List selection</p></td>
<td><p>Same as description.</p></td>
</tr>
<tr class="row-even"><td><p>Interactive file type</p></td>
<td><div class="line-block">
<div class="line">Displays <span class="menuselection">Interactive types</span> registered in <span class="menuselection">Ansible-Pioneer ▶ Interactive type</span>.</div>
<div class="line">Select the Interactive type for the Interactive file.</div>
<div class="line">The Interactive file linked to the execution target's OS type and Interactive type can be executed.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>List selection</p></td>
<td><p>Same as description.</p></td>
</tr>
<tr class="row-odd"><td><p>Include order</p></td>
<td><div class="line-block">
<div class="line">Input an include order (1～) for the Playbook.</div>
<div class="line">The included Playbook files will be executed in order based on their include order (rising).</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>Manual</p></td>
<td><p>1～2,147,483,647</p></td>
</tr>
<tr class="row-even"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
<td><p>ー</p></td>
<td><p>Manual</p></td>
<td><p>Maximum length 4000 bytes</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="substitute-value-auto-registration-settings">
<span id="ansible-pioneer-substitution-value-auto-registration-setting"></span><h4>Substitute value auto registration settings<a class="headerlink" href="#substitute-value-auto-registration-settings" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Links (view/register/edit/discard) parameter item setting values and Movement variables.</div>
</div>
<p><a href="#id12"><span class="problematic" id="id13">|</span></a>The registered information is displayed in <span class="menuselection">Ansible-Pioneer ▶ Substitute value management</span> and <span class="menuselection">Ansible-Pioneer ▶ Target host</span> when executed by internal processes.</p>
<figure class="align-default" id="id39">
<a class="reference internal image-reference" href="../../_images/substitution_value_auto_registration_setting1.png"><img alt="Submenu (Substitute value auto registration settings)" src="../../_images/substitution_value_auto_registration_setting1.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.42 </span><span class="caption-text">Submenu (Substitute value auto registration settings)</span><a class="headerlink" href="#id39" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register a link between the Movement variables and Parameter sheet item setting values</div>
</div>
<figure class="align-default" id="id40">
<a class="reference internal image-reference" href="../../_images/registration_substitution_value_automatic_setting1.gif"><img alt="Registration page (Substitute value auto registration settings)" src="../../_images/registration_substitution_value_automatic_setting1.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.43 </span><span class="caption-text">Registration page (Substitute value auto registration settings)</span><a class="headerlink" href="#id40" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition tip" id="ansible-pioneer-parashi-substitution">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1:Only required if the Parammeter sheet has Bundles active.</div>
<div class="line">In order to link Movement variables with Parameter sheets with bundles, the user must input a substitute order for the Parameter sheet (From) in <span class="menuselection">Ansible-Pioneer ▶ Substitute value auto registration settings</span>.</div>
<div class="line">See the following figure for more information regarding the relationship between bundled parameter sheets and Substitute value auto registration settings.</div>
</div>
<figure class="align-default">
<a class="reference internal image-reference" href="../../_images/parameter.png"><img alt="Register Substitute value auto registration settings when using Bundled parameter sheets." src="../../_images/parameter.png" style="width: 600px;" />
</a>
</figure>
</div>
<div class="admonition tip" id="ansible-pioneer-substitution">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※2 <strong>Input Substitute order</strong></div>
</div>
<div class="line-block">
<div class="line">In Ansible-Legacy, if no Substitute order is input, the variables will be handled as normal variables.</div>
<div class="line">If Substitute order has been input, they will be handled as multiple specific value variables. Even If the Multiple Specific Value Variable doesnt need multiple specific values,</div>
<div class="line-block">
<div class="line">(Specific value can be 1 or more),  make sure to input a substitute order.</div>
</div>
<div class="line">Substitute orders does not need to succeed particular Multiple specific value variables.</div>
<div class="line"><br /></div>
<div class="line">e.g.) Input Substitute order for multiple specific value variables and executing.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">In :menuselection:<a href="#id14"><span class="problematic" id="id15">`</span></a>Ansible-Pioneer --&gt; Substitute value auto registration settings`s link Role variables and th setting values for items registered to the Parameter sheets.</div>
</div>
<table class="docutils align-left" id="id41">
<caption><span class="caption-number">表 3.22 </span><span class="caption-text">Parameter sheet registration contents</span><a class="headerlink" href="#id41" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p><strong>Host name</strong></p></th>
<th class="head" rowspan="2"><p><strong>Operation name</strong></p></th>
<th class="head" colspan="4"><p><strong>Parameter</strong></p></th>
</tr>
<tr class="row-even"><th class="head"><p><strong>Item1</strong></p></th>
<th class="head"><p><strong>Item2</strong></p></th>
<th class="head"><p><strong>Item3</strong></p></th>
<th class="head"><p><strong>Item4</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>test-host</p></td>
<td><p>test-ope</p></td>
<td><p>value1</p></td>
<td><p>value2</p></td>
<td><p>value3</p></td>
<td><p>value4</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-left" id="id42">
<caption><span class="caption-number">表 3.23 </span><span class="caption-text">Substitute value auto registration settings registration contents</span><a class="headerlink" href="#id42" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 36.4%" />
<col style="width: 18.2%" />
<col style="width: 27.3%" />
<col style="width: 18.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Menu name</p></th>
<th class="head"><p>Item</p></th>
<th class="head"><p>Variable name</p></th>
<th class="head"><p>Substitute order</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item1</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item2</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item3</p></td>
<td><p>VAR_substitutionA</p></td>
<td><p>20</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item1</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item2</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>sample-menu</p></td>
<td><p>Item3</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>sample-menu</p></td>
<td><p>Item4</p></td>
<td><p>VAR_substitutionB</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">When executed, the host variable file (host_vars/test-host) will have the variables registered in Substitute value auto registration settings output similarly to the example below.</div>
<div class="line"><strong>Output to Host variable file</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_substitutionA</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value2</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value3</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value1</span>
<span class="nt">VAR_substitutionB</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value3</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value4</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value2</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="admonition tip" id="host">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Output to Host variable file</strong></div>
<div class="line">Only variables registered in the Substitute value auto registration settings menu are output to the Host variable file when executed.</div>
<div class="line">The same goes for multistage variables. Only member variables with specific values registered will be output.</div>
<div class="line"><br /></div>
</div>
</div>
<div class="admonition tip" id="ansible-pioneer-file-and-templete">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Examples using Playbook variables linked to File embedded variables and Template embedded variables</strong></div>
<div class="line">e.g.)  If the File embedded variable, CPF_test, and Template embedded variable, TPF_sample, is linked to the Playbook variable in the Substitute value auto registration settings menu.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Register the following in:menuselection:<cite>Ansible common --&gt; File management</cite> / <span class="menuselection">Ansible common ▶ Template management</span>.</div>
</div>
<table class="docutils align-left" id="id43">
<caption><span class="caption-number">表 3.24 </span><span class="caption-text">Template management registration contents</span><a class="headerlink" href="#id43" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 55.6%" />
<col style="width: 44.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Template embedded variable name</p></th>
<th class="head"><p>Template file</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_sample</p></td>
<td><p>sample.tpl</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">After creating &quot;Ansible common:File management:File embedded variable name&quot; and &quot;Ansible common:Template management:Template embedded variable name&quot; as Parameter sheet items in <span class="menuselection">Define/Create parameter sheet</span> , register File embedded variables and Template embedded variables as the Parameter sheets' item values.</div>
</div>
<figure class="align-default" id="id44">
<a class="reference internal image-reference" href="../../_images/menu_create.png"><img alt="Define/Create parameter sheet" src="../../_images/menu_create.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.44 </span><span class="caption-text">Define/Create parameter sheet</span><a class="headerlink" href="#id44" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">In <span class="menuselection">Ansible-Pioneer ▶ Substitute value auto registration settings</span>, link the Playbook variable and the Item setting value of the Parameter sheet registered in Step 2. and Execute Ansible in  <span class="menuselection">Ansible-Legacy ▶ Execute</span>.</div>
</div>
<table class="docutils align-left" id="id45">
<caption><span class="caption-number">表 3.25 </span><span class="caption-text">Substitute value auto registration settings registration contents</span><a class="headerlink" href="#id45" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 45.5%" />
<col style="width: 27.3%" />
<col style="width: 27.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Menu name</p></th>
<th class="head"><p>Item</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sample parameter sheet</p></td>
<td><p>File management</p></td>
<td><p>VAR_filetest</p></td>
</tr>
<tr class="row-odd"><td><p>Sample parameter sheet</p></td>
<td><p>Template management</p></td>
<td><p>VAR_temptest</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Click the <span class="menuselection">Ansible-Pioneer ▶ Confirm execution status</span>'s <span class="guilabel">Check substitute value</span> button to check that the  '{{ CPF_test }}' and '{{ TPF_sample }}' are dispalyed to the Specific value.</div>
</div>
<figure class="align-default" id="id46">
<a class="reference internal image-reference" href="../../_images/general_operations_note.png"><img alt="Confirm execution status Substitute value management" src="../../_images/general_operations_note.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.45 </span><span class="caption-text">Confirm execution status Substitute value management</span><a class="headerlink" href="#id46" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
</ol>
</div>
</section>
<section id="execute">
<span id="ansible-pioneer-execution"></span><h4>Execute<a class="headerlink" href="#execute" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Select a Movement from the Movement list.</div>
<div class="line">Select an Operation from the Operation list.</div>
<div class="line">There are 3 different types of execution types. Clicking the one of the execution buttons moves the user to <span class="menuselection">Ansible-LegacyRole ▶ Confirm execution status</span> where the execution process will start</div>
</div>
<figure class="align-default" id="id47">
<a class="reference internal image-reference" href="../../_images/execution_screen2.gif"><img alt="Execute menu" src="../../_images/execution_screen2.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.46 </span><span class="caption-text">Execute menu</span><a class="headerlink" href="#id47" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">See the following for information regarding the different execution types.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Execute</strong></div>
<div class="line">Press the <span class="guilabel">Execute</span> button to run operations to the execution target.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Dry run</strong></div>
<div class="line">Clicking the <span class="guilabel">Dry run</span> button allows the user to perform a dry run where the operation is not executed to the execution target.</div>
<div class="line">Dry runs will execute the Ansible-Playbook command's --check parameter.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Check Parameter</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Parameter</span> button allows users to check that the information registered in <span class="menuselection">Ansible-Pioneer ▶ Substitute value auto registration settings</span> and the Operation and Movement link information is displayed to  <span class="menuselection">Ansible-Legacy ▶ Substitute value management</span> and <span class="menuselection">Ansible-Legacy ▶ Target host</span> without actually executing to the execution target.</div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line-block">
<div class="line"><strong>Specify reservation date</strong></div>
</div>
<div class="line">Inputing a Reservation date allows users to reserve executions.</div>
<div class="line">Reservation dates can only contain a date/time later than the current date/time.</div>
</div>
</div>
</section>
<section id="confirm-execution-status">
<span id="ansible-pioneer-check-operation-status"></span><h4>Confirm execution status<a class="headerlink" href="#confirm-execution-status" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Allows users to monitor execution statuses.</div>
</div>
<figure class="align-default" id="id48">
<a class="reference internal image-reference" href="../../_images/check_operation_status2.png"><img alt="Submenu (Confirm execution status)" src="../../_images/check_operation_status2.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.47 </span><span class="caption-text">Submenu (Confirm execution status)</span><a class="headerlink" href="#id48" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Execution status display</strong></div>
<div class="line">The status matching the Execution status is displayed.</div>
<div class="line">The execution log and error log also displays detailed information regarding the execution status.</div>
<div class="line">If the execute type is &quot;Execute&quot;, &quot;Normal&quot; will be displayed. If Dry run is selected, &quot;Dry run&quot;. If Parameter check is selected, &quot;Parameter check&quot; will be displayed.</div>
<div class="line">If the status ends in an unexpected error, a message will be displayed in the error log.</div>
<div class="line">&quot;Call Conductor&quot; displays which Conductor was executed. This field will be blank if directly executed from Ansible-LegacyRole.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm Target host</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Target host</span> button displays <span class="menuselection">Ansible-LegacyRole ▶ Target host</span> where hosts from Operations and Movements are displayed.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Confirm Substitute value</strong></div>
<div class="line">Clicking the <span class="guilabel">Check Sbstitute value</span> button displays <span class="menuselection">Ansible-LegacyRole ▶ Substitute value management</span> where users can see Specific values and Variables from Operations and Movements.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Emergency stop/Delete reservation</strong></div>
<div class="line">Users can press the <span class="guilabel">Emergency stop</span> button to stop the operation.</div>
<div class="line">If the status was &quot;Reserved execution&quot;, the <span class="guilabel">Delete reservation</span> button will be displayed. Check the <span class="guilabel">Delete reservation</span> button to delete the reservation</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Display execution log</strong></div>
<div class="line">When Ansible Automation Controller is executed, the Playbook is executed in units of the device to be built grouped by the item values of  <span class="menuselection">Ansible common ▶ Device list</span>'s  <span class="menuselection">User</span> ・ <span class="menuselection">Password</span> ・<span class="menuselection">ssh secret key file</span> ・ <span class="menuselection">Passphrase</span> ・ <span class="menuselection">Connection type</span> ・ <span class="menuselection">Instance group</span>, which splits the execution logs.</div>
<div class="line">By specifying the number of job slices in the <span class="menuselection">Option parameter</span> in  <span class="menuselection">Ansible common ▶ Interface information</span> or <span class="menuselection">Ansible-Pioneer ▶ Movement list</span>, the grouped targets can be further divided into the number of specified job slices before the Playbook is executed and the execution log is further divided.</div>
<div class="line">If the execution log has been divided, the execution log will be divided into tabs, where the user can select which execution log they want to see.</div>
</div>
<div class="line-block">
<div class="line">The log file names displayed in the execution log's pulldown menu are as following.</div>
<div class="line">exec.log: Log file containing all execution logs.</div>
<div class="line">Not exec.log: Divided execution log. The file convention are as following.</div>
<div class="line">exec_&lt;Group number&gt;_&lt;Serial number&gt;</div>
</div>
<table class="docutils align-left" id="id49">
<caption><span class="caption-number">表 3.26 </span><span class="caption-text">Divided execution log file naming convention</span><a class="headerlink" href="#id49" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 28.6%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Group number</p></td>
<td><p>The Execution target's serial number grouped by the <span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">User</span> ・ <span class="menuselection">Password</span> ・ <span class="menuselection">ssh secret key file</span> ・ <span class="menuselection">Passphrase</span> ・ <span class="menuselection">Connection type</span> ・ <span class="menuselection">Instance group</span> items.</p></td>
</tr>
<tr class="row-odd"><td><p>Serial number</p></td>
<td><div class="line-block">
<div class="line">Serial number from 1 that divides the group by setting the number of job slices.</div>
<div class="line">If 0, no division of job slicing was done.</div>
</div>
</td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line"><strong>Search log</strong></div>
<div class="line">Users can filter information to narrow down information in the execution log and the error log.</div>
<div class="line">Input the string the user wants to search for and tick the &quot;Corresponding lines only&quot; checkbox to view only the lines corresponding to the string.</div>
<div class="line">The refresh interval and maximum display lines can be configured by changing the &quot;Status monitoring cycle item&quot; and &quot;Progress status display lines&quot; items in <span class="menuselection">Ansible common ▶ Interface information</span>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Input data</strong></div>
<div class="line">Users can download executed Playbooks.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-the-linkage-between-the-input-data-used-during-ansible-execution-and-ita-menu"><span class="std std-ref">Link between ITA menus and Input data when executing Ansible</span></a>.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Result data</strong></div>
<div class="line">Users can download execution logs and error logs.</div>
<div class="line">For more information, see <a class="reference internal" href="#ansible-pioneer-the-linkage-between-the-output-data-used-during-ansible-execution-and-ita-menu"><span class="std std-ref">Result data created when executing Ansible</span></a>.</div>
</div>
</li>
</ol>
</section>
<section id="execution-management">
<span id="ansible-pioneer-execution-list"></span><h4>Execution management<a class="headerlink" href="#execution-management" title="Link to this heading">¶</a></h4>
<blockquote>
<div><div class="line-block">
<div class="line">Allows userse to view execution histories.</div>
<div class="line">Specify search conditions and press the <span class="guilabel">Filter</span> button to view a table of executions.</div>
<div class="line">Pressing the <span class="guilabel">Details</span> button moves the user to <span class="menuselection">Ansible-Pioneer ▶ Confirm execution status</span>  where they can view detailed information regarding the execution status.</div>
</div>
</div></blockquote>
<figure class="align-default" id="id50">
<a class="reference internal image-reference" href="../../_images/execution_list1.png"><img alt="Submenu (Execution management)" src="../../_images/execution_list1.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.48 </span><span class="caption-text">Submenu (Execution management)</span><a class="headerlink" href="#id50" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><div class="line-block">
<div class="line">The items found in the page are as following.</div>
</div>
<table class="docutils align-left" id="id51">
<caption><span class="caption-number">表 3.27 </span><span class="caption-text">View page item list (Execution management)</span><a class="headerlink" href="#id51" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 12.5%" />
<col style="width: 62.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="3"><p>Execution number.</p></td>
<td><p>Displays an automatically given unique ID (36 characters)</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution type</p></td>
<td><p>Displays the Execution type.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Status</p></td>
<td><p>Displays the status of the Execution.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution engine</p></td>
<td><p>Displays the Execution engine used.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Called Conductor</p></td>
<td><p>Displays the Conductor name if executed from Conductor.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution user</p></td>
<td><p>Displays the user who executed the Ansible.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Registration date</p></td>
<td><p>Displays when the Execute button was clicked.</p></td>
</tr>
<tr class="row-odd"><td rowspan="8"><p>Movement</p></td>
<td colspan="2"><p>ID</p></td>
<td><p>Displays the selected Movement ID.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>name</p></td>
<td><p>Displays the selected Movement name</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Delay timer</p></td>
<td><p>Displays the delay timer value configured to the Movement.</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>Ansible use information</p></td>
<td><p>Host specification format</p></td>
<td><p>Displays the selected Movement's Host specification format.</p></td>
</tr>
<tr class="row-odd"><td><p>WinRM connection</p></td>
<td><p>Displays the selected Movement's WinRM connection.</p></td>
</tr>
<tr class="row-even"><td><p>Header section</p></td>
<td><p>Displays the selected Movement's header section.</p></td>
</tr>
<tr class="row-odd"><td><p>ansible.cfg</p></td>
<td><p>Allows users to download the selected Movement's ansible.cfg file.</p></td>
</tr>
<tr class="row-even"><td><p>Ansible Automation Controller use information</p></td>
<td><p>Execution environment</p></td>
<td><p>Displays the selected Movement's execution environment.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Operation</p></td>
<td colspan="2"><p>No.</p></td>
<td><p>Displays the selected Operation's ID</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Name</p></td>
<td><p>Displays the selected Operation's name</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Input data</p></td>
<td><p>Allows users to download the input data in a Zip file</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Result data</p></td>
<td><p>Allows users to download the result data in a Zip file.</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>Execution status</p></td>
<td colspan="2"><p>Reservation date</p></td>
<td><p>Displays the reservation date if the execution is reserved.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Start date</p></td>
<td><p>Displays when the execution will start.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>End date</p></td>
<td><p>Displays when the execution will end.</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Collect status</p></td>
<td colspan="2"><p>Status</p></td>
<td><p>Displays the Connection function's status.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>Collection log</p></td>
<td><p>Allows users to downlaod the Collection function's log.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Conductor instance number</p></td>
<td><p>Displays the Conductor instance number if executed from Conductor.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="target-host">
<span id="ansible-pioneer-target-host"></span><h4>Target host<a class="headerlink" href="#target-host" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Allows users to view Target hosts.</div>
</div>
<figure class="align-default" id="id52">
<a class="reference internal image-reference" href="../../_images/target_host1.png"><img alt="Submenu (Target host)" src="../../_images/target_host1.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.49 </span><span class="caption-text">Submenu (Target host)</span><a class="headerlink" href="#id52" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the view page are as following.</div>
</div>
<table class="docutils align-left" id="id53">
<caption><span class="caption-number">表 3.28 </span><span class="caption-text">View page item list (Target host)</span><a class="headerlink" href="#id53" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 27.3%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Item number</p></td>
<td><p>Displays an automatically given unique ID (36 characters)</p></td>
</tr>
<tr class="row-odd"><td><p>Execution number</p></td>
<td><p>Displays the Execution number when executed.</p></td>
</tr>
<tr class="row-even"><td><p>Operation</p></td>
<td><p>Displays the Operation when executed.</p></td>
</tr>
<tr class="row-odd"><td><p>Movement name</p></td>
<td><p>Displays the Movement when executed.</p></td>
</tr>
<tr class="row-even"><td><p>Host name</p></td>
<td><p>Displays the Target host when Executed.</p></td>
</tr>
<tr class="row-odd"><td><p>Remarks</p></td>
<td><p>Free description field</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
<section id="substitute-value-management">
<span id="ansible-pioneer-substitution-value-list"></span><h4>Substitute value management<a class="headerlink" href="#substitute-value-management" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Displays the Variable's specific values.</div>
</div>
<figure class="align-default" id="id54">
<a class="reference internal image-reference" href="../../_images/substitution_value_list2.png"><img alt="Submenu (Substitute value management)" src="../../_images/substitution_value_list2.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.50 </span><span class="caption-text">Submenu (Substitute value management)</span><a class="headerlink" href="#id54" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the page are as following.</div>
</div>
<table class="docutils align-left" id="id55">
<caption><span class="caption-number">表 3.29 </span><span class="caption-text">View page item list (Substitute value management)</span><a class="headerlink" href="#id55" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" colspan="3"><p>Item</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="3"><p>Item number</p></td>
<td><p>Displays an automatically given unique ID (36 characters).</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Execution number</p></td>
<td><p>Displays the Execution number when executed.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Operation</p></td>
<td><p>Displays the selected Operation.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Movement name</p></td>
<td><p>Displays the selected Movement.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Host name</p></td>
<td><p>Displays the selected Target host.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Movement name:Variable name</p></td>
<td><p>Displays the Variable name when executed</p></td>
</tr>
<tr class="row-even"><td rowspan="3"><dl class="simple">
<dt>Specific</dt><dd><p>value</p>
</dd>
</dl>
</td>
<td rowspan="2"><p>String</p></td>
<td><p>Sensitive settings</p></td>
<td><p>Displays either &quot;True&quot; or &quot;False&quot;.</p></td>
</tr>
<tr class="row-odd"><td><p>Value</p></td>
<td><p>Displays the Variable's Specific value when executed.</p>
<ul>
<li><div class="line-block">
<div class="line">If the <span class="menuselection">Sensitive settings</span> are set to &quot;True&quot;</div>
<div class="line">The Specific value input to the Parameter sheet will be encrypted and not be viewable on ITA.
The variable's Specific value has its encrypted contents configured by ansible-vault.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">If the <span class="menuselection">Sensitive settings</span> are set to &quot;False&quot;</div>
<div class="line">The Specific value input to the Parameter sheets will be displayed.</div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>File</p></td>
<td><p>Displays the File name linked to the Variables.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p>Substitute order</p></td>
<td><p>If the variable is a Multiple Specific Value Variable, the Substitute order will be displayed.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p>Remarks</p></td>
<td><p>Free description field</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
</section>
</section>
<section id="writing-interactive-files-ansible-pioneer">
<span id="ansible-pioneer-write-dialog-file-ansible-pioneer"></span><h2><span class="section-number">3.6. </span>Writing Interactive files （Ansible-Pioneer）<a class="headerlink" href="#writing-interactive-files-ansible-pioneer" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Ansible-Pioneer sends ITA original modules to Ansible.</div>
</div>
<div class="line-block">
<div class="line">This section explains the Terminology used in the following sections.</div>
</div>
<table class="docutils align-left" id="id56">
<caption><span class="caption-number">表 3.30 </span><span class="caption-text">Terminology</span><a class="headerlink" href="#id56" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 16.7%" />
<col style="width: 83.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Terminology</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Command prompt</p></td>
<td><p>Strings waiting for command input when ssh connecting to the target server from a terminal,</p></td>
</tr>
<tr class="row-odd"><td><p>Standard output</p></td>
<td><p>Command process result output from the Command prompt after input a command to the target server.</p></td>
</tr>
</tbody>
</table>
<figure class="align-default" id="id57">
<img alt="Command prompt standard output" src="../../_images/ansible_pioneer_command_prompt.png" />
<figcaption>
<p><span class="caption-number">図 3.51 </span><span class="caption-text">Command prompt standard output</span><a class="headerlink" href="#id57" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="interactive-file-structure">
<h3><span class="section-number">3.6.1. </span>Interactive file structure<a class="headerlink" href="#interactive-file-structure" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Interactive files are configured by 2 types of sections.</div>
</div>
<table class="docutils align-left" id="id58">
<caption><span class="caption-number">表 3.31 </span><span class="caption-text">Interactive file section list</span><a class="headerlink" href="#id58" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Section name</p></th>
<th class="head"><p>Application</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>conf</p></td>
<td><p>Specify the timeout value according to timeout parameter.
timeout value: 1~3600(unit:second)</p></td>
</tr>
<tr class="row-odd"><td><p>exe_list</p></td>
<td><p>Construct the target host with 4 kinds of dialog commands.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">This section describes the conf session's timeout parameter.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）conf session's timeout parameter example</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Comment</span>
<span class="nt">conf</span><span class="p">:</span>
<span class="nt">△△timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">exec_list</span><span class="p">:</span>

<span class="l l-Scalar l-Scalar-Plain">△:half width space</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">ITA original module connects to the target through SSH or telnet connection when the Interactive file is executed.</div>
<div class="line">Depending on the case, users might need to go through a password authentication at the start of the exec_list session proccess.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）Password authentication input example.</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Wait for ssh connection password input prompt and input the correct password.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*assword&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password&#39;</span>
</pre></div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">This section explains the different interactive modules.</div>
</div>
</section>
<section id="interactive-module">
<h3><span class="section-number">3.6.2. </span>Interactive Module<a class="headerlink" href="#interactive-module" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">There are 4 kinds of dialog commands as follows.</div>
</div>
<table class="docutils align-left" id="id59">
<caption><span class="caption-number">表 3.32 </span><span class="caption-text">Interactive Module list</span><a class="headerlink" href="#id59" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Application</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>expect</p></td>
<td><p>Input commands after  waiting for the command prompt from the target host.</p></td>
</tr>
<tr class="row-odd"><td><p>state</p></td>
<td><p>Input the command to target host. The contents of the standard output until the prompt is output to the standard output are analyzed by external shell, and the result is determined.</p></td>
</tr>
<tr class="row-even"><td><p>command</p></td>
<td><p>Loops and conditional branching can be performed before and after inputting commands to the target host.</p></td>
</tr>
<tr class="row-odd"><td><p>localaction</p></td>
<td><p>Input command in the environment Ansible Core/Ansible Automation Controller is executed.</p></td>
</tr>
</tbody>
</table>
<section id="expect-module">
<h4>expect module<a class="headerlink" href="#expect-module" title="Link to this heading">¶</a></h4>
<section id="overview">
<h5>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">Input commands after  waiting for the command prompt from the target host.</div>
<div class="line">The overview figure for the expect module are as following.</div>
</div>
<figure class="align-default">
<img alt="expect overview" src="../../_images/ansible-pioneer-expect-exec.png" />
</figure>
<div class="line-block">
<div class="line">①Waits for the output of the expected string (prompt) form the contents that the target host outputs for the standard input.</div>
<div class="line">②Inputs command specified by exec.</div>
<div class="line">③Waits for command prompt specified by the expect from the standard output of the command input in②.</div>
<div class="line">④Inputs command specified by exec.</div>
</div>
</section>
<section id="format">
<h5>Format<a class="headerlink" href="#format" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The expect module format are as following.</div>
</div>
</section>
<section id="input-example">
<h5>Input example<a class="headerlink" href="#input-example" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">This section cotnains expect module input examples.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）expect module input example.</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wait for ssh connection password input prompt and input the correct password.</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*assword&#39;</span>
<span class="w">  </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password&#39;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="state-module">
<h4>state module<a class="headerlink" href="#state-module" title="Link to this heading">¶</a></h4>
<section id="id16">
<h5>Overview<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">After submitting commands to the working host and waiting for the command prompt, the contents of the standard output are analysed by an external Shell to determine the results.</div>
<div class="line">The overview figure for the state module are as following.</div>
</div>
<figure class="align-default">
<img alt="state module overview" src="../../_images/ansible-pioneer-state.png" />
</figure>
<div class="line-block">
<div class="line">①Wait for the output of the expected string (prompt) form the contents that the target host outputs for the standard input.</div>
<div class="line">②Input command specified by state.</div>
<div class="line">③Wait for command prompt specified by the expect from the standard output of the command input in②.</div>
<div class="line">④Save standard output contents to the file specified by stdout_file.</div>
<div class="line">⑤grep the contents of the stdout_file with the word(s) specified with parameter.</div>
<div class="line">⑥Inputs return so the command prompt can wait for new commands after the process.</div>
</div>
</section>
<section id="id17">
<h5>Format<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">statemodule format are as following.</div>
</div>
</section>
<section id="input-examples">
<h5>Input examples<a class="headerlink" href="#input-examples" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">This section contains state module Input examples</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）state module Input examples</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat the hosts file and grep the displayed results with parameter value.</span>
<span class="c1"># If there is line containing 127.0.0.1 or lalhost, the result is determined as normal and proceed to the next.</span>
<span class="c1"># If there is no such line, the result is determined as abnormal and the interactive file is terminated abnormally.</span>
<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cat</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">parameter</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;127.0.0.1&#39;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;localhost&#39;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.）Using success_exit</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat the hosts file and grep the displayed results with parameter value.</span>
<span class="c1"># If there is line containing 127.0.0.1 or lalhost, the result is determined as normal and proceed to the next.</span>
<span class="c1"># 対象If there is no such line, the result is determined as abnormal and the interactive file is terminated abnormally.</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cat</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">parameter</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;127.0.0.1&#39;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;localhost&#39;</span>
<span class="w">    </span><span class="nt">success_exit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.）Using ignore_errors</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat the hosts file and grep the displayed results with parameter value.</span>
<span class="c1"># If there is line containing 127.0.0.1 or lalhost, the result is determined as normal and proceed to the next.</span>
<span class="c1"># If there is no such line, the result is determined as abnormal and proceed to the next according to the ignore_errors:yes settings.</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cat</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">   </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">parameter</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;127.0.0.1&#39;</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;localhost&#39;</span>
<span class="w">   </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.）Using shell</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat the hosts file and evaluate the contents output by the user created shell.</span>
<span class="c1"># Parameter value is given using user created shell parameter.</span>
<span class="c1"># If a user created shell ends in an error, the interactive file will end.</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cat</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">   </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/tmp/grep.sh&#39;</span>
<span class="w">   </span><span class="nt">stdout_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/tmp/stdout.txt&#39;</span>
<span class="w">   </span><span class="nt">parameter</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;127.0.0.1&#39;</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;localhost&#39;</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.) User shell（/tmp/grep.sh） example</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">STDOUT</span><span class="o">=</span>/tmp/STDOUT.tmp
<span class="nv">STDERR</span><span class="o">=</span>/tmp/STDERR.tmp
cat<span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$3</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="w"> </span>&gt;<span class="si">${</span><span class="nv">STDOUT</span><span class="si">}</span><span class="w"> </span><span class="m">2</span>&gt;<span class="si">${</span><span class="nv">STDERR</span><span class="si">}</span>
<span class="nv">RET</span><span class="o">=</span><span class="nv">$?</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$RET</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span><span class="nv">EXIT_CODE</span><span class="o">=</span><span class="nv">$RET</span>
<span class="k">else</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-s<span class="w"> </span><span class="si">${</span><span class="nv">STDERR</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">       </span><span class="nv">EXIT_CODE</span><span class="o">=</span><span class="m">1</span>
<span class="w">   </span><span class="k">else</span>
<span class="w">       </span><span class="nv">CNT</span><span class="o">=</span><span class="sb">`</span>cat<span class="w"> </span><span class="si">${</span><span class="nv">STDOUT</span><span class="si">}</span><span class="sb">`</span>
<span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="si">${</span><span class="nv">CNT</span><span class="si">}</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">           </span><span class="nv">EXIT_CODE</span><span class="o">=</span><span class="m">1</span>
<span class="w">       </span><span class="k">else</span>
<span class="w">           </span><span class="nv">EXIT_CODE</span><span class="o">=</span><span class="m">0</span>
<span class="w">       </span><span class="k">fi</span>
<span class="w">   </span><span class="k">fi</span>
<span class="k">fi</span>
/bin/rm<span class="w"> </span>-rf<span class="w"> </span><span class="si">${</span><span class="nv">STDOUT</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">STDERR</span><span class="si">}</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span><span class="p">&amp;</span>&gt;1
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.）Save target host file to &quot;Result data&quot; with state.</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># cat the hosts file and save the displayed result to the file specified by stdout_file then proceed to the next.</span>
<span class="c1"># Will end in error if the default shell parameter is not configured. Set ignore_errors: yes in order to move to the next process.</span>
<span class="nt">exec_list</span><span class="p">:</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cat</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">   </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">stdout_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__workflowdir__</span><span class="nv"> </span><span class="s">}}/hosts&#39;</span>
<span class="w">   </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">   </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="command-module">
<h4>command module<a class="headerlink" href="#command-module" title="Link to this heading">¶</a></h4>
<section id="id18">
<h5>Overview<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">Loops and conditional branching can be performed before and after inputting commands to the target host.</div>
<div class="line">The overview figure for the command module are as following.</div>
</div>
<figure class="align-default">
<img alt="command module overview" src="../../_images/ansible_pioneer_command.png" />
</figure>
<div class="line-block">
<div class="line">①Wait for the output of the expected string (prompt) form the contents that the target host outputs for the standard input.</div>
<div class="line">②Input specific value for {{ commands }}</div>
<div class="line">③Waits for command prompt specified by the expect from the standard output of the command input in②.</div>
<div class="line">④Save the standard output contents to the register variable name specified with register.</div>
<div class="line">⑤Input specific value for {{ commands }}</div>
<div class="line">⑥Wait for command prompt specified by the expect from the standard output of the command input in⑤.</div>
<div class="line">⑦Save the standard output contents to the register variable name specified with register.</div>
<div class="line">⑧Inputs return so the command prompt can wait for new commands after the process.</div>
</div>
</section>
<section id="id19">
<h5>Format<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">commandmodule format are as following.</div>
</div>
</section>
<section id="ansible-pioneer-coomand-example">
<span id="id20"></span><h5>Input examples<a class="headerlink" href="#ansible-pioneer-coomand-example" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">This section contains examples for the command module Input examples.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.) command module Input examples</div>
</div>
<div class="line-block">
<div class="line">Inputting the following commands with the command module</div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>start<span class="w"> </span>httpd
systemctl<span class="w"> </span>start<span class="w"> </span>mysql
</pre></div>
</div>
<div class="line-block">
<div class="line">The variable's specific values used with &quot;with_items&quot; and the interactive file description are as following.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Interactive file contents</div>
</div>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;systemctl</span><span class="nv">  </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0</span><span class="nv"> </span><span class="s">}}</span><span class="nv">  </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.1</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">item.2</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">item.3</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_status_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">    </span><span class="c1"># item.0</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_service_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">   </span><span class="c1"># item.1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_prompt_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">    </span><span class="c1"># item.2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_timeout_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">   </span><span class="c1"># item.3</span>
</pre></div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Variable specific values using with_items</div>
</div>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VAR_status_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start</span>
<span class="nt">VAR_service_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">httpd</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql</span>
<span class="c1"># there are 2 specific values used by command.</span>
<span class="c1"># The required amount of specific values for the variables using prompt and timeout is 3.</span>
<span class="nt">VAR_prompt_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Command prompt</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Command prompt</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Command prompt</span>
<span class="nt">VAR_timeout_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.） Example using when</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w">   </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># If the ITA variable, VAR_hosts_make, is written in host variable file（The parameter sheet items and variables are linked in Susbtitute value auto registration), cat the host file.</span>
<span class="w">  </span><span class="c1"># If the variable are not written, the command is skipped.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cat /etc/hosts</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VAR_hosts_make is define</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.） Example using exec_when and register</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w">   </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># If the ITA variable, VAR_hosts_make, is written in host variable file, cat the host file.</span>
<span class="w">  </span><span class="c1"># If the variable are not written, the command is skipped.</span>
<span class="w">  </span><span class="c1"># Use cat to save the contents of the standard output hosts file to result_stdout.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cat /etc/hosts</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result_stdout</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VAR_hosts_make is define</span>

<span class="w">  </span><span class="c1"># If the ITA variable, VAR_hosts_make, is written in host variable file, cat the host file.</span>
<span class="w">  </span><span class="c1"># Input commad. If the variable are not written, the command is skipped.</span>
<span class="w">  </span><span class="c1"># Execute the command for the numbers of the specific values of the multiple specific value variables set in the with_items.</span>
<span class="w">  </span><span class="c1"># From the result of condition judgment for each loop, if &quot;ip address host name&quot; does not</span>
<span class="w">  </span><span class="c1"># correspond to the hosts file, Input command.  &quot;IP address Host name&quot; is added to the end of the hosts file.。</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;echo</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0</span><span class="nv"> </span><span class="s">}}</span><span class="nv">  </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.1</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VAR_hosts_make is define</span>
<span class="w">    </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_hosts_ip</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">     </span><span class="c1"># item.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_hosts_name</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">   </span><span class="c1"># item.1</span>
<span class="w">    </span><span class="nt">exec_when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result_stdout no match({{ item.0 }} *{{ item.1 }})</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.）Example using failed_when</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w">   </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Execute the command for the numbers of the specific values of the multiple specific value variables set in the with_items.</span>
<span class="w">  </span><span class="c1"># Configure auto startup for the service.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;systemctl</span><span class="nv"> </span><span class="s">enable</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_service_name_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">  </span><span class="c1"># item.0</span>

<span class="w">  </span><span class="c1"># Execute the command for the numbers of the specific values of the multiple specific value variables set in the with_items.</span>
<span class="w">  </span><span class="c1"># Start the service.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;systemctl</span><span class="nv"> </span><span class="s">start</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_service_name_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">  </span><span class="c1"># item.0</span>

<span class="w">  </span><span class="c1"># Execute the command for the numbers of the specific values of the multiple specific value variables set in the with_items.</span>
<span class="w">  </span><span class="c1"># outputs service status (stdout)</span>
<span class="w">  </span><span class="c1"># If the content of result output to standard output contains the regular expression of item.1, the result is right.</span>
<span class="w">  </span><span class="c1"># For example, in the case that the specific value of VAR_service_status_list is set to running and the service is running, &quot;running&quot; in &quot;Active: active(running)&quot; matches so the result is right. (Move on to the next loop)</span>
<span class="w">  </span><span class="c1"># In the case that condition doesn&#39;t match, the result is determined as abnormal and the dialog file terminates abnormally.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;systemctl</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">item.0</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">with_items</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_service_name_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">  </span><span class="c1"># item.0</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_service_status_list</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">  </span><span class="c1"># item.1</span>
<span class="w">    </span><span class="nt">failed_when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stdout match({{ item.1 }})</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.） Example using when with or/and condition</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w">   </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Example of compound condition using and / or.</span>
<span class="w">  </span><span class="c1"># When processing with or condition, write the if statement horizontally.</span>
<span class="w">  </span><span class="c1"># When processing with and condition, describing the statement in multiple lines.</span>
<span class="w">  </span><span class="c1"># &quot;when&quot; is used as the example here but the same applies to exec_when and failed_when.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemctl stop my_service</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">when</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_status</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">10</span><span class="nv"> </span><span class="s">OR</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_status</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">11&#39;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_sub_status</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">20</span><span class="nv"> </span><span class="s">OR</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_sub_status</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">21&#39;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="localaction-module">
<h4>localaction module<a class="headerlink" href="#localaction-module" title="Link to this heading">¶</a></h4>
<section id="id21">
<h5>Overview<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">Command executed to the Ansible Core/Ansible AutomationController execution environment.</div>
</div>
</section>
<section id="id22">
<h5>Format<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">localactionmodule format are as following.</div>
</div>
</section>
<section id="id23">
<h5>Input examples<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following contains localaction module input examples.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）localactionのInput examples</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w">   </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="c1"># Create a directory to output the hosts file for every host in the shared directory ({{ __symphony_workflowdir__ }}) of each Movement.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">localaction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdir -p 0755 {{ __workflowdir__ }}/{{ __inventory_hostname__ }}</span>
<span class="w">    </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">  </span><span class="c1"># Output hosts file contents to the directory created with localaction.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cat /etc/hosts</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">stdout_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__workflowdir__</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}/hosts&#39;</span>
<span class="w">    </span><span class="nt">ignore_errors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>
<section id="regular-expression">
<h3><span class="section-number">3.6.3. </span>Regular expression<a class="headerlink" href="#regular-expression" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The strings written by the following commands and parameters are evaluated by regular expressions.</div>
<div class="line">- expectt module's expect parameter</div>
<div class="line">- statet module's prompt parameter</div>
<div class="line">- commandt module's prompt parameter</div>
<div class="line">- commandt module's when/exec_when/failed_when parameter's match ()</div>
<div class="line">If the string written in the regular expression contains one of the following characters, the user must put in escape characters &quot;\&quot;.</div>
</div>
<table class="docutils align-left" id="id60">
<caption><span class="caption-number">表 3.33 </span><span class="caption-text">Characters that requires escape</span><a class="headerlink" href="#id60" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Target character</p></th>
<th class="head"><p>After Escape</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>\</p></td>
<td><div class="line-block">
<div class="line">\\</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>*</p></td>
<td><p>\*</p></td>
</tr>
<tr class="row-even"><td><p>.</p></td>
<td><p>\.</p></td>
</tr>
<tr class="row-odd"><td><p>+</p></td>
<td><p>\+</p></td>
</tr>
<tr class="row-even"><td><p>?</p></td>
<td><p>\?</p></td>
</tr>
<tr class="row-odd"><td><p>|</p></td>
<td><p>\|</p></td>
</tr>
<tr class="row-even"><td><p>{ }</p></td>
<td><p>\{ \}</p></td>
</tr>
<tr class="row-odd"><td><p>( )</p></td>
<td><p>\( \)</p></td>
</tr>
<tr class="row-even"><td><p>[ ]</p></td>
<td><p>\[ \]</p></td>
</tr>
<tr class="row-odd"><td><p>^</p></td>
<td><p>\^</p></td>
</tr>
<tr class="row-even"><td><p>$</p></td>
<td><p>\$</p></td>
</tr>
</tbody>
</table>
<ul>
<li><div class="line-block">
<div class="line">e.g.) Good example</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;XAMPP</span><span class="nv"> </span><span class="s">Developer</span><span class="nv"> </span><span class="s">Files</span><span class="nv"> </span><span class="s">¥[Y/n¥]</span><span class="nv"> </span><span class="s">exec_list:&#39;</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">e.g.) Bad example</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;XAMPP</span><span class="nv"> </span><span class="s">Developer</span><span class="nv"> </span><span class="s">Files</span><span class="nv"> </span><span class="s">[Y/n]</span><span class="nv"> </span><span class="s">exec_list:&#39;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="warning">
<h3><span class="section-number">3.6.4. </span>Warning<a class="headerlink" href="#warning" title="Link to this heading">¶</a></h3>
<section id="using-state-module-and-command-module">
<h4>Using state module and command module<a class="headerlink" href="#using-state-module-and-command-module" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><br /></div>
<div class="line">If the prompt parameter is a backward match in the regular table &quot;. *If the prompt parameter contains the backward match &quot;.</div>
<div class="line">If the backward match &quot;. *Ј*&quot;, the result of the executed command (standard output) will be empty.</div>
<div class="line">D not use backward match regular expressions.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）Regular expression backmatches</div>
</div>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &#39;saple data&#39;</span>
<span class="w">  </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;\.\*{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="nt">stdout_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__workflowdir__</span><span class="nv"> </span><span class="s">}}/{{</span><span class="nv"> </span><span class="s">__inventory_hostname__</span><span class="nv"> </span><span class="s">}}/hosts&#39;</span>
</pre></div>
</div>
</li>
<li><div class="line-block">
<div class="line">Processing interactive commands</div>
<div class="line">Not processed with command and state modules, Create interactive files with expect module.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）Interactive command &quot;ssh-keygen&quot; process example</div>
</div>
</li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process ssh-keygen in a dialogue file</span>
<span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ssh connection Password authentication</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;assword:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Execute ssh-keygen command</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-keygen</span>

<span class="w">  </span><span class="c1"># The following is the process for prompts other than the command prompt.</span>
<span class="w">  </span><span class="c1"># Set file path of the secret key</span>
<span class="w">  </span><span class="c1"># Since expect is evaluated in regular notation, the escape character (\) must be inserted for characters that needs escape</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;id_rsa\):&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_id_rsa_path</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Configure Passprhase</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="nv"> </span><span class="s">passphrase\):&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_passphrase</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Configure Passprhase</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;</span><span class="nv"> </span><span class="s">passphrase</span><span class="nv"> </span><span class="s">again:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_passphrase</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Check generated secret key file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ls</span><span class="nv"> </span><span class="s">-al</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_id_rsa_path</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Close ssh connection</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="using-multiple-specific-value-variables">
<h4>Using multiple specific value variables<a class="headerlink" href="#using-multiple-specific-value-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The parameters that allows for multiple specific value variables in interactive files is the command module with the with_items parameter only. Using any other command and parameter will cause an error when executed.</div>
</div>
</section>
<section id="ending-interactive-files">
<h4>Ending interactive files<a class="headerlink" href="#ending-interactive-files" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Make sure to input a command that ends the session at the end of the dialogue file.</div>
<div class="line">Ending the last line of the module closes the session.</div>
<div class="line">If the final line is a file copy or any other process that takes time, the session will close before the command is finished and may end up ending abnormaly.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">e.g.）Putting &quot;exit&quot; command for ending the session at the end of the interactive file.</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ssh connection Password authentication</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;assword:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Copy file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;cp</span><span class="nv"> </span><span class="s">-rfp</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_src_path</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_dest_path</span><span class="nv"> </span><span class="s">}}&#39;</span>

<span class="w">  </span><span class="c1"># Write a line that waits for the previous command to end in the command prompt and inputs an exit command at the end of the Interactive file.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="writing-interactive-files-in-yaml-format">
<span id="ansible-pioneer-things-to-keep-in-mind-when-writing-dialogue-files-in-yaml-format"></span><h4>Writing interactive files in YAML format<a class="headerlink" href="#writing-interactive-files-in-yaml-format" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Interactive files are treated as yaml format files. Interactive modules that doesnt follow YAML formats will cause an registration error. The following will cause errors:</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">When the Module parameters are not enclosed in quotation marks when inputting variables into them.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">When each parameter is described by a constant only and the entire parameter is not enclosed in quotation marks, e.g. when the constant ends in &quot;<strong>:</strong>&quot;.</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">The module parameters must have their parameters enclosed in quotations.</div>
</div>
<figure class="align-default" id="id61">
<a class="reference internal image-reference" href="../../_images/ansible_pioneer_yaml_syntax.png"><img alt="Writing Interactive files in yaml format" src="../../_images/ansible_pioneer_yaml_syntax.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 3.52 </span><span class="caption-text">Writing Interactive files in yaml format</span><a class="headerlink" href="#id61" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="lang-for-target-device-login-user">
<h4>LANG for Target device login user<a class="headerlink" href="#lang-for-target-device-login-user" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The Login user's &quot;LANG&quot; supports the 3 types of UTF-8/euc/shift_jis.</div>
<div class="line">The Login user's &quot;LANG&quot; settings must be configured from <span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">LANG</span> item.</div>
<div class="line">If &quot;euc&quot; or &quot;shift_jis&quot; is used, the interactive file may not be processed correctly due to the characteristics of the decoding process to UTF-8 of the pexpect module used in the communication control with the device.</div>
<div class="line">Some full-width characters( such as &quot;①②&quot; cannot be used with the UTF-8 decoder. Characters that are not decodable will be displayed as &quot;??&quot;.</div>
<div class="line">When some full-width characters ( such as &quot; -, etc&quot;) are used in prompt waiting, The waiting will end successfuly if the LANG is &quot;UTF-8&quot;. If it is &quot;euc/shift_jis&quot; the wait will time out.</div>
</div>
</section>
<section id="termination-codes-for-commands-input-to-the-target-device">
<h4>Termination codes for commands input to the target device<a class="headerlink" href="#termination-codes-for-commands-input-to-the-target-device" title="Link to this heading">¶</a></h4>
<p>The termination code for the code executed to the target host sends &quot;LF&quot;. If the termination code is &quot;CRLF&quot;, add &quot;r&quot; to the end of the command.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;XXXXXXXX\r&#39;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_command</span><span class="nv"> </span><span class="s">}}\r&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_state</span><span class="nv"> </span><span class="s">}}\r&#39;</span>
<span class="w">    </span><span class="nt">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__loginhostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">parameter</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_parameter1</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_parameter2</span><span class="nv"> </span><span class="s">}}&#39;</span>
</pre></div>
</div>
</section>
<section id="operating-system-command-sequence">
<h4>Operating System Command sequence<a class="headerlink" href="#operating-system-command-sequence" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Depending on the working target, an Operating System Command sequence may be appended immediately before the command prompt sent by the working target. ITA eliminates the escape sequence immediately preceding the string specified in the prompt parameter.</div>
</div>
</section>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">3.7. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="link-between-ita-menus-and-input-data-when-executing-ansible">
<span id="ansible-pioneer-the-linkage-between-the-input-data-used-during-ansible-execution-and-ita-menu"></span><h3><span class="section-number">3.7.1. </span>Link between ITA menus and Input data when executing Ansible<a class="headerlink" href="#link-between-ita-menus-and-input-data-when-executing-ansible" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Information from the different ITA menus are extracted in order to create input data required to execute Ansible. When this happens, <span class="menuselection">Password</span> items in the <span class="menuselection">Ansible common ▶ Device list</span> menu and items with their <span class="menuselection">Sensitive settings</span> set to &quot;True&quot; in the <span class="menuselection">Ansible-Pioneer ▶ Substitute value management</span> menu.</div>
<div class="line">The Input data can be downloaded from the <span class="menuselection">Ansible-Pioneer ▶ Confirm execution status</span> menu's <span class="menuselection">Input data</span>.</div>
<div class="line">Useres can also directly execute Ansible by unzipping the downloaded input data in a specified directory.</div>
<div class="line"><br /></div>
<div class="line">The relationships between the different data and ITA menus are as following.</div>
</div>
<hr class="docutils" />
</section>
<section id="result-data-created-when-executing-ansible">
<span id="ansible-pioneer-the-linkage-between-the-output-data-used-during-ansible-execution-and-ita-menu"></span><h3><span class="section-number">3.7.2. </span>Result data created when executing Ansible<a class="headerlink" href="#result-data-created-when-executing-ansible" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The results from executing &quot;Input data&quot; with Ansible are saved as &quot;Result data&quot; in a ZIP file.</div>
<div class="line">&quot;Result data&quot; can be downloaded from <span class="menuselection">Ansible-Pioneer ▶ Confirm execution status</span> menu's <span class="menuselection">Result data</span> in a ZIP file.</div>
</div>
<section id="file-list-saved-to-ansible-pioneer-result-data">
<h4>File list saved to Ansible-Pioneer result data<a class="headerlink" href="#file-list-saved-to-ansible-pioneer-result-data" title="Link to this heading">¶</a></h4>
<table class="docutils align-left" id="id62">
<caption><span class="caption-number">表 3.34 </span><span class="caption-text">File list saved to Ansible-Pioneer result data</span><a class="headerlink" href="#id62" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 18.2%" />
<col style="width: 45.5%" />
<col style="width: 18.2%" />
<col style="width: 18.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File name</p></th>
<th class="head"><p>Recorded contents</p></th>
<th class="head"><p>Ansible Core</p></th>
<th class="head"><p>Ansible Automation Controller</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>result.txt</p></td>
<td><p>Records Ansible execution result's execution results</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>error.log</p></td>
<td><div class="line-block">
<div class="line">Error output file with Executing.</div>
<div class="line">Ansible-playbbok command standard error output file.</div>
<div class="line">Contents displayed in the Execute confirmation error log.</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec.log.org</p></td>
<td><p>xecution log output by Ansible-playbook</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>exec.log</p></td>
<td><div class="line-block">
<div class="line">Edited Aexec.log.org</div>
<div class="line">Contents displayed to the Execution confirmation execution log</div>
</div>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec_&lt;Execution number&gt;_&lt;group number&gt;</p></td>
<td><div class="line-block">
<div class="line">Divided execution log file</div>
<div class="line">For more information regarding file name conventions, see the execution log in <a class="reference internal" href="ansible_legacyrole.html#ansible-legacyrole-check-operation-status"><span class="std std-ref">Confirm execution status</span></a> .</div>
</div>
</td>
<td></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>forced.txt</p></td>
<td><p>Text file if stopped with Emergency stop</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>user_files</p></td>
<td><p>A directory where files are recorded when some file is output to ITA's original variable &quot;__workflowdir__&quot; in the playbook executed.</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="ansible_legacy.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">2. </span>Ansible-Legacy</a></li>
    <li class="next"><a href="ansible_legacyrole.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">4. </span>Ansible-LegacyRole</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>