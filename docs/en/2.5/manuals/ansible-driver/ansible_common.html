<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>1. Ansible common &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=639405c8" />
    <link rel="stylesheet" type="text/css" href="../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <script src="../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="2. Ansible-Legacy" href="ansible_legacy.html" />
    <link rel="prev" title="Ansible Driver" href="index.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_common.html" selected>current</option>
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_common.html" selected>2.5(current)</option>
              <option value="../../../../ja/2.4/manuals/ansible-driver/ansible_common.html">2.4</option>
              <option value="../../../../ja/2.3/manuals/ansible-driver/ansible_common.html">2.3</option>
              <option value="../../../../ja/2.2/manuals/ansible-driver/ansible_common.html">2.2</option>
              <option value="../../../../ja/2.1/manuals/ansible-driver/ansible_common.html">2.1</option>
              <option value="../../../../ja/2.0/manuals/ansible-driver/ansible_common.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../ja/2.5/manuals/ansible-driver/ansible_common.html" selected>日本語</option>
              <option value="../../../../en/2.5/manuals/ansible-driver/ansible_common.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="index.html" title="前のトピックへ">Ansible Driver</a></li>
        <li class="next"><a href="ansible_legacy.html" title="次のトピックへ"><span class="section-number">2. </span>Ansible-Legacy</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">インストール</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">マニュアル</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_management/index.html">System management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../organization_management/index.html">Organization management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../it_automation_base/index.html">Basic operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_param/index.html">Parameter management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../host_group/index.html">Host group</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Ansible Driver</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Ansible common</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-driver-overview">1.2. Ansible driver overview</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ansible-core">1.2.1. Ansible Core</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-automation-controller">1.2.2. Ansible Automation Controller</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-driver">1.2.3. Ansible driver</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#handling-variables-with-ansible-driver">1.3. Handling variables with Ansible driver</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#variable-types">1.3.1. Variable types</a></li>
<li class="toctree-l5"><a class="reference internal" href="#extracting-variables-and-registering-specific-variables">1.3.2. Extracting variables and registering specific variables</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#ansible-common-menu">1.4. Ansible common menu</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#menu-page-list">1.4.1. Menu/Page list</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#menu-operation">1.5. Menu operation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#ansible-common-device-list">1.5.1. Device list</a></li>
<li class="toctree-l5"><a class="reference internal" href="#interface-information">1.5.2. Interface information</a></li>
<li class="toctree-l5"><a class="reference internal" href="#ansible-automation-controller-host-list">1.5.3. Ansible Automation Controller host list</a></li>
<li class="toctree-l5"><a class="reference internal" href="#global-variable-management">1.5.4. Global variable management</a></li>
<li class="toctree-l5"><a class="reference internal" href="#file-management">1.5.5. File management</a></li>
<li class="toctree-l5"><a class="reference internal" href="#template-management">1.5.6. Template management</a></li>
<li class="toctree-l5"><a class="reference internal" href="#unmanaged-target-variable-list">1.5.7. Unmanaged target variable list</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#appendix">1.6. Appendix</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#backyard-contents">1.6.1. BackYard contents</a></li>
<li class="toctree-l5"><a class="reference internal" href="#inventory-files-created-by-ita">1.6.2. Inventory files created by ITA.</a></li>
<li class="toctree-l5"><a class="reference internal" href="#option-parameter-list">1.6.3. Option parameter list</a></li>
<li class="toctree-l5"><a class="reference internal" href="#data-resources-deleted-when-executed">1.6.4. Data resources deleted when executed</a></li>
<li class="toctree-l5"><a class="reference internal" href="#using-ita-original-variables-in-ansible-automation-controller">1.6.5. Using ITA original variables in Ansible Automation Controller</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacy.html">2. Ansible-Legacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_pioneer.html">3. Ansible-Pioneer</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansible_legacyrole.html">4. Ansible-LegacyRole</a></li>
<li class="toctree-l3"><a class="reference internal" href="collect.html">5. Collect function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terraform_driver/index.html">Terraform Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../export_import/index.html">Export/Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cicd_for_iac/index.html">CI/CD for IaC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oase/index.html">OASE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">1. Ansible common</a><ul>
<li><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li><a class="reference internal" href="#ansible-driver-overview">1.2. Ansible driver overview</a><ul>
<li><a class="reference internal" href="#ansible-core">1.2.1. Ansible Core</a></li>
<li><a class="reference internal" href="#ansible-automation-controller">1.2.2. Ansible Automation Controller</a></li>
<li><a class="reference internal" href="#ansible-driver">1.2.3. Ansible driver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#handling-variables-with-ansible-driver">1.3. Handling variables with Ansible driver</a><ul>
<li><a class="reference internal" href="#variable-types">1.3.1. Variable types</a><ul>
<li><a class="reference internal" href="#normal">Normal</a></li>
<li><a class="reference internal" href="#multiple-specific-value-variables">Multiple specific value variables</a></li>
<li><a class="reference internal" href="#multistage-variables">Multistage variables</a></li>
<li><a class="reference internal" href="#global-variables">Global variables</a></li>
<li><a class="reference internal" href="#template-embedded-variables">Template embedded variables</a></li>
<li><a class="reference internal" href="#file-embedded-variables">File embedded variables</a></li>
<li><a class="reference internal" href="#ita-original-variables">ITA original variables</a><ul>
<li><a class="reference internal" href="#device-list">Device list</a></li>
<li><a class="reference internal" href="#operation">Operation</a></li>
<li><a class="reference internal" href="#conductor-instance-id">Conductor instance ID</a></li>
<li><a class="reference internal" href="#link-data">Link data</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#extracting-variables-and-registering-specific-variables">1.3.2. Extracting variables and registering specific variables</a><ul>
<li><a class="reference internal" href="#variable-extraction-files">Variable extraction files</a><ul>
<li><a class="reference internal" href="#playbook-file-extractable-variable-types-and-their-format">Playbook file extractable variable types and their format</a></li>
<li><a class="reference internal" href="#interactive-file-extractable-variable-types-and-their-format">Interactive file extractable variable types and their format</a></li>
<li><a class="reference internal" href="#local-package-file-zip-format-extractable-variable-types-and-their-format">Local package file  (ZIP format)  extractable variable types and their format.</a></li>
<li><a class="reference internal" href="#inventory-file-options-and-header-section-parameter-value-extractable-variable-types-and-their-format">Inventory file options and header section parameter value extractable variable types and their format.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specific-values-for-variables">Specific values for variables</a><ul>
<li><a class="reference internal" href="#ansible-legacy">Ansible-Legacy</a></li>
<li><a class="reference internal" href="#ansible-pioneer">Ansible-Pioneer</a></li>
<li><a class="reference internal" href="#ansible-legacyrole">Ansible-LegacyRole</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ansible-common-menu">1.4. Ansible common menu</a><ul>
<li><a class="reference internal" href="#menu-page-list">1.4.1. Menu/Page list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#menu-operation">1.5. Menu operation</a><ul>
<li><a class="reference internal" href="#ansible-common-device-list">1.5.1. Device list</a></li>
<li><a class="reference internal" href="#interface-information">1.5.2. Interface information</a></li>
<li><a class="reference internal" href="#ansible-automation-controller-host-list">1.5.3. Ansible Automation Controller host list</a></li>
<li><a class="reference internal" href="#global-variable-management">1.5.4. Global variable management</a></li>
<li><a class="reference internal" href="#file-management">1.5.5. File management</a></li>
<li><a class="reference internal" href="#template-management">1.5.6. Template management</a></li>
<li><a class="reference internal" href="#unmanaged-target-variable-list">1.5.7. Unmanaged target variable list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix">1.6. Appendix</a><ul>
<li><a class="reference internal" href="#backyard-contents">1.6.1. BackYard contents</a><ul>
<li><a class="reference internal" href="#ansible-automation-controller-data-synchronization">Ansible Automation Controller data synchronization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inventory-files-created-by-ita">1.6.2. Inventory files created by ITA.</a></li>
<li><a class="reference internal" href="#option-parameter-list">1.6.3. Option parameter list</a></li>
<li><a class="reference internal" href="#data-resources-deleted-when-executed">1.6.4. Data resources deleted when executed</a><ul>
<li><a class="reference internal" href="#ansible-ansible-automation-controller"><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Automation Controller」の場合</a></li>
<li><a class="reference internal" href="#ansible-ansible-execution-agent"><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Execution Agent」の場合</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-ita-original-variables-in-ansible-automation-controller">1.6.5. Using ITA original variables in Ansible Automation Controller</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../index.html">HOME</a></li>
    <li><a href="../index.html">マニュアル</a></li>
    <li><a href="index.html">Ansible Driver</a></li>
    
    <li><span class="section-number">1. </span>Ansible common</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="ansible-common">
<h1><span class="section-number">1. </span>Ansible common<a class="headerlink" href="#ansible-common" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">1.1. </span>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explain how to use the Ansible driver's common functions.</div>
</div>
</section>
<section id="ansible-driver-overview">
<h2><span class="section-number">1.2. </span>Ansible driver overview<a class="headerlink" href="#ansible-driver-overview" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document explains the functions of Ansible Core, Ansible Automation Controller and the Ansible driver.</div>
</div>
<section id="ansible-core">
<h3><span class="section-number">1.2.1. </span>Ansible Core<a class="headerlink" href="#ansible-core" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Ansible Core is an PF construction automation tool that makes application/system deployment operations for multiple construction targets easier.</div>
<div class="line">Ansible Core uses Playbook, YAML type text files, which contains routine tasks that can be run by Ansible Core.</div>
<div class="line">The &quot;Tasks&quot; are linked to processing programs called Modules and can control different devices.</div>
<div class="line">For more information regarding Ansible Core, see the official Ansible manuals.</div>
</div>
</section>
<section id="ansible-automation-controller">
<h3><span class="section-number">1.2.2. </span>Ansible Automation Controller<a class="headerlink" href="#ansible-automation-controller" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Ansible Automation Controller is a management platform that comes with functions such as controling Ansible access, scheduling jobs and visualizing tasks.</div>
<div class="line">It can be used to create job templates that contains Projects, Inventories and Authentication information that can be run with Ansible.</div>
<div class="line">By combining multiple &quot;Job templates&quot;, the user can create a &quot;Workflow template&quot;, which can be used to express more variegated task flows.</div>
<div class="line">For more information regarding Ansible Automation Controller, see the official Ansible Automation Controller manuals.</div>
<div class="line">For information regarding ITA compatible Ansible Automation Controller versions, see <a class="reference internal" href="../../configuration/ansible/ansible_automation_platform.html"><span class="doc">Ansible Automation Platform</span></a>.</div>
<div class="line">Note that all notations regarding the newest version might not work.</div>
</div>
</section>
<section id="ansible-driver">
<h3><span class="section-number">1.2.3. </span>Ansible driver<a class="headerlink" href="#ansible-driver" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Ansible driver uses the ITA functions to automatically run Playbook processes to Servers, Storage or Network devices registered to ITA through either Ansible Core or Ansible Automation Controller.</div>
</div>
<a class="reference internal image-reference" href="../../_images/overview.png"><img alt="Exastro overview" src="../../_images/overview.png" style="width: 6.68819in; height: 3.35972in;" />
</a>
<div class="line-block">
<div class="line">The Ansible driver comes with the following 3 modes.</div>
<div class="line">They each comes with their own strengths, so make sure to use the one that suits the situation best.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Legacy mode</strong></div>
<div class="line">Uses Ansible's standard functions to input settings to the host.</div>
<div class="line">The Legacy mode registers construction code as single YAML files and creates operation patterns using them.</div>
<div class="line">Often used for configuring environments for Server, Storage and Network devices.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Legacy Role mode</strong></div>
<div class="line">Similar to the Legacy mode, this mode also uses Ansible's standard functions to input settings to the host.</div>
<div class="line">The Legacy Role mode registers consdtruction code as packages and creates operation patterns by combining them with Roles.</div>
<div class="line">Often used by using Role packages provided by product and other departments to install products and construct environments.</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Pioneer mode</strong></div>
<div class="line">Adds original modules to Ansible and allows users to input settings in an interactive format.</div>
<div class="line">Support Server, Storage and Network devices that can be logged in with Telnet or SSH. We recommend that the user has adequate IT skills, since this mode works directly with the target host.</div>
</div>
</li>
</ol>
</section>
</section>
<section id="handling-variables-with-ansible-driver">
<span id="ansible-common-variable-handling"></span><h2><span class="section-number">1.3. </span>Handling variables with Ansible driver<a class="headerlink" href="#handling-variables-with-ansible-driver" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">In the Ansible driver, the specific values within the variables in the Playbook can be set from ITA.</div>
</div>
<section id="variable-types">
<h3><span class="section-number">1.3.1. </span>Variable types<a class="headerlink" href="#variable-types" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The variables within Playbooks that can be handled as ITA variables are the following 7 types.</div>
</div>
<section id="normal">
<h4>Normal<a class="headerlink" href="#normal" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variable that can define 1 specific value for variable names.</div>
<div class="line"><br /></div>
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ansible-LegacyRole variable definition example</span>
<span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user1</span>

<span class="c1"># Playbook example</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create user</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">user</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="multiple-specific-value-variables">
<h4>Multiple specific value variables<a class="headerlink" href="#multiple-specific-value-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variable that can specify multiple specific values for variable names.</div>
<div class="line"><br /></div>
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ansible-LegacyRole variable definition example</span>
<span class="nt">users</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user2</span>

<span class="c1"># Playbook example</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create user</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">with_items</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">users</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="multistage-variables">
<h4>Multistage variables<a class="headerlink" href="#multistage-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variables in hierarchy.</div>
<div class="line">Multiple variables can only be used in Ansible-LegacyRole.</div>
<div class="line"><br /></div>
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ansible-LegacyRole variable definition example</span>
<span class="nt">users</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user3</span>
<span class="w">    </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user4</span>
<span class="w">    </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>

<span class="c1"># Playbook example</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create user</span>
<span class="w">  </span><span class="nt">user</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item.name</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">with_items</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">users</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="global-variables">
<h4>Global variables<a class="headerlink" href="#global-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variables registered from <span class="menuselection">Ansible common ▶ Global variable list</span>.</div>
</div>
<div class="line-block">
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo {{ GBL_user }}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="template-embedded-variables">
<h4>Template embedded variables<a class="headerlink" href="#template-embedded-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variables registered from <span class="menuselection">Ansible common ▶ Template list</span>.</div>
</div>
<div class="line-block">
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src={{ TPF_SAMPLE }} dest=/tmp/SAMPLE.txt</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="file-embedded-variables">
<h4>File embedded variables<a class="headerlink" href="#file-embedded-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variables registered from <span class="menuselection">Ansible common ▶ File list</span>.</div>
</div>
<div class="line-block">
<div class="line">e.g.) Example within Playbook</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src={{ CPF_SAMPLE }} dest=/tmp/SAMPLE.txt</span>
</pre></div>
</div>
</section>
<section id="ita-original-variables">
<span id="ansible-common-ita-original-variable"></span><h4>ITA original variables<a class="headerlink" href="#ita-original-variables" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Variables defined by ITA.</div>
</div>
<section id="device-list">
<h5>Device list<a class="headerlink" href="#device-list" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following items in <span class="menuselection">Basic console ▶ Device list</span> can be handled as variables.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Host name</p></td>
<td><p>__inventory_hostname__</p></td>
</tr>
<tr class="row-odd"><td><p>DNS host name</p></td>
<td><p>__dnshostname__</p></td>
</tr>
<tr class="row-even"><td><p>IP address</p></td>
<td><p>__ipaddress__</p></td>
</tr>
<tr class="row-odd"><td><p>Protocol</p></td>
<td><p>__loginprotocol__</p></td>
</tr>
<tr class="row-even"><td><p>Login user ID</p></td>
<td><p>__loginuser__</p></td>
</tr>
<tr class="row-odd"><td><p>Login password</p></td>
<td><p>__loginpassword__</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">The &quot;__&quot; before and after the variable names are created by 2 underscores.</div>
</div>
</div>
<div class="line-block">
<div class="line">The <span class="menuselection">Ansible common ▶ Device list ` items can be used as variables if set .
If the items are not set, the operations run in :menuselection:`Mode ▶ Execute</span> will display an error.</div>
</div>
</section>
<section id="operation">
<h5>Operation<a class="headerlink" href="#operation" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The <span class="menuselection">Basic console ▶ Operation list</span> operations that are selected during execution can be selected as variables.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Operation</p></td>
<td><p>__operation__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">Setting value: &quot;YYYY/MM/DD HH:MM&quot; _ &quot;Operation ID&quot; : &quot;Operation name&quot;</div>
<div class="line">YYYY/MM/DD HH:MM: <span class="menuselection">Basic console ▶ Operation list</span>'s <span class="menuselection">Scheduled execution date/time</span></div>
<div class="line">Operation ID: <span class="menuselection">Basic console ▶ Operation list</span>'s <span class="menuselection">Operation ID</span></div>
<div class="line">Operation name: <span class="menuselection">Basic console ▶ Operation list</span>'s <span class="menuselection">Operation name</span></div>
<div class="line"><br /></div>
</div>
</section>
<section id="conductor-instance-id">
<h5>Conductor instance ID<a class="headerlink" href="#conductor-instance-id" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The <span class="menuselection">Conductor ▶ Conductor confirmation</span>'s <span class="menuselection">Conductor instance ID</span> can be handled as variables when run.</div>
<div class="line">For more information regarding the Conductor function, see &quot;<a class="reference internal" href="../it_automation_base/conductor.html"><span class="doc">Conductor</span></a></div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Conductor instance ID</p></td>
<td><p>__conductor_id__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">__conductor_id__ can be handled as a variable when executing Conductor.</div>
<div class="line-block">
<div class="line">If <span class="menuselection">Mode ▶ Execute</span> is used, the operation will end in an error.</div>
<div class="line"><br /></div>
</div>
</div>
</section>
<section id="link-data">
<h5>Link data<a class="headerlink" href="#link-data" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">When executing operations, the operation directory path can be used as the following variables.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Operation directory path</p></td>
<td><p>__workflowdir__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">By creating a file in the Operation directory within the Playbook, the user can download the file from <span class="menuselection">Result data</span> in <span class="menuselection">Ansible mode ▶ Operation management</span></div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">When running Conductors, the Movement's shared directory path can be used as the following variables.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Conductor operation directory path</p></td>
<td><p>__conductor_workflowdir__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">By creating a file in the Conductor operation directory path within the Playbook, the file can be shared between the Conductor's Movements.</div>
<div class="line">If the operation is executed from <span class="menuselection">Ansible mode ▶ Execution</span>, the same path as __workflowdir__ will be set.</div>
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">The file path for the status file referenced with <span class="menuselection">Conductor ▶ Conductor edit / execution</span>'s  <span class="menuselection">Status file branch node</span> can be used as the following variables.</div>
<div class="line">For more information regarding <span class="menuselection">Status file branch node</span>, see &quot;<a class="reference internal" href="../it_automation_base/conductor.html"><span class="doc">Conductor</span></a>&quot;.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Status file path</p></td>
<td><p>__movement_status_filepath__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line">The file paths used by the collect function can be used as the following variables.</div>
<div class="line">For more informatio nregarding the collect function, see &quot;<a class="reference internal" href="collect.html"><span class="doc">Collect function</span></a>&quot;.</div>
</div>
<table class="docutils align-left">
<colgroup>
<col style="width: 38.5%" />
<col style="width: 61.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item name</p></th>
<th class="head"><p>Variable name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Path for operation directory  (in) 's &quot;_parameters&quot;</p></td>
<td><p>__parameters_dir_for_epc__</p></td>
</tr>
<tr class="row-odd"><td><p>Path for operation directory  (in) 's &quot;_parameters_file&quot;</p></td>
<td><p>__parameters_file_dir_for_epc__</p></td>
</tr>
<tr class="row-even"><td><p>Path for operation directory  (out) 's &quot;_parameters&quot;</p></td>
<td><p>__parameter_dir__</p></td>
</tr>
<tr class="row-odd"><td><p>Path for operation directory  (out) 's &quot;_parameters_file&quot;</p></td>
<td><p>__parameters_file_dir__</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">&quot;_parameters&quot;：Source file (parameter) for storage destination</div>
<div class="line">&quot;_parameters_file&quot;：For storage destination for collected files</div>
<div class="line">※File arrangement when parameter target is file upload collumn</div>
<div class="line"><br /></div>
</div>
</section>
</section>
</section>
<section id="extracting-variables-and-registering-specific-variables">
<h3><span class="section-number">1.3.2. </span>Extracting variables and registering specific variables<a class="headerlink" href="#extracting-variables-and-registering-specific-variables" title="Link to this heading">¶</a></h3>
<section id="variable-extraction-files">
<span id="ansible-common-var-listup"></span><h4>Variable extraction files<a class="headerlink" href="#variable-extraction-files" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">If the variable extraction target is a registered file, the variables can be extracted from the registered information.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">〇：Extraction target  ×：Not extraction target</div>
</div>
</div>
<section id="playbook-file-extractable-variable-types-and-their-format">
<span id="ansible-common-legacy-var-listup"></span><h5>Playbook file extractable variable types and their format<a class="headerlink" href="#playbook-file-extractable-variable-types-and-their-format" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following table displays what variable types can be extracted from the <span class="menuselection">Ansible-Legacy ▶ Playbook file collection</span>'s  <span class="menuselection">Playbook files</span> and their format.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Notes regarding variable names</div>
<div class="line">△：Half-width space</div>
<div class="line">vvv: Half-width characters and underscore within 255 bytes ( _ )</div>
<div class="line">xxx: Half-width characters and underscore within 251 bytes ( _ )</div>
</div>
</div>
</section>
<section id="interactive-file-extractable-variable-types-and-their-format">
<span id="ansible-common-pioneer-var-listup"></span><h5>Interactive file extractable variable types and their format<a class="headerlink" href="#interactive-file-extractable-variable-types-and-their-format" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following table displays what variable types can be extracted from the <span class="menuselection">Ansible-Legacy ▶ Interactive file collection</span>'s <span class="menuselection">Interactive files</span>.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Notes regarding variable names</div>
<div class="line">△：Half-width space</div>
<div class="line">vvv: Half-width characters and underscore within 255 bytes ( _ )</div>
<div class="line">xxx: Half-width characters and underscore within 251 bytes ( _ )</div>
</div>
</div>
</section>
<section id="local-package-file-zip-format-extractable-variable-types-and-their-format">
<span id="ansible-common-legacyrole-var-listup"></span><h5>Local package file  (ZIP format)  extractable variable types and their format.<a class="headerlink" href="#local-package-file-zip-format-extractable-variable-types-and-their-format" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following table displays what variable types can be extracted from the <span class="menuselection">Ansible-Legacy ▶ Role package management</span>'s :menuselection:<a href="#id1"><span class="problematic" id="id2">`</span></a>Role package file (ZIP format) <a href="#id3"><span class="problematic" id="id4">`</span></a>.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">〇：Variable definition extraction target   ×：Not variable definition extraction target</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Notes regarding variable names</div>
<div class="line">△：Half-width space</div>
<div class="line">vvv: Half-width characters and underscore within 255 bytes ( _ )</div>
<div class="line">xxx: Half-width characters and underscore within 251 bytes ( _ )</div>
<div class="line">Member variables can use all ascii characters (0x20～0x7e) except for the 7 characters written below.</div>
<div class="line">&quot; . [ ] ' \ :</div>
<div class="line">Note that some characters can not be used at the start of the variable's names unless they are in quoatation marks.</div>
<div class="line">For more information, see the official Ansible manuals' YAML and Syntax section.</div>
</div>
</div>
</section>
<section id="inventory-file-options-and-header-section-parameter-value-extractable-variable-types-and-their-format">
<span id="ansible-common-option-var-listup"></span><h5>Inventory file options and header section parameter value extractable variable types and their format.<a class="headerlink" href="#inventory-file-options-and-header-section-parameter-value-extractable-variable-types-and-their-format" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following table displays what variables can be extraccted with the Parameter values found in <span class="menuselection">Ansible-Legacy ▶ Device list</span>'s <span class="menuselection">Inventory file option</span> and <span class="menuselection">Ansible mode ▶ Movement list</span>'s <span class="menuselection">Header section</span></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Notes regarding variable names</div>
<div class="line">△：Half-width space</div>
<div class="line">vvv: Half-width characters and underscore within 255 bytes ( _ )</div>
</div>
</div>
</section>
</section>
<section id="specific-values-for-variables">
<h4>Specific values for variables<a class="headerlink" href="#specific-values-for-variables" title="Link to this heading">¶</a></h4>
<section id="ansible-legacy">
<h5>Ansible-Legacy<a class="headerlink" href="#ansible-legacy" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The specific values of the extracted variables are set by setting specific values to the items on the parameter sheet and tying them to each variable in <span class="menuselection">Ansible-Legacy ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">They are output to the host variable file when the operation is executed.</div>
<div class="line">The following diagram illustrates the specific value's relationships through <span class="menuselection">Ansible-Legacy ▶ Substitute value management</span> in the host's variable file's variables from when the operation is executed to when they are output.</div>
<div class="line">For more information regarding Parameter sheets, see &quot;&quot;<a class="reference internal" href="../create_param/menu_creation.html"><span class="doc">Parameter sheet creation function</span></a>&quot;.</div>
</div>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../../_images/hensuu_nukidashi_legacy.png"><img alt="Variable's specific values in Ansible-Legacy host variable files" src="../../_images/hensuu_nukidashi_legacy.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.60 </span><span class="caption-text">Variable's specific values in Ansible-Legacy host variable files</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">① Variables are extracted from one of the variable extractable files in &quot;<a class="reference internal" href="#ansible-common-var-listup"><span class="std std-ref">Variable extraction files</span></a>&quot; which makes them selectable in <span class="menuselection">Ansible-Legacy ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">② Register specific values for the variable linked to the parameter sheet item.</div>
<div class="line">③ Register a link between the parameter sheet item and the variable in <span class="menuselection">Ansible-Legacy ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">④ Executing the operation displays the parameter sheet item and variable information linked in <span class="menuselection">Ansible-Legacy ▶ Substitute value automatic registration settings</span> to <span class="menuselection">Ansible-Legacy ▶ Substitute value management</span> and outputs it to the host variable file.</div>
</div>
</section>
<section id="ansible-pioneer">
<h5>Ansible-Pioneer<a class="headerlink" href="#ansible-pioneer" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The specific values of the extracted variables are set by setting specific values to the items on the parameter sheet and tying them to each variable in <span class="menuselection">Ansible-Pioneer ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">They are output to the host variable file when the operation is executed.</div>
<div class="line">The following diagram illustrates the specific value's relationships through <span class="menuselection">Ansible-Pioneer ▶ Substitute value management</span> in the host's variable file's variables from when the operation is executed to when they are output.</div>
</div>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="../../_images/hensuu_nukidashi_pioneer.png"><img alt="Variable's specific values in Ansible-Pioneer host variable files" src="../../_images/hensuu_nukidashi_pioneer.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.61 </span><span class="caption-text">Variable's specific values in Ansible-Pioneer host variable files</span><a class="headerlink" href="#id11" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">① Variables are extracted from one of the variable extractable files in &quot;<a class="reference internal" href="#ansible-common-var-listup"><span class="std std-ref">Variable extraction files</span></a>&quot; which makes them selectable in <span class="menuselection">Ansible-Pioneer ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">② Register specific values for the variable linked to the parameter sheet item.</div>
<div class="line">③ Register a link between the parameter sheet item and the variable in <span class="menuselection">Ansible-Pioneer ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">④ Executing the operation displays the parameter sheet item and variable information linked in <span class="menuselection">Ansible-Pioneer ▶ Substitute value automatic registration settings</span> to <span class="menuselection">Ansible-Pioneer ▶ Substitute value management</span> and outputs it to the host variable file.</div>
</div>
</section>
<section id="ansible-legacyrole">
<span id="ansible-common-legacy-role-var-value"></span><h5>Ansible-LegacyRole<a class="headerlink" href="#ansible-legacyrole" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The specific values of the extracted variables are set by setting specific values to the items on the parameter sheet and tying them to each variable in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">They are output to the host variable file when the operation is executed.</div>
<div class="line">The following diagram illustrates the specific value's relationships through <span class="menuselection">Ansible-LegacyRole ▶ Substitute value management</span> in the host's variable file's variables from when the operation is executed to when they are output.</div>
</div>
<figure class="align-default" id="id12">
<a class="reference internal image-reference" href="../../_images/hensuu_nukidashi_legacyrole.png"><img alt="Variable's specific values in Ansible-LegacyRole host variable files" src="../../_images/hensuu_nukidashi_legacyrole.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.62 </span><span class="caption-text">Variable's specific values in Ansible-LegacyRole host variable files</span><a class="headerlink" href="#id12" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="line-block">
<div class="line">① Variables are extracted from one of the variable extractable files in &quot;<a class="reference internal" href="#ansible-common-var-listup"><span class="std std-ref">Variable extraction files</span></a>&quot; which makes them selectable in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">② Register specific values for the variable linked to the parameter sheet item.</div>
<div class="line">③ Register a link between the parameter sheet item and the variable in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value automatic registration settings</span>.</div>
<div class="line">④ Executing the operation displays the parameter sheet item and variable information linked in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value automatic registration settings</span> to <span class="menuselection">Ansible-LegacyRole ▶ Substitute value management</span> and outputs it to the host variable file.</div>
</div>
<div class="line-block">
<div class="line">The specific values for the variables registered in <span class="menuselection">Ansible-LegacyRole ▶ Substitute value automatic registration settings</span> are output to the Host variable definition file, (host_vars) .</div>
<div class="line">The order in which specific values are handled are as follows.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Host variable definition file value</div>
</div>
</li>
<li><div class="line-block">
<div class="line">values defined in defaults variable definition file</div>
</div>
</li>
</ol>
</section>
</section>
</section>
</section>
<section id="ansible-common-menu">
<h2><span class="section-number">1.4. </span>Ansible common menu<a class="headerlink" href="#ansible-common-menu" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains the Ansible common menus and their configurations.</div>
</div>
<section id="menu-page-list">
<h3><span class="section-number">1.4.1. </span>Menu/Page list<a class="headerlink" href="#menu-page-list" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Ansible共通のメニュー一覧を以下に記述します。</div>
</div>
<table class="docutils align-left" id="id13">
<caption><span class="caption-number">表 1.36 </span><span class="caption-text">Ansible共通 メニュー/画面一覧</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 7.1%" />
<col style="width: 21.4%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>メニュー・画面</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>機器一覧</p></td>
<td><p>作業対象の機器情報を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>インターフェース情報</p></td>
<td><div class="line-block">
<div class="line">Ansible Core、Ansible Automation Controller、Ansible Execution Agentのいずれの実行エンジンを使用するかを選択し、実行エンジンのサーバへの接続インターフェース情報を管理します。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Ansible Automation Controllerホスト一覧</p></td>
<td><p>Ansible Automation ControllerのRestAPI実行に必要な情報、および構築資材をAnsible Automation Controllerにファイル転送するために必要な情報を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>グローバル変数管理</p></td>
<td><p>各モードのPlaybookや対話ファイルで共通利用する変数と具体値を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>ファイル管理</p></td>
<td><p>各モードのPlaybookや対話ファイルで共通利用する素材ファイルと埋込変数を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>テンプレート管理</p></td>
<td><p>各モードのPlaybookや対話ファイルで共通利用するテンプレートファイルと埋込変数を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>実行環境定義テンプレート管理</p></td>
<td><p>Ansible Execution Agent内にansible-builderで実行環境（コンテナ）をbuildする際の実行環境定義ファイル(execution-environment.yml)のテンプレートファイルを管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>実行環境管理</p></td>
<td><p>Ansible Execution Agent内にansible-builderで実行環境（コンテナ）をbuildする際の実行環境定義ファイル(execution-environment.yml)のテンプレートファイルと、テンプレートに埋め込むパラメータが定義されているパラメータシートの紐付を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>エージェント管理</p></td>
<td><p>ITAと接続したAnsible Execution Agentのエージェント名とバージョン情報を閲覧できます。</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>管理対象外変数リスト</p></td>
<td><p>「 変数抜出対象資材 」で抜出した変数で、 <span class="menuselection">各モード ▶ 代入値自動登録設定</span> の  <span class="menuselection">:menuselection:`Movement名:変数名</span> に表示したくない変数を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>共通変数利用リスト (※1)</p></td>
<td><p><span class="menuselection">Ansible共通 ▶ グローバル変数管理</span> ・ <span class="menuselection">Ansible共通 ▶ ファイル管理</span> ・ <span class="menuselection">Ansible共通 ▶ テンプレート管理</span> に登録されている変数が、どの素材( <span class="menuselection">Ansible-Legacy ▶ Playbook素材集</span> ・ <span class="menuselection">Ansible-Pioneer ▶ 対話ファイル素材集</span> ・ <span class="menuselection">Ansible-LegacyRole ▶ ロールパッケージ管理</span> )で使用しているかを閲覧できます。</p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 Menus that are hidden by default are used for internal processing.</div>
<div class="line">The hidden menus are set to be hidden by default when ITA is installed.</div>
<div class="line">In order to display them, access <span class="menuselection">Management console ▶ Role/Menu link management</span> and restore the desired menus. For more information, see &quot;<a class="reference internal" href="../it_automation_base/management_console.html"><span class="doc">Management console</span></a>&quot;</div>
<div class="line">We highly recommend against registering data to menus that handle internal processing.</div>
</div>
</div>
</section>
</section>
<section id="menu-operation">
<h2><span class="section-number">1.5. </span>Menu operation<a class="headerlink" href="#menu-operation" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to operate the Ansible common menus.</div>
</div>
<section id="ansible-common-device-list">
<span id="id5"></span><h3><span class="section-number">1.5.1. </span>Device list<a class="headerlink" href="#ansible-common-device-list" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">This menu allows users to maintain  (view/register/update/delete)  device information.</div>
<div class="line">Installing ITA registers the local device as &quot;localhost&quot; to the device list.</div>
<div class="line">The user can select &quot;localhost&quot; as the execution target and the operation be executed within the ansible host.</div>
<div class="line">Note that the Ansible-Pioneer mode can not use &quot;localhost&quot;.</div>
</div>
<figure class="align-default" id="id14">
<a class="reference internal image-reference" href="../../_images/device_list.png"><img alt="Submenu page (Device list)" src="../../_images/device_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.63 </span><span class="caption-text">Submenu page (Device list)</span><a class="headerlink" href="#id14" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register the operation target device's information.</div>
</div>
<figure class="align-default" id="id15">
<a class="reference internal image-reference" href="../../_images/registration_device_list.gif"><img alt="Registration page (Device list)" src="../../_images/registration_device_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.64 </span><span class="caption-text">Registration page (Device list)</span><a class="headerlink" href="#id15" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the registration page are as following.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 Select from data fetched with <a class="reference internal" href="#ansible-common-aac-sync"><span class="std std-ref">Ansible Automation Controller data synchronization</span></a>.</div>
</div>
</div>
</li>
</ol>
</section>
<section id="interface-information">
<span id="ansible-common-interface-information"></span><h3><span class="section-number">1.5.2. </span>Interface information<a class="headerlink" href="#interface-information" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Select the Ansible Core or the Ansible Automation Controller to be the execution engine and maintain (view/edit) connection interface information for connecting to the execution engine's server.</div>
</div>
<figure class="align-default" id="id16">
<a class="reference internal image-reference" href="../../_images/interface_information.png"><img alt="Submenu (Interface information)" src="../../_images/interface_information.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.65 </span><span class="caption-text">Submenu (Interface information)</span><a class="headerlink" href="#id16" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Edit</span> button to edit Interface information.</div>
</div>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="../../_images/registration_interface_information.gif"><img alt="Registration page (Interface information)" src="../../_images/registration_interface_information.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.66 </span><span class="caption-text">Registration page (Interface information)</span><a class="headerlink" href="#id17" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 Select from data fetched with &quot; <a class="reference internal" href="#ansible-common-aac-sync"><span class="std std-ref">Ansible Automation Controller data synchronization</span></a> &quot;.</div>
</div>
</div>
</li>
</ol>
</section>
<section id="ansible-automation-controller-host-list">
<span id="ansible-common-ansible-automation-controller-hosts"></span><h3><span class="section-number">1.5.3. </span>Ansible Automation Controller host list<a class="headerlink" href="#ansible-automation-controller-host-list" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">In the users can maintain (view/register/edit/discard) information required to execute RestAPI to the Ansible Automation Controller and information required to transfer files to Ansible Automation Controller.</div>
<div class="line">If it is in a cluster configuration, regsiter all hosts.</div>
<div class="line">The user does not need to register Ansible Automation Controller's hop node.</div>
</div>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="../../_images/ansible_automation_controller_host_list.png"><img alt="Submenu (Ansible Automation Controller Host list)" src="../../_images/ansible_automation_controller_host_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.67 </span><span class="caption-text">Submenu (Ansible Automation Controller Host list)</span><a class="headerlink" href="#id18" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Ansible Automation Controller host information.</div>
</div>
<figure class="align-default" id="id19">
<a class="reference internal image-reference" href="../../_images/ansible_automation_controller_host_list.gif"><img alt="Registration page (Ansible Automation Controller Host list)" src="../../_images/ansible_automation_controller_host_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.68 </span><span class="caption-text">Registration page (Ansible Automation Controller Host list)</span><a class="headerlink" href="#id19" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
</li>
</ol>
</section>
<section id="global-variable-management">
<span id="ansible-common-global-variable-list"></span><h3><span class="section-number">1.5.4. </span>Global variable management<a class="headerlink" href="#global-variable-management" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) global variable names used by Playbooks and interactive files.</div>
</div>
<figure class="align-default" id="id20">
<a class="reference internal image-reference" href="../../_images/global_variable_list.png"><img alt="Submenu (Global variable management)" src="../../_images/global_variable_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.69 </span><span class="caption-text">Submenu (Global variable management)</span><a class="headerlink" href="#id20" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register Global variables.</div>
</div>
<figure class="align-default" id="id21">
<a class="reference internal image-reference" href="../../_images/global_variable_list.gif"><img alt="Registration page (Global variable management)" src="../../_images/global_variable_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.70 </span><span class="caption-text">Registration page (Global variable management)</span><a class="headerlink" href="#id21" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
</li>
</ol>
</section>
<section id="file-management">
<span id="ansible-common-file-list"></span><h3><span class="section-number">1.5.5. </span>File management<a class="headerlink" href="#file-management" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) File materials and file embedded variables used by Playbook and Interactive files.</div>
<div class="line">By uploading file materials, users can specify what file material to use within the playbook by specifying file embedded variable names.</div>
</div>
<figure class="align-default" id="id22">
<a class="reference internal image-reference" href="../../_images/contents_list.png"><img alt="Submenu (File management)" src="../../_images/contents_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.71 </span><span class="caption-text">Submenu (File management)</span><a class="headerlink" href="#id22" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register file embedded variables.</div>
</div>
<figure class="align-default" id="id23">
<a class="reference internal image-reference" href="../../_images/contents_list.gif"><img alt="Registration page (File management)" src="../../_images/contents_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.72 </span><span class="caption-text">Registration page (File management)</span><a class="headerlink" href="#id23" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Ansible-Legacy・Ansible-LegacyRole file embedded variable example</strong></div>
<div class="line">This section contains examples of File embedded file names when describing File materials registered in <span class="menuselection">Ansible common ▶ File management</span> to Playbooks.</div>
<div class="line">※If the file name has a space in it, make sure to enclose it in quotation marks. Not doing so will end in an error.</div>
</div>
<div class="line-block">
<div class="line">Example)</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Using the file embedded variables to copy the hosts file registered in <span class="menuselection">Ansible common ▶ File management</span> to the target server's /etc/</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Register hosts file from <span class="menuselection">Ansible common ▶ File management</span>.</div>
</div>
<table class="docutils align-left" id="id24">
<caption><span class="caption-number">表 1.37 </span><span class="caption-text">File management registration contents</span><a class="headerlink" href="#id24" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File embedded variable name</p></th>
<th class="head"><p>File material</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Describe a Playbook similar to the one below.</div>
<div class="line">※Input file name for dest. If there is no file name, The Files with ITA Management numbers applied to their names will be processed before the registered file material's file name.</div>
<div class="line">　For example, for dest=/etc/, the file name will be /etc/&quot;String with 36 characters&quot;_hosts.</div>
</div>
<div class="line-block">
<div class="line"><strong>Writing Playbooks</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=&#39;{{ CPF_hosts }}&#39; dest=/etc/hosts</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><div class="line-block">
<div class="line">Unzipping the tool.tgz file registered in <span class="menuselection">Ansible common ▶ File management</span>  under the Target server's /usr/local/bin/ path using the file's file embedded variables.</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Register tool.tgz file from <span class="menuselection">Ansible common ▶ File management</span>.</div>
</div>
<table class="docutils align-left" id="id25">
<caption><span class="caption-number">表 1.38 </span><span class="caption-text">File management registration contents</span><a class="headerlink" href="#id25" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File embedded variable name</p></th>
<th class="head"><p>File collection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_tool_tgz</p></td>
<td><p>tool.tgz</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">Describe a Playbook similar to the one below.</div>
</div>
<div class="line-block">
<div class="line"><strong>Writing Playbooks</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">unarchive</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src={{ CPF_tool_tgz }} dest=/usr/local/bin</span>
</pre></div>
</div>
</li>
</ol>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line"><strong>Ansible-Pioneer file embedded variable example</strong></div>
<div class="line">This section contains examples of File embedded file names when describing File materials registered in <span class="menuselection">Ansible common ▶ File management</span> to Playbooks.</div>
<div class="line">※If the file name has a space in it, make sure to enclose it in quotation marks. Not doing so will end in an error.</div>
</div>
<div class="line-block">
<div class="line">e.g.)</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Using the file embedded variables to copy the hosts file registered in <span class="menuselection">Ansible common ▶ File management</span> to the target server's /etc/</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Register hosts file from <span class="menuselection">Ansible common ▶ File management</span>.</div>
</div>
<table class="docutils align-left" id="id26">
<caption><span class="caption-number">表 1.39 </span><span class="caption-text">File management registration contents</span><a class="headerlink" href="#id26" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File embedded variable names</p></th>
<th class="head"><p>File collection</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">The following is an example of writing an interactive file.</div>
<div class="line">※Make sure to describe the file name for the destination as well. If there is no file name, The Files with ITA Management numbers applied to their names will be processed before the registered file material's file name.</div>
<div class="line">　For example: For /etc/, the file name will be /etc/&quot;String with 36 characters&quot;_hosts.</div>
</div>
<div class="line-block">
<div class="line"><strong>Writing Interactive files</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Adjust timeout value according to the file size</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Authenticate login password for the target device.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="c1"># Transfer target to file deployed on the AAC side through scp command.</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__dnshostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;scp</span><span class="nv"> </span><span class="s">-o</span><span class="nv"> </span><span class="s">StrictHostKeyChecking=no</span><span class="nv"> </span><span class="s">-o</span><span class="nv"> </span><span class="s">UserKnownHostsFile=/dev/null</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_scp_user</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">VAR_aac_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">CPF_hosts</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">  </span><span class="c1"># Password login authentication for scp command (AAC side)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_scp_user_password</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="c1"># end of interactive file</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__dnshostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
<table class="docutils align-left" id="id27">
<caption><span class="caption-number">表 1.40 </span><span class="caption-text">Variable specific values</span><a class="headerlink" href="#id27" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Specific value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_scp_user</p></td>
<td><p>awx</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_scp_user_password</p></td>
<td><p>awx user password</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aac_host</p></td>
<td><p>Ansible Automation Controller</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</li>
</ul>
</div>
</section>
<section id="template-management">
<span id="ansible-common-template-list"></span><h3><span class="section-number">1.5.6. </span>Template management<a class="headerlink" href="#template-management" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) Template materials and Template embedded variables used by Playbook and Interactive files.</div>
<div class="line">By uploading template file materials, , users can specify what template file materials to use within the playbook by specifying template embedded variable names.</div>
</div>
<figure class="align-default" id="id28">
<a class="reference internal image-reference" href="../../_images/template_list.png"><img alt="Submenu (Template management)" src="../../_images/template_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.73 </span><span class="caption-text">Submenu (Template management)</span><a class="headerlink" href="#id28" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register template embedded variables.</div>
</div>
<figure class="align-default" id="id29">
<a class="reference internal image-reference" href="../../_images/template_list.gif"><img alt="Registration page (Template management)" src="../../_images/template_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.74 </span><span class="caption-text">Registration page (Template management)</span><a class="headerlink" href="#id29" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line"><strong>When variables defined within the templates are extracted</strong></div>
<div class="line">The variables defined within the template files are extracted by internal processes.</div>
<div class="line">The variables can have specific values registered to them in <span class="menuselection">Mode ▶ Susbtitute value auto registration settings</span>.</div>
<div class="line">The variables are not extracted in realtime, meaning that it may take time before they can be used in <span class="menuselection">Mode ▶ Susbtitute value auto registration settings</span>.</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">※1 <strong>Warnings regarding Variable definition</strong></div>
<div class="line">The variables used within template files must be defined in <span class="menuselection">Variable definition</span>.</div>
<div class="line">There are a total of 5 different types of variables that can be used within template files. see below for more information.</div>
<div class="line">If there are multiple variables with the same name defined, the variable structure must match. If the variable structure does not match, the registration will end in an error.</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">Variable name supplementary information</div>
<div class="line">vvv: Must be within 255 bytes and can contain half-width alphanumeric characters and underscores (_).</div>
<div class="line">xxx: Must be within 251 bytes half-width alphanumeric characters and underscores (_).</div>
<div class="line">Member variables can use all ascii characters (0x20～0x7e) except for the following 7 characters.</div>
<div class="line">&quot; . [ ] ' \ :</div>
<div class="line">Note that some characters cannot be used at the start of the variable name unless they are enclosed by quotation marks.</div>
<div class="line">For more inforamtion, see the official Ansible documents.</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line"><strong>Ansible-Legacy・Ansible-LegacyRoleでのテンプレート埋込変数の使用例</strong></div>
</div>
<div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ テンプレート管理</span> で登録したテンプレート素材をPlaybookに記述する場合、テンプレート埋込変数名を記述します。</div>
</div>
<div class="line-block">
<div class="line">※ファイル名にスペースなどが含まれている場合、適切にクォーテーションで囲まないと、作業実行時にエラーになる場合があります。</div>
</div>
<div class="line-block">
<div class="line">e.g.) <span class="menuselection">Ansible共通 ▶ テンプレート管理</span> で登録したhostsファイルをテンプレート埋込変数を使用して作業対象サーバの/etc/配下に設置する場合</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ テンプレート管理</span> からhostsファイルを登録します。</div>
</div>
<table class="docutils align-left" id="id30">
<caption><span class="caption-number">表 1.41 </span><span class="caption-text">テンプレート管理の登録内容</span><a class="headerlink" href="#id30" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>テンプレート埋込変数名</p></th>
<th class="head"><p>テンプレート素材</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">下記のようにPlaybookを記述します。</div>
<div class="line">※destはファイル名も記述してください。ファイル名の指定がない場合、登録したテンプレート素材のファイル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</div>
<div class="line">　たとえば、dest=/etc/ とした場合、ファイル名は/etc/36桁の文字列_hostsとなります。</div>
</div>
<div class="line-block">
<div class="line"><strong>Playbookの記述</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">src=&#39;{{ TPF_hosts }}&#39; dest=/etc/hosts</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line"><strong>Ansible-Pioneerでのテンプレート埋込変数の使用例</strong></div>
</div>
<div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ テンプレート管理</span> で登録したテンプレート素材を対話ファイルに記述する場合、テンプレート埋込変数名を記述します。</div>
</div>
<div class="line-block">
<div class="line">※ファイル名にスペースなどが含まれている場合、適切にクォーテーションで囲まないと、作業実行時にエラーになる場合があります。</div>
</div>
<div class="line-block">
<div class="line">e.g.) <span class="menuselection">Ansible共通 ▶ テンプレート管理</span> で登録したhostsファイルをテンプレート埋込変数を使用して作業対象サーバの/etc/配下に設置する場合</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ テンプレート管理</span> からhostsファイルを登録します。</div>
</div>
<table class="docutils align-left" id="id31">
<caption><span class="caption-number">表 1.42 </span><span class="caption-text">テンプレート管理の登録内容</span><a class="headerlink" href="#id31" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>テンプレート埋込変数名</p></th>
<th class="head"><p>テンプレート素材</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
</li>
<li><div class="line-block">
<div class="line">下記のように対話ファイルを記述します。</div>
<div class="line">※転送先はファイル名も記述してください。ファイル名の指定がない場合、登録したテンプレート素材のファイル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</div>
<div class="line">　たとえば、/etc/. とした場合、ファイル名は/etc/36桁の文字列_hostsとなります。</div>
</div>
<div class="line-block">
<div class="line"><strong>対話ファイルの記述</strong></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conf</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ファイルのサイズでタイマ値調整</span>
<span class="w">  </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="nt">exec_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># 対象機器へのログインパスワード認証</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginpassword__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="c1"># 作業対象側よりscpコマンドでAAC側に配置されているファイルを作業対象にファイル転送</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__dnshostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;scp</span><span class="nv"> </span><span class="s">-o</span><span class="nv"> </span><span class="s">StrictHostKeyChecking=no</span><span class="nv"> </span><span class="s">-o</span><span class="nv"> </span><span class="s">UserKnownHostsFile=/dev/null</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">VAR_scp_user</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">VAR_aac_host</span><span class="nv"> </span><span class="s">}}:{{</span><span class="nv"> </span><span class="s">TPF_hosts</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">/etc/hosts&#39;</span>
<span class="w">  </span><span class="c1"># scpコマンドのパスワードログイン認証(AAC側)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;password:&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">VAR_scp_user_password</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">  </span><span class="c1"># 対話ファイル終了</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">__loginuser__</span><span class="nv"> </span><span class="s">}}@{{</span><span class="nv"> </span><span class="s">__dnshostname__</span><span class="nv"> </span><span class="s">}}&#39;</span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exit</span>
</pre></div>
</div>
<table class="docutils align-left" id="id32">
<caption><span class="caption-number">表 1.43 </span><span class="caption-text">変数の具体値</span><a class="headerlink" href="#id32" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 42.9%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>変数</p></th>
<th class="head"><p>具体値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>VAR_scp_user</p></td>
<td><p>awx</p></td>
</tr>
<tr class="row-odd"><td><p>VAR_scp_user_password</p></td>
<td><p>awxユーザパスワード</p></td>
</tr>
<tr class="row-even"><td><p>VAR_aac_host</p></td>
<td><p>Ansible Automation Controller</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</section>
<section id="unmanaged-target-variable-list">
<span id="ansible-common-unmanaged-var-list"></span><h3><span class="section-number">1.5.7. </span>Unmanaged target variable list<a class="headerlink" href="#unmanaged-target-variable-list" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Maintains (view/register/edit/discard) variables extracted from &quot;<a class="reference internal" href="#ansible-common-var-listup"><span class="std std-ref">Variable extraction files</span></a>&quot; the user dont want to display to <span class="menuselection">Mode ▶ Susbtitute value auto registration settings</span>'s  <span class="menuselection">Movement name:Variable name</span></div>
<div class="line">Ansible magic variables are registered when ITA is installed.</div>
</div>
<figure class="align-default" id="id33">
<a class="reference internal image-reference" href="../../_images/unmanaged_var_list.png"><img alt="Submenu (Unmanaged target variable list)" src="../../_images/unmanaged_var_list.png" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.75 </span><span class="caption-text">Submenu (Unmanaged target variable list)</span><a class="headerlink" href="#id33" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">Press the <span class="guilabel">Register</span> button to register umnamaged variables.</div>
</div>
<figure class="align-default" id="id34">
<a class="reference internal image-reference" href="../../_images/unmanaged_var_list.gif"><img alt="Registration page (Unmanaged target variable list)" src="../../_images/unmanaged_var_list.gif" style="width: 800px;" />
</a>
<figcaption>
<p><span class="caption-number">図 1.76 </span><span class="caption-text">Registration page (Unmanaged target variable list)</span><a class="headerlink" href="#id34" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</li>
<li><div class="line-block">
<div class="line">The items found in the Registration page are as following.</div>
</div>
</li>
</ol>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">1.6. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h2>
<section id="backyard-contents">
<span id="ansible-common-backyard-content"></span><h3><span class="section-number">1.6.1. </span>BackYard contents<a class="headerlink" href="#backyard-contents" title="Link to this heading">¶</a></h3>
<section id="ansible-automation-controller-data-synchronization">
<span id="ansible-common-aac-sync"></span><h4>Ansible Automation Controller data synchronization<a class="headerlink" href="#ansible-automation-controller-data-synchronization" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Fetches resources registered to Ansible Automation Controller if the <span class="menuselection">Execution engine</span> in <span class="menuselection">Ansible common ▶ Interface information</span> is set to &quot;Ansible Automation Controller&quot;.</div>
</div>
<table class="docutils align-left" id="id35">
<caption><span class="caption-number">表 1.44 </span><span class="caption-text">Resources fetched from Ansible Automation Controller</span><a class="headerlink" href="#id35" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 16.7%" />
<col style="width: 83.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Resource</p></th>
<th class="head"><p>Application</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Organization name</p></td>
<td><div class="line-block">
<div class="line">Used with the <span class="menuselection">Organization name</span>  list selection in <span class="menuselection">Ansible common ▶ Interface information</span>.</div>
<div class="line">Organizations can be seen by users who input the <span class="menuselection">Ansible common ▶ Interface information</span>'s <span class="menuselection">Authentication token</span>.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Instance group</p></td>
<td><div class="line-block">
<div class="line">Used with the <span class="menuselection">Instance group</span> list selection in <span class="menuselection">Ansible common ▶ Device list</span>.</div>
<div class="line">Instance groups can be seen by organizations selected in <span class="menuselection">Ansible common ▶ Interface information</span>'s <span class="menuselection">Organization name</span>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Execution environment</p></td>
<td><div class="line-block">
<div class="line">Used with the <span class="menuselection">Execution environment</span> list selection in <span class="menuselection">Ansible mode ▶ Movement list</span>.</div>
<div class="line">Execution envrionments can be seen by organizations selected in <span class="menuselection">Ansible common ▶ Interface information</span>'s <span class="menuselection">Organization name</span>.</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="inventory-files-created-by-ita">
<span id="ansible-common-inventory-file"></span><h3><span class="section-number">1.6.2. </span>Inventory files created by ITA.<a class="headerlink" href="#inventory-files-created-by-ita" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">This section explains inventory files created by ITA.</div>
<div class="line">The inventory files created by ITA are as following.</div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">all</span><span class="p">:</span>
<span class="w">  </span><span class="nt">children</span><span class="p">:</span>
<span class="w">    </span><span class="nt">hostgroups</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Inventory_host</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Inventory_host_parameters</span><span class="p">:</span>
<span class="w">          </span><span class="nt">Inventory_host_option_parameters</span><span class="p">:</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Inventory_host has <span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">Host name</span> configured to it.</div>
<div class="line">Inventory_host_option_parameters has <span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">Inventory file additional option</span> configured to it.</div>
<div class="line">The parameters configured to Inventory_host_parameters are as following.</div>
<div class="line">If the setting value items have empty parameters, they will not be configured to Inventory_host_parameters</div>
</div>
<table class="docutils align-left" id="id36">
<caption><span class="caption-number">表 1.45 </span><span class="caption-text">Inventory_host_parameters parameter list</span><a class="headerlink" href="#id36" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 16.7%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 27.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Parameter name</p></th>
<th class="head" colspan="5"><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">Authentication method</span></p></th>
<th class="head" rowspan="2"><p>Setting value</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Password authentication</p></th>
<th class="head"><p>Key authentication</p>
<blockquote>
<div><p>(No passphrase)</p>
</div></blockquote>
</th>
<th class="head"><p>Key authentication</p>
<blockquote>
<div><p>(With passphrase)</p>
</div></blockquote>
</th>
<th class="head"><p>Key authentication</p>
<blockquote>
<div><p>(Key changed)</p>
</div></blockquote>
</th>
<th class="head"><p>Password authentication
Authentication (winrm)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>ansible_host</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">DNS host</span> or <span class="menuselection">DNS host IP address</span>.
Changes depending on the contents selected in <span class="menuselection">Mode ▶ Movement list</span>'s <span class="menuselection">host specification format</span>.</p></td>
</tr>
<tr class="row-even"><td><p>ansible_user</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s :menuselection:` login user`</p></td>
</tr>
<tr class="row-odd"><td><p>ansible_password</p></td>
<td><p>〇</p></td>
<td></td>
<td></td>
<td></td>
<td><p>〇</p></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">login password</span></p></td>
</tr>
<tr class="row-even"><td><p>ansible_ssh_private_key_file</p></td>
<td></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
<td></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">ssh secret key file</span></p></td>
</tr>
<tr class="row-odd"><td><p>ansible_ssh_extra_args</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">connection option</span></p></td>
</tr>
<tr class="row-even"><td><p>ansible_connection:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>〇</p></td>
<td><p>winrm</p></td>
</tr>
<tr class="row-odd"><td><p>ansible_port</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>〇</p></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">WinRM connection information ▶ Port number</span></p></td>
</tr>
<tr class="row-even"><td><p>ansible_winrm_ca_trust_path</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>〇</p></td>
<td><p><span class="menuselection">Ansible common ▶ Device list</span>'s <span class="menuselection">WinRM connection information ▶ Server certificate</span></p></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">〇: Setting target</div>
</div>
</div>
</section>
<section id="option-parameter-list">
<span id="ansible-common-option-parameter-list"></span><h3><span class="section-number">1.6.3. </span>Option parameter list<a class="headerlink" href="#option-parameter-list" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> と <span class="menuselection">各モード ▶ Movement一覧</span> の <span class="menuselection">オプションパラメータ</span> について説明します。</div>
<div class="line">ITAでは、以下の優先順位でオプションパラメータを設定します。単一の値しか許容していないパラメータを複数定義した場合、 <span class="menuselection">各モード ▶ Movement一覧</span> の <span class="menuselection">オプションパラメータ</span> が有効になります。</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><span class="menuselection">各モード ▶ Movement一覧</span> の <span class="menuselection">オプションパラメータ</span></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">オプションパラメータ</span></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line">▼ <span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Core」と「Ansible Execution Agent」の場合</div>
<div class="line">　　ansible-playbookコマンドのオプションパラメータを入力します。</div>
<div class="line">　　ansible-playbookコマンドのオプションパラメータの仕様については、以下のコマンドを実行して表示されたヘルプを参照してください。</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ansible-playbook -h
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line">▼ <span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Automation Controller」の場合に</div>
<div class="line">　　入力可能なオプションパラメータは以下のとおりです。</div>
<div class="line"><br /></div>
</div>
<table class="docutils align-left" id="id37">
<caption><span class="caption-number">表 1.46 </span><span class="caption-text">Ansible Automation Controllerの場合に指定可能なオプションパラメータ一覧</span><a class="headerlink" href="#id37" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 14.3%" />
<col style="width: 21.4%" />
<col style="width: 28.6%" />
<col style="width: 35.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>オプションパラメータ</p></th>
<th class="head"><p>指定方法</p></th>
<th class="head"><p>Ansible Automation Controllerの設定箇所</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">-v</div>
<div class="line">--verbose</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-v</div>
<div class="line">-vv</div>
<div class="line">-vvv</div>
<div class="line">-vvvv</div>
<div class="line">-vvvvv</div>
<div class="line">--verbose</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">詳細</span> に v の数が設定される。</p></td>
<td><div class="line-block">
<div class="line">・vの合計値を適用</div>
<div class="line">・--verboseは、-vと同様</div>
<div class="line">例：--verbose -vvv の場合、-vvvvと同様</div>
<div class="line">・vを6以上指定した場合 、vは5の指定となる</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-f</div>
<div class="line">--forks</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-f FORKS</div>
<div class="line">--forks=FORKS</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">フォーク</span> にFORKSの値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・FORKSには数値を指定</div>
<div class="line">・複数定義した場合、最後に定義したパラメータが有効</div>
<div class="line">例：-f 1-forks=10の場合、--forks=10が有効となる</div>
<div class="line">・数値以外が指定された場合、エラーとなる</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">-l</div>
<div class="line">--limit</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-l SUBSET</div>
<div class="line">--limit=SUBSET</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">制限</span> にSUBMITの値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・SUBSET:機器一覧にあるホスト名</div>
<div class="line">・複数定義した場合、最後に定義したパラメータが有効</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-e</div>
<div class="line">--extra-vars</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-e EXTRA_VARS</div>
<div class="line">--extra-vars=EXTRA_VARS</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">追加変数</span> にEXTRA_VARSの値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・EXTRA_VARS:変数名、具体値をjson形式またはyaml形式</div>
<div class="line">e.g.) json形式の場合</div>
<div class="line">　-extra-vars={&quot;VAR_1&quot;:&quot;directory&quot;}</div>
<div class="line">e.g.) yaml形式の場合</div>
<div class="line">　-extra-vars=VAR_1:directory</div>
<div class="line">・複数定義した場合、最後に定義したパラメータが有効</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">-t</div>
<div class="line">--tags</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-t TAGS</div>
<div class="line">--tags=TAGS</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">ジョブタグ</span> にTAGSの値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・TAGS:タグ名</div>
<div class="line">・複数個のパラメータを許容</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-b</div>
<div class="line">--become</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-b</div>
<div class="line">--become</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">権限昇格の有効化</span> がチェックされる。</p></td>
<td><p>・少なくとも1つ指定すればパラメータが有効</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">-D</div>
<div class="line">--diff</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-D</div>
<div class="line">--diff</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">変更</span> の表示が有効化される。</p></td>
<td><p>・少なくとも1つ指定すればパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><p>--skip-tags</p></td>
<td><p>--skip-tags=SKIP_TAGS</p></td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">スキップタグ</span> にSKIP_TAGSの値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・SKIP_TAGS:スキップタグ名</div>
<div class="line">・複数個のパラメータを許容</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>--start-at-task</p></td>
<td><p>--start-at-task=START_AT_TASK</p></td>
<td><div class="line-block">
<div class="line">※Ansible Automation ControllerのWebUI には--start-at-taskの表示はありません。</div>
<div class="line">ansible-playbookコマンドの--start-at-taskと同様の扱いになります。</div>
</div>
</td>
<td><p>・複数定義した場合、最後に定義したパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-ufc</div>
<div class="line">--use _fact_cache</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-ufc</div>
<div class="line">--use_fact_cache</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">ファクトキャッシュの有効化</span> がチェックされる。</p></td>
<td><p>・少なくとも1つ指定すればパラメータが有効</p></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">-as</div>
<div class="line">--allow_simultaneous</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-as</div>
<div class="line">--allow_simultaneous</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">同時実行ジョブの有効化</span> がチェックされる。</p></td>
<td><p>・少なくとも1つ指定すればパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-jsc</div>
<div class="line">--jobslice_count</div>
</div>
</td>
<td><div class="line-block">
<div class="line">-jsc ジョブスライス数</div>
<div class="line">--job_slice_count=ジョブスライス数</div>
</div>
</td>
<td><p><span class="menuselection">テンプレート</span> の <span class="menuselection">ジョブスライス数</span> にジョブスライス数の値が設定される。</p></td>
<td><div class="line-block">
<div class="line">・ジョブスライス数には数値を指定</div>
<div class="line">・複数定義した場合、最後に定義したパラメータが有効</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">※Ansible Automation Controllerのオプションパラメータの仕様については、Ansible Automation Controller公式マニュアルのユーザガイドのジョブテンプレートを参照してください。</div>
</div>
</section>
<section id="data-resources-deleted-when-executed">
<span id="ansible-common-aac-resources-list"></span><h3><span class="section-number">1.6.4. </span>Data resources deleted when executed<a class="headerlink" href="#data-resources-deleted-when-executed" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行時データ削除</span> で「true」を選択した場合に、削除されるデータリソースは以下のとおりです。</div>
</div>
<section id="ansible-ansible-automation-controller">
<h4><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Automation Controller」の場合<a class="headerlink" href="#ansible-ansible-automation-controller" title="Link to this heading">¶</a></h4>
<table class="docutils align-left" id="id38">
<caption><span class="caption-number">表 1.47 </span><span class="caption-text">実行時データ削除で削除されるデータリソース一覧(Ansible Automation Controller側)</span><a class="headerlink" href="#id38" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>データリソース</p></th>
<th class="head"><p>リソースタイプ</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ITA作業用ディレクトリ</p>
<p>/var/lib/exastro/ita_&lt;区分&gt;_executions_作業番号</p>
</td>
<td><p>ディレクトリ</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SCM管理ディレクトリ</p>
<p>/var/lib/awx/projects/ita_&lt;区分&gt;_executions_作業番号</p>
</td>
<td><p>ディレクトリ</p></td>
<td><p>※プロジェクトリソースの削除により削除される</p></td>
</tr>
<tr class="row-even"><td><p>インベントリ</p>
<p>リソース名: ita_&lt;区分&gt;_executions_inventory_作業番号_通番</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>認証情報</p>
<p>リソース名: ita_&lt;区分&gt;_executions_credential_作業番号_通番</p>
<p>　　　　　　ita_&lt;区分&gt;_executions_vault_credential_作業番号</p>
<p>　　　　　　ita_&lt;区分&gt;_executions_git_credential_作業番号</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>プロジェクト</p>
<p>リソース名: ita_&lt;区分&gt;_executions_project_作業番号</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ジョブテンプレート</p>
<p>リソース名: ita_&lt;区分&gt;_executions_jobtpl_作業番号_通番</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ワークフロージョブテンプレート</p>
<p>リソース名: ita_&lt;区分&gt;_executions_workflowtpl_作業番号</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ジョブ</p>
<p>リソース名: Job番号—ita_&lt;区分&gt;_executions_workflowtpl_作業番号</p>
<p>　　　　　　Job番号—ita_&lt;区分&gt;_executions_jobtpl_作業番号</p>
</td>
<td><p>リソース</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">&lt;区分&gt;: 作業実行したモード</div>
<div class="line">　　　　　legacy: legacy</div>
<div class="line">　　　　　legacy role: legacy_role</div>
<div class="line">　　　　　pioneer: pioneer</div>
</div>
</div>
<table class="docutils align-left" id="id39">
<caption><span class="caption-number">表 1.48 </span><span class="caption-text">実行時データ削除で削除されるデータリソース一覧(ITA側)</span><a class="headerlink" href="#id39" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>データリソース</p></th>
<th class="head"><p>リソースタイプ</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Git リポジトリ</p>
<p>/tmp/git_repositories/&lt;区分&gt;_作業番号</p>
</td>
<td><p>Gitリポジトリ</p></td>
<td><p>ディレクトリごと削除</p>
<p>※ <span class="menuselection">実行時データ削除</span> の
設定値に関係なく削除される。</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="ansible-ansible-execution-agent">
<h4><span class="menuselection">Ansible共通 ▶ インターフェース情報</span> の <span class="menuselection">実行エンジン</span> が「Ansible Execution Agent」の場合<a class="headerlink" href="#ansible-ansible-execution-agent" title="Link to this heading">¶</a></h4>
<table class="docutils align-left" id="id40">
<caption><span class="caption-number">表 1.49 </span><span class="caption-text">実行時データ削除で削除されるデータリソース一覧(Ansible Execution Agent側)</span><a class="headerlink" href="#id40" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>データリソース</p></th>
<th class="head"><p>リソースタイプ</p></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ITA作業用ディレクトリ</p>
<p>&lt;storage&gt;/&lt;org&gt;/&lt;ws&gt;/driver/ag_ansible_execution/&lt;区分&gt;/作業番号</p>
<p>&lt;storage&gt;/&lt;org&gt;/&lt;ws&gt;/ag_ansible_execution/status</p>
</td>
<td><p>ディレクトリ</p></td>
<td></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">&lt;storage&gt;: Ansible Execution Agentインストール時にSpecify full path for the data storage locationで設定したバス</div>
<div class="line">&lt;org&gt;:Ansible Execution Agentインストール時にInput ORGANIZATION_ID.で設定したORGANIZATION ID</div>
<div class="line">&lt;ws&gt;:Ansible Execution Agentインストール時にInput WORKSPACE_ID.で設定したWORKSPACE ID</div>
</div>
</div>
</section>
</section>
<section id="using-ita-original-variables-in-ansible-automation-controller">
<span id="ansible-common-ita-org-var-ipoint-note"></span><h3><span class="section-number">1.6.5. </span>Using ITA original variables in Ansible Automation Controller<a class="headerlink" href="#using-ita-original-variables-in-ansible-automation-controller" title="Link to this heading">¶</a></h3>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="index.html" title="前のトピックへ"><span>前のトピックへ</span>Ansible Driver</a></li>
    <li class="next"><a href="ansible_legacy.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">2. </span>Ansible-Legacy</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>