<!DOCTYPE html>

<html lang="ja" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144561796-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-144561796-1');
    </script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Helm chart (Kubernetes) - Online &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fe63c2af" />
    <link rel="stylesheet" type="text/css" href="../../../_static/option.css?v=49ab891d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/exastro_documents.css?v=57fb2187" />
    <link rel="stylesheet" type="text/css" href="../../../_static/swagger/swagger-ui.css?v=ab82c586" />
    
    <script src="../../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=3e58b9f8"></script>
    <script src="../../../_static/tabs.js?v=3030b3cb"></script>
    <script src="../../../_static/translations.js?v=4755f45a"></script>
    <script src="../../../_static/jquery-3.6.3.min.js?v=25455f10"></script>
    <script src="../../../_static/exastro_documents.js?v=ff50fb31"></script>
    <script src="../../../_static/swagger/swagger-ui-bundle.js?v=ec73a32a"></script>
    <script src="../../../_static/swagger/swagger-ui-standalone-preset.js?v=88d26966"></script>
    <link rel="icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="Docker Compose - Online" href="docker_compose.html" />
    <link rel="prev" title="Exastro" href="index.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><a href="https://ita.exastro.org/"><img src="../../../_static/img/exastro.svg" alt="Exastro"></a></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
              <option value="../../../../../ja/2.5/installation/online/exastro/kubernetes.html" selected>current</option>
              <option value="../../../../../ja/2.5/installation/online/exastro/kubernetes.html" selected>2.5(current)</option>
              <option value="../../../../../ja/2.4/installation/online/exastro/kubernetes.html">2.4</option>
              <option value="../../../../../ja/2.3/installation/online/exastro/kubernetes.html">2.3</option>
              <option value="../../../../../ja/2.2/installation/online/exastro/kubernetes.html">2.2</option>
              <option value="../../../../../ja/2.1/installation/online/exastro/kubernetes.html">2.1</option>
              <option value="../../../../../ja/2.0/installation/online/exastro/kubernetes.html">2.0</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
              <option value="../../../../../ja/2.5/installation/online/exastro/kubernetes.html" selected>日本語</option>
              <option value="../../../../../en/2.5/installation/online/exastro/kubernetes.html">English</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="index.html" title="前のトピックへ">Exastro</a></li>
        <li class="next"><a href="docker_compose.html" title="次のトピックへ">Docker Compose - Online</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../configuration/index.html">Configuration and Construction guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Installation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Online</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Exastro</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Helm chart (Kubernetes) - Online</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l5"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l5"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l5"><a class="reference internal" href="#preparation">Preparation</a></li>
<li class="toctree-l5"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l5"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l5"><a class="reference internal" href="#uninstall">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="docker_compose.html">Docker Compose - Online</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../oase_agent/index.html">OASE Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ansible_execution_agent/index.html">Ansible Execution Agent</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../offline/index.html">Offline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../learn/index.html">Learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../manuals/index.html">Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">貢献</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->


<div id="tableOfContents">
  <div id="tocButton"></div>
  <ul>
<li><a class="reference internal" href="#">Helm chart (Kubernetes) - Online</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#preparation">Preparation</a><ul>
<li><a class="reference internal" href="#register-helm-repository">Register Helm repository</a></li>
<li><a class="reference internal" href="#fetch-default-setting-values">Fetch default setting values</a></li>
<li><a class="reference internal" href="#service-publish-settings">Service publish settings</a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#setting-example">Setting example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-link">Database link</a></li>
<li><a class="reference internal" href="#app-db-user-settings">App DB user settings</a><ul>
<li><a class="reference internal" href="#id3">Setting example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gitlab-link-settings">GitLab link settings</a></li>
<li><a class="reference internal" href="#proxy-settings">Proxy settings</a></li>
<li><a class="reference internal" href="#create-exastro-system-admin">Create Exastro system admin</a></li>
<li><a class="reference internal" href="#configure-persistent-volume">Configure Persistent volume</a></li>
</ul>
</li>
<li><a class="reference internal" href="#install">Install</a><ul>
<li><a class="reference internal" href="#create-persistent-volumes">Create Persistent volumes</a></li>
<li><a class="reference internal" href="#ita-install">Install</a></li>
<li><a class="reference internal" href="#log-in-to-managment-console">Log in to Managment console</a></li>
</ul>
</li>
<li><a class="reference internal" href="#update">Update</a><ul>
<li><a class="reference internal" href="#update-preparation">Update preparation</a><ul>
<li><a class="reference internal" href="#update-helm-repository">Update Helm repository</a></li>
<li><a class="reference internal" href="#check-default-setting-values-and-update-data">Check default setting values and update data</a></li>
<li><a class="reference internal" href="#update-setting-values">Update setting values</a></li>
<li><a class="reference internal" href="#specify-encryption-key">Specify Encryption key</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ita-upgrade">Update</a><ul>
<li><a class="reference internal" href="#stop-service">Stop service</a></li>
<li><a class="reference internal" href="#start-update">Start Update</a></li>
<li><a class="reference internal" href="#restart-service">Restart service</a></li>
<li><a class="reference internal" href="#confirm-update-status">Confirm Update status.</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#uninstall">Uninstall</a><ul>
<li><a class="reference internal" href="#uninstall-preparation">Uninstall preparation</a></li>
<li><a class="reference internal" href="#id6">Uninstall</a><ul>
<li><a class="reference internal" href="#start-uninstall">Start Uninstall</a></li>
<li><a class="reference internal" href="#delete-persistent-volumes">Delete persistent volumes</a><ul>
<li><a class="reference internal" href="#for-databases">For Databases</a></li>
<li><a class="reference internal" href="#for-files">For Files</a></li>
<li><a class="reference internal" href="#for-oase">For OASE</a></li>
<li><a class="reference internal" href="#for-gitlab">For GitLab</a></li>
<li><a class="reference internal" href="#for-monitoring-log-files">For Monitoring log files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deleting-persistent-data">Deleting Persistent data</a><ul>
<li><a class="reference internal" href="#id7">For Databases</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">For Files</a><ul>
<li><a class="reference internal" href="#id9">For OASE</a></li>
<li><a class="reference internal" href="#id10">For GitLab</a></li>
<li><a class="reference internal" href="#id11">For Monitoring log files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>


<div id="contents">
<main class="divInner">

 <div id="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">HOME</a></li>
    <li><a href="../../index.html">Installation</a></li>
    <li><a href="../index.html">Online</a></li>
    <li><a href="index.html">Exastro</a></li>
    
    <li>Helm chart (Kubernetes) - Online</li>
  </ul>
</div>

<div id="article">
<article class="divInner">
<div class="body" role="main">

  <script>
$(window).on('load', function () {
   setTimeout(function(){
     for (var i = 0; i < $("table.filter-table").length; i++) {
       $("[id^='ft-data-" + i + "-2-r']").removeAttr("checked");
       $("[id^='select-all-" + i + "-2']").removeAttr("checked");
       $("[id^='ft-data-" + i + "-2-r'][value^='可']").prop('checked', true);
       $("[id^='ft-data-" + i + "-2-r'][value*='必須']").prop('checked', true);
       tFilterGo(i);
     }
   },200);
});
</script><section id="helm-chart-kubernetes-online">
<h1>Helm chart (Kubernetes) - Online<a class="headerlink" href="#helm-chart-kubernetes-online" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This document aims to explain how to install Exastro Platform and/or Exastro IT Automation on Kubernetes.</div>
</div>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This method allows the user to install Exastro IT Automation with the highest level of availability and service.</div>
<div class="line">For a more simple installation for testing and temporary usage, we recommend the <a class="reference internal" href="docker_compose.html"><span class="doc">Docker Compose version</span></a>.</div>
</div>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Client requirements</p>
<div class="line-block">
<div class="line">The following describes confirmed compatible client application as well as their versions.</div>
</div>
<table class="docutils align-default" id="id12">
<caption><span class="caption-number">表 1 </span><span class="caption-text">Client requirements</span><a class="headerlink" href="#id12" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Application</p></th>
<th class="head"><p>Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Helm</p></td>
<td><p>v3.9.x</p></td>
</tr>
<tr class="row-odd"><td><p>kubectl</p></td>
<td><p>1.23</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Deploy environment</p>
<div class="line-block">
<div class="line">The following describes confirmed compatible operation systems as well as their versions.</div>
</div>
<table class="docutils align-default" id="id13">
<caption><span class="caption-number">表 2 </span><span class="caption-text">Hardware requirements (minimum requirements)</span><a class="headerlink" href="#id13" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Resource type</p></th>
<th class="head"><p>Required resource</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPU</p></td>
<td><p>2 Cores (3.0 GHz, x86_64)</p></td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>4GB</p></td>
</tr>
<tr class="row-even"><td><p>Storage (Container image size)</p></td>
<td><p>10GB</p></td>
</tr>
<tr class="row-odd"><td><p>Kubernetes (Container image size)</p></td>
<td><p>1.23 or later</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id14">
<caption><span class="caption-number">表 3 </span><span class="caption-text">Hardware requirements (Recommended requirements)</span><a class="headerlink" href="#id14" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Resource type</p></th>
<th class="head"><p>Required resource</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPU</p></td>
<td><p>4 Cores (3.0 GHz, x86_64)</p></td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>16GB</p></td>
</tr>
<tr class="row-even"><td><p>Storage (Container image size)</p></td>
<td><p>120GB</p></td>
</tr>
<tr class="row-odd"><td><p>Kubernetes (Container image size)</p></td>
<td><p>1.23 or later</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">The required resources for the minimum configuration are for Exastro IT Automation's core functions. Additional resources will be required if you are planning to deploy external systems, such as GitLab and Ansible Automation Platform.</div>
<div class="line">Users will have to prepare an additional storage area if they wish to persist databases or files.</div>
<div class="line">The storage space is only an estimate and varies based on the user's needs. Make sure to take that into account when securing storage space.</div>
</div>
</div>
</li>
<li><p>Communication Protocols</p>
<ul class="simple">
<li><p>The client must be able to access the deploying container environment.</p></li>
<li><p>The user will need 2 ports. One for the Platform administrator and one for normal users.</p></li>
<li><p>The user must be able to connect to Docker Hub in order to acquire the container image from the container environment.</p></li>
</ul>
</li>
<li><p>External components</p>
<ul class="simple">
<li><p>MariaDB or MySQL server</p></li>
<li><p>Must be able to create Gitlab accounts and repositories.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If the user is construcing the GitLab environment on the same cluster, the GitLab's minimum system requirements changes in order to support the additional load.</div>
<div class="line">If the user is construcing the Database environment on the same cluster, the Database's minimum system requirements changes in order to support the additional load.</div>
</div>
</div>
</li>
</ul>
</section>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Link to this heading">¶</a></h2>
<section id="register-helm-repository">
<h3>Register Helm repository<a class="headerlink" href="#register-helm-repository" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The Exastro system is constructed by the following 2 applications.</div>
<div class="line">All the Exastro tools exists on the same Helm repository.</div>
</div>
<ul class="simple">
<li><p>Shared Platform (Exastro Platform)</p></li>
<li><p>Exastro IT Automation</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 100.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Repository</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://exastro-suite.github.io/exastro-helm/">https://exastro-suite.github.io/exastro-helm/</a></p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-number">リスト 1 </span><span class="caption-text">Cmmand</span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Register Exastro system&#39;s Helm repository.</span>
<span class="linenos">2</span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>exastro<span class="w"> </span>https://exastro-suite.github.io/exastro-helm/<span class="w"> </span>--namespace<span class="w"> </span>exastro
<span class="linenos">3</span><span class="c1"># Update repository information</span>
<span class="linenos">4</span>helm<span class="w"> </span>repo<span class="w"> </span>update
</pre></div>
</div>
</div>
</section>
<section id="fetch-default-setting-values">
<h3>Fetch default setting values<a class="headerlink" href="#fetch-default-setting-values" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The following command outputs the values.yaml default values. This makes it easier to manage the input parameters.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-number">リスト 2 </span><span class="caption-text">Command</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>show<span class="w"> </span>values<span class="w"> </span>exastro/exastro<span class="w"> </span>&gt;<span class="w"> </span>exastro.yaml
</pre></div>
</div>
</div>
<details>
  <summary>exastro.yaml</summary><div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-number">リスト 3 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id17" title="Link to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># Default values for Exastro.</span>
<span class="linenos">  2</span><span class="c1"># This is a YAML-formatted file.</span>
<span class="linenos">  3</span><span class="c1"># Declare variables to be passed into your templates.</span>
<span class="linenos">  4</span><span class="nt">global</span><span class="p">:</span>
<span class="linenos">  5</span><span class="w">  </span><span class="nt">itaGlobalDefinition</span><span class="p">:</span>
<span class="linenos">  6</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos">  7</span><span class="w">      </span><span class="nt">DEFAULT_LANGUAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ja&quot;</span>
<span class="linenos">  8</span><span class="w">      </span><span class="nt">LANGUAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="linenos">  9</span><span class="w">      </span><span class="nt">TZ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Asia/Tokyo&quot;</span>
<span class="linenos"> 10</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 11</span><span class="w">      </span><span class="nt">ENCRYPT_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos"> 12</span><span class="w">    </span><span class="nt">persistence</span><span class="p">:</span>
<span class="linenos"> 13</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos"> 14</span><span class="w">      </span><span class="nt">accessMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<span class="linenos"> 15</span><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10Gi</span>
<span class="linenos"> 16</span><span class="w">      </span><span class="nt">volumeType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hostPath</span><span class="w"> </span><span class="c1"># e.g.) hostPath or AKS</span>
<span class="linenos"> 17</span><span class="w">      </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="c1"># e.g.) azurefile or - (None)</span>
<span class="linenos"> 18</span><span class="w">      </span><span class="c1"># matchLabels:</span>
<span class="linenos"> 19</span><span class="w">      </span><span class="c1">#   release: &quot;stable&quot;</span>
<span class="linenos"> 20</span><span class="w">      </span><span class="c1"># matchExpressions:</span>
<span class="linenos"> 21</span><span class="w">      </span><span class="c1">#   - {key: environment, operator: In, values: [dev]}</span>
<span class="linenos"> 22</span><span class="w">  </span><span class="nt">itaDatabaseDefinition</span><span class="p">:</span>
<span class="linenos"> 23</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 24</span><span class="w">      </span><span class="nt">DB_VENDOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb&quot;</span>
<span class="linenos"> 25</span><span class="w">      </span><span class="nt">DB_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb&quot;</span>
<span class="linenos"> 26</span><span class="w">      </span><span class="nt">DB_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3306&quot;</span>
<span class="linenos"> 27</span><span class="w">      </span><span class="nt">DB_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ITA_DB&quot;</span>
<span class="linenos"> 28</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 29</span><span class="w">      </span><span class="nt">DB_ADMIN_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;root&quot;</span>
<span class="linenos"> 30</span><span class="w">      </span><span class="nt">DB_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeDBAdm&quot;</span>
<span class="linenos"> 31</span><span class="w">      </span><span class="nt">DB_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ITA_USER&quot;</span>
<span class="linenos"> 32</span><span class="w">      </span><span class="nt">DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeITADB&quot;</span>
<span class="linenos"> 33</span><span class="w">  </span><span class="nt">pfGlobalDefinition</span><span class="p">:</span>
<span class="linenos"> 34</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 35</span><span class="w">      </span><span class="nt">DEFAULT_LANGUAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ja&quot;</span>
<span class="linenos"> 36</span><span class="w">      </span><span class="nt">LANGUAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span>
<span class="linenos"> 37</span><span class="w">      </span><span class="nt">TZ</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Asia/Tokyo&quot;</span>
<span class="linenos"> 38</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 39</span><span class="w">      </span><span class="nt">ENCRYPT_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos"> 40</span><span class="w">  </span><span class="nt">pfAuditLogDefinition</span><span class="p">:</span>
<span class="linenos"> 41</span><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pf-auditlog</span>
<span class="linenos"> 42</span><span class="w">    </span><span class="nt">persistence</span><span class="p">:</span>
<span class="linenos"> 43</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos"> 44</span><span class="w">      </span><span class="nt">reinstall</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos"> 45</span><span class="w">      </span><span class="nt">accessMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<span class="linenos"> 46</span><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10Gi</span>
<span class="linenos"> 47</span><span class="w">      </span><span class="nt">volumeType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hostPath</span><span class="w"> </span><span class="c1"># e.g.) hostPath or AKS</span>
<span class="linenos"> 48</span><span class="w">      </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="c1"># e.g.) azurefile or - (None)</span>
<span class="linenos"> 49</span><span class="w">      </span><span class="c1"># matchLabels:</span>
<span class="linenos"> 50</span><span class="w">      </span><span class="c1">#   release: &quot;stable&quot;</span>
<span class="linenos"> 51</span><span class="w">      </span><span class="c1"># matchExpressions:</span>
<span class="linenos"> 52</span><span class="w">      </span><span class="c1">#   - {key: environment, operator: In, values: [dev]}</span>
<span class="linenos"> 53</span><span class="w">  </span><span class="nt">pfDatabaseDefinition</span><span class="p">:</span>
<span class="linenos"> 54</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 55</span><span class="w">      </span><span class="nt">DB_VENDOR</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb&quot;</span>
<span class="linenos"> 56</span><span class="w">      </span><span class="nt">DB_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mariadb&quot;</span>
<span class="linenos"> 57</span><span class="w">      </span><span class="nt">DB_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3306&quot;</span>
<span class="linenos"> 58</span><span class="w">      </span><span class="nt">DB_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform&quot;</span>
<span class="linenos"> 59</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 60</span><span class="w">      </span><span class="nt">DB_ADMIN_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;root&quot;</span>
<span class="linenos"> 61</span><span class="w">      </span><span class="nt">DB_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeDBAdm&quot;</span>
<span class="linenos"> 62</span><span class="w">      </span><span class="nt">DB_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pf-user&quot;</span>
<span class="linenos"> 63</span><span class="w">      </span><span class="nt">DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMePFDB&quot;</span>
<span class="linenos"> 64</span><span class="w">  </span><span class="nt">keycloakDefinition</span><span class="p">:</span>
<span class="linenos"> 65</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 66</span><span class="w">      </span><span class="nt">SYSTEM_ADMIN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="linenos"> 67</span><span class="w">      </span><span class="nt">SYSTEM_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeKCAdm&quot;</span>
<span class="linenos"> 68</span><span class="w">      </span><span class="nt">KEYCLOAK_DB_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;keycloak&quot;</span>
<span class="linenos"> 69</span><span class="w">      </span><span class="nt">KEYCLOAK_DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeKCADB&quot;</span>
<span class="linenos"> 70</span><span class="w">  </span><span class="nt">gitlabDefinition</span><span class="p">:</span>
<span class="linenos"> 71</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 72</span><span class="w">      </span><span class="nt">GITLAB_PROTOCOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="linenos"> 73</span><span class="w">      </span><span class="nt">GITLAB_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="c1"># &quot;gitlab&quot; if use container.</span>
<span class="linenos"> 74</span><span class="w">      </span><span class="nt">GITLAB_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8080&quot;</span>
<span class="linenos"> 75</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 76</span><span class="w">      </span><span class="nt">GITLAB_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeGL&quot;</span>
<span class="linenos"> 77</span><span class="w">      </span><span class="nt">GITLAB_ROOT_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;change-this-token&quot;</span>
<span class="linenos"> 78</span><span class="w">  </span><span class="nt">mongoDefinition</span><span class="p">:</span>
<span class="linenos"> 79</span><span class="w">    </span><span class="nt">config</span><span class="p">:</span>
<span class="linenos"> 80</span><span class="w">      </span><span class="nt">MONGO_PROTOCOL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="linenos"> 81</span><span class="w">      </span><span class="nt">MONGO_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mongo&quot;</span><span class="w"> </span><span class="c1"># &quot;mongo&quot; if use container.</span>
<span class="linenos"> 82</span><span class="w">      </span><span class="nt">MONGO_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;27017&quot;</span>
<span class="linenos"> 83</span><span class="w">    </span><span class="nt">secret</span><span class="p">:</span>
<span class="linenos"> 84</span><span class="w">      </span><span class="nt">MONGO_ADMIN_USER</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span>
<span class="linenos"> 85</span><span class="w">      </span><span class="nt">MONGO_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Ch@ngeMeMGAdm&quot;</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span><span class="nt">exastro-it-automation</span><span class="p">:</span>
<span class="linenos"> 88</span><span class="w">  </span><span class="nt">ita-api-admin</span><span class="p">:</span>
<span class="linenos"> 89</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos"> 90</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos"> 91</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-api-admin&quot;</span>
<span class="linenos"> 92</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos"> 93</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos"> 94</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos"> 95</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos"> 96</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="w">  </span><span class="nt">ita-api-organization</span><span class="p">:</span>
<span class="linenos"> 99</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">100</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">101</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-api-organization&quot;</span>
<span class="linenos">102</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">103</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">104</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">105</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">106</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">107</span>
<span class="linenos">108</span><span class="w">  </span><span class="nt">ita-api-oase-receiver</span><span class="p">:</span>
<span class="linenos">109</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">110</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">111</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-api-oase-receiver&quot;</span>
<span class="linenos">112</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">113</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">114</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">115</span><span class="w">      </span><span class="nt">LISTEN_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">116</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">117</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">118</span>
<span class="linenos">119</span><span class="w">  </span><span class="nt">ita-api-ansible-execution-receiver</span><span class="p">:</span>
<span class="linenos">120</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">121</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">122</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-api-ansible-execution-receiver&quot;</span>
<span class="linenos">123</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">124</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">125</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">126</span><span class="w">      </span><span class="nt">LISTEN_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">127</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">128</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">129</span>
<span class="linenos">130</span><span class="w">  </span><span class="nt">ita-by-ansible-execute</span><span class="p">:</span>
<span class="linenos">131</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">132</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">133</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-execute&quot;</span>
<span class="linenos">134</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">135</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">136</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">137</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="linenos">138</span><span class="w">      </span><span class="nt">ANSIBLE_AGENT_IMAGE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-agent&quot;</span>
<span class="linenos">139</span><span class="w">      </span><span class="nt">ANSIBLE_AGENT_IMAGE_TAG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">140</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">141</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">142</span><span class="w">    </span><span class="nt">serviceAccount</span><span class="p">:</span>
<span class="linenos">143</span><span class="w">      </span><span class="nt">create</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos">144</span><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ita-by-ansible-execute-sa&quot;</span>
<span class="linenos">145</span>
<span class="linenos">146</span><span class="w">  </span><span class="nt">ita-by-ansible-legacy-role-vars-listup</span><span class="p">:</span>
<span class="linenos">147</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">148</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">149</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">150</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">151</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">152</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">153</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-legacy-role-vars-listup&quot;</span>
<span class="linenos">154</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">155</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="w">  </span><span class="nt">ita-by-ansible-legacy-vars-listup</span><span class="p">:</span>
<span class="linenos">158</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">159</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">160</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">161</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">162</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">163</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">164</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-legacy-vars-listup&quot;</span>
<span class="linenos">165</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">166</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">167</span>
<span class="linenos">168</span><span class="w">  </span><span class="nt">ita-by-ansible-pioneer-vars-listup</span><span class="p">:</span>
<span class="linenos">169</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">170</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">171</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">172</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">173</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">174</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">175</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-pioneer-vars-listup&quot;</span>
<span class="linenos">176</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">177</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">178</span>
<span class="linenos">179</span><span class="w">  </span><span class="nt">ita-by-ansible-towermaster-sync</span><span class="p">:</span>
<span class="linenos">180</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">181</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">182</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">183</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">184</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">185</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">186</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-ansible-towermaster-sync&quot;</span>
<span class="linenos">187</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">188</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">189</span>
<span class="linenos">190</span><span class="w">  </span><span class="nt">ita-by-cicd-for-iac</span><span class="p">:</span>
<span class="linenos">191</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">192</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">193</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">194</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">195</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">196</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">197</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-cicd-for-iac&quot;</span>
<span class="linenos">198</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">199</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">200</span>
<span class="linenos">201</span><span class="w">  </span><span class="nt">ita-by-collector</span><span class="p">:</span>
<span class="linenos">202</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">203</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">204</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">205</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">206</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">207</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">208</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-collector&quot;</span>
<span class="linenos">209</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">210</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">211</span>
<span class="linenos">212</span><span class="w">  </span><span class="nt">ita-by-conductor-regularly</span><span class="p">:</span>
<span class="linenos">213</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">214</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">215</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">216</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">217</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">218</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">219</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-conductor-regularly&quot;</span>
<span class="linenos">220</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">221</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">222</span>
<span class="linenos">223</span><span class="w">  </span><span class="nt">ita-by-conductor-synchronize</span><span class="p">:</span>
<span class="linenos">224</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">225</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">226</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="linenos">227</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">228</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">229</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">230</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-conductor-synchronize&quot;</span>
<span class="linenos">231</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">232</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">233</span>
<span class="linenos">234</span><span class="w">  </span><span class="nt">ita-by-excel-export-import</span><span class="p">:</span>
<span class="linenos">235</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">236</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">237</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">238</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">239</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">240</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">241</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-excel-export-import&quot;</span>
<span class="linenos">242</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">243</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">244</span>
<span class="linenos">245</span><span class="w">  </span><span class="nt">ita-by-execinstance-dataautoclean</span><span class="p">:</span>
<span class="linenos">246</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">247</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">248</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">249</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">250</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">251</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">252</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-execinstance-dataautoclean&quot;</span>
<span class="linenos">253</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">254</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">255</span>
<span class="linenos">256</span><span class="w">  </span><span class="nt">ita-by-file-autoclean</span><span class="p">:</span>
<span class="linenos">257</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">258</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">259</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">260</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">261</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">262</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">263</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-file-autoclean&quot;</span>
<span class="linenos">264</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">265</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">266</span>
<span class="linenos">267</span><span class="w">  </span><span class="nt">ita-by-hostgroup-split</span><span class="p">:</span>
<span class="linenos">268</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">269</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">270</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">271</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">272</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">273</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">274</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-hostgroup-split&quot;</span>
<span class="linenos">275</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">276</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">277</span>
<span class="linenos">278</span><span class="w">  </span><span class="nt">ita-by-menu-create</span><span class="p">:</span>
<span class="linenos">279</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">280</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">281</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">282</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">283</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">284</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">285</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-menu-create&quot;</span>
<span class="linenos">286</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">287</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">288</span>
<span class="linenos">289</span><span class="w">  </span><span class="nt">ita-by-menu-export-import</span><span class="p">:</span>
<span class="linenos">290</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">291</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">292</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">293</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">294</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">295</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">296</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-menu-export-import&quot;</span>
<span class="linenos">297</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">298</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">299</span>
<span class="linenos">300</span><span class="w">  </span><span class="nt">ita-by-oase-conclusion</span><span class="p">:</span>
<span class="linenos">301</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">302</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">303</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">304</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">305</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">306</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">307</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-oase-conclusion&quot;</span>
<span class="linenos">308</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">309</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">310</span>
<span class="linenos">311</span><span class="w">  </span><span class="nt">ita-by-terraform-cli-execute</span><span class="p">:</span>
<span class="linenos">312</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">313</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">314</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="linenos">315</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">316</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">317</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">318</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-terraform-cli-execute&quot;</span>
<span class="linenos">319</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">320</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">321</span>
<span class="linenos">322</span><span class="w">  </span><span class="nt">ita-by-terraform-cli-vars-listup</span><span class="p">:</span>
<span class="linenos">323</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">324</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">325</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">326</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">327</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">328</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">329</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-terraform-cli-vars-listup&quot;</span>
<span class="linenos">330</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">331</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">332</span>
<span class="linenos">333</span><span class="w">  </span><span class="nt">ita-by-terraform-cloud-ep-execute</span><span class="p">:</span>
<span class="linenos">334</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">335</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">336</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="linenos">337</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">338</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">339</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">340</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-terraform-cloud-ep-execute&quot;</span>
<span class="linenos">341</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">342</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">343</span>
<span class="linenos">344</span><span class="w">  </span><span class="nt">ita-by-terraform-cloud-ep-vars-listup</span><span class="p">:</span>
<span class="linenos">345</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">346</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">347</span><span class="w">      </span><span class="nt">EXECUTE_INTERVAL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10&quot;</span>
<span class="linenos">348</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">349</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">350</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">351</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-by-terraform-cloud-ep-vars-listup&quot;</span>
<span class="linenos">352</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">353</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">354</span>
<span class="linenos">355</span><span class="w">  </span><span class="nt">ita-web-server</span><span class="p">:</span>
<span class="linenos">356</span><span class="w">    </span><span class="nt">replicaCount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="linenos">357</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">358</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-web-server&quot;</span>
<span class="linenos">359</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">360</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">361</span>
<span class="linenos">362</span><span class="w">  </span><span class="nt">ita-migration</span><span class="p">:</span>
<span class="linenos">363</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">364</span><span class="w">      </span><span class="nt">PLATFORM_API_HOST</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;platform-api&quot;</span>
<span class="linenos">365</span><span class="w">      </span><span class="nt">PLATFORM_API_PORT</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8000&quot;</span>
<span class="linenos">366</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">367</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-it-automation-migration&quot;</span>
<span class="linenos">368</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">369</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">370</span>
<span class="linenos">371</span><span class="nt">exastro-platform</span><span class="p">:</span>
<span class="linenos">372</span><span class="w">  </span><span class="nt">platform-api</span><span class="p">:</span>
<span class="linenos">373</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">374</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-platform-api&quot;</span>
<span class="linenos">375</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">376</span>
<span class="linenos">377</span><span class="w">  </span><span class="nt">platform-auth</span><span class="p">:</span>
<span class="linenos">378</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">379</span><span class="w">      </span><span class="c1"># Please set the URL to access</span>
<span class="linenos">380</span><span class="w">      </span><span class="nt">EXTERNAL_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">381</span><span class="w">      </span><span class="nt">EXTERNAL_URL_MNG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">382</span><span class="w">    </span><span class="nt">ingress</span><span class="p">:</span>
<span class="linenos">383</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">384</span><span class="w">      </span><span class="nt">hosts</span><span class="p">:</span>
<span class="linenos">385</span><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exastro-suite.example.local</span>
<span class="linenos">386</span><span class="w">          </span><span class="nt">paths</span><span class="p">:</span>
<span class="linenos">387</span><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="linenos">388</span><span class="w">              </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="linenos">389</span><span class="w">              </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http&quot;</span>
<span class="linenos">390</span><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exastro-suite-mng.example.local</span>
<span class="linenos">391</span><span class="w">          </span><span class="nt">paths</span><span class="p">:</span>
<span class="linenos">392</span><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="linenos">393</span><span class="w">              </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<span class="linenos">394</span><span class="w">              </span><span class="nt">backend</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;httpMng&quot;</span>
<span class="linenos">395</span><span class="w">      </span><span class="nt">tls</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="linenos">396</span><span class="w">        </span><span class="c1"># - secretName: chart-example-tls</span>
<span class="linenos">397</span><span class="w">        </span><span class="c1">#   hosts:</span>
<span class="linenos">398</span><span class="w">        </span><span class="c1">#     - chart-example.local</span>
<span class="linenos">399</span><span class="w">      </span><span class="nt">secrets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="linenos">400</span><span class="w">        </span><span class="c1"># - name: chart-example-tls</span>
<span class="linenos">401</span><span class="w">        </span><span class="c1">#   certificate: |-</span>
<span class="linenos">402</span><span class="w">        </span><span class="c1">#     -----BEGIN CERTIFICATE-----</span>
<span class="linenos">403</span><span class="w">        </span><span class="c1">#     ...</span>
<span class="linenos">404</span><span class="w">        </span><span class="c1">#     -----END CERTIFICATE-----</span>
<span class="linenos">405</span><span class="w">        </span><span class="c1">#   key: |-</span>
<span class="linenos">406</span><span class="w">        </span><span class="c1">#     -----BEGIN PRIVATE KEY-----</span>
<span class="linenos">407</span><span class="w">        </span><span class="c1">#     ...</span>
<span class="linenos">408</span><span class="w">        </span><span class="c1">#     -----END PRIVATE KEY-----</span>
<span class="linenos">409</span><span class="w">    </span><span class="nt">service</span><span class="p">:</span>
<span class="linenos">410</span><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="linenos">411</span><span class="w">      </span><span class="c1"># http:</span>
<span class="linenos">412</span><span class="w">      </span><span class="c1">#   nodePort: 30080</span>
<span class="linenos">413</span><span class="w">      </span><span class="c1"># httpMng:</span>
<span class="linenos">414</span><span class="w">      </span><span class="c1">#   nodePort: 30081</span>
<span class="linenos">415</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">416</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-platform-auth&quot;</span>
<span class="linenos">417</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">418</span>
<span class="linenos">419</span><span class="w">  </span><span class="nt">platform-job</span><span class="p">:</span>
<span class="linenos">420</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">421</span><span class="w">      </span><span class="c1"># LOG_LEVEL: &quot;INFO&quot;</span>
<span class="linenos">422</span><span class="w">      </span><span class="c1"># SUB_PROCESS_TERMINATE_REQUEST_SECONDS: &quot;1800&quot;</span>
<span class="linenos">423</span><span class="w">      </span><span class="c1"># SUB_PROCESS_ACCEPTABLE: &quot;2&quot;</span>
<span class="linenos">424</span><span class="w">      </span><span class="c1"># SUB_PROCESS_MAX_JOBS: &quot;10&quot;</span>
<span class="linenos">425</span><span class="w">      </span><span class="c1"># SUB_PROCESS_WATCH_INTERVAL_SECONDS: &quot;1.0&quot;</span>
<span class="linenos">426</span><span class="w">      </span><span class="c1"># SUB_PROCESS_DB_RECONNECT_INTERVAL_SECONDS: &quot;60&quot;</span>
<span class="linenos">427</span><span class="w">      </span><span class="c1"># SUB_PROCESS_DB_HEALTH_CHECK_INTERVAL_SECONDS: &quot;5&quot;</span>
<span class="linenos">428</span><span class="w">      </span><span class="c1"># SUB_PROCESS_MAX_CANCEL_TIMEOUT: &quot;10&quot;</span>
<span class="linenos">429</span><span class="w">      </span><span class="c1"># JOB_STATUS_WATCH_INTERVAL_SECONDS: &quot;1.0&quot;</span>
<span class="linenos">430</span><span class="w">      </span><span class="c1"># JOB_CANCEL_TIMEOUT_SECONDS: &quot;5.0&quot;</span>
<span class="linenos">431</span><span class="w">      </span><span class="c1"># JOB_NOTIFICATION_TIMEOUT_SECONDS: &quot;20&quot;</span>
<span class="linenos">432</span><span class="w">      </span><span class="c1"># JOB_NOTIFICATION_TEAMS_CONNECTION_TIMEOUT: &quot;3.0&quot;</span>
<span class="linenos">433</span><span class="w">      </span><span class="c1"># JOB_NOTIFICATION_TEAMS_READ_TIMEOUT: &quot;10.0&quot;</span>
<span class="linenos">434</span><span class="w">      </span><span class="c1"># JOB_NOTIFICATION_SMTP_TIMEOUT: &quot;10.0&quot;</span>
<span class="linenos">435</span><span class="w">      </span><span class="c1"># JOB_NOTIFICATION_SMTPS_SSL_VERIFY_ENABLED: &quot;TRUE&quot;</span>
<span class="linenos">436</span><span class="w">      </span><span class="c1"># JOB_FORCE_UPDATE_STATUS_TIMEOUT_SECONDS: &quot;60&quot;</span>
<span class="linenos">437</span><span class="w">      </span><span class="c1"># JOB_FORCE_UPDATE_STATUS_INTERVAL_SECONDS: &quot;180&quot;</span>
<span class="linenos">438</span><span class="w">      </span><span class="c1"># JOB_FORCE_UPDATE_STATUS_PROGRASS_SECONDS: &quot;600&quot;</span>
<span class="linenos">439</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">440</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-platform-job&quot;</span>
<span class="linenos">441</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">442</span>
<span class="linenos">443</span><span class="w">  </span><span class="nt">platform-migration</span><span class="p">:</span>
<span class="linenos">444</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">445</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-platform-migration&quot;</span>
<span class="linenos">446</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">447</span>
<span class="linenos">448</span><span class="w">  </span><span class="nt">platform-web</span><span class="p">:</span>
<span class="linenos">449</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">450</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/exastro-platform-web&quot;</span>
<span class="linenos">451</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">452</span>
<span class="linenos">453</span><span class="w">  </span><span class="nt">mariadb</span><span class="p">:</span>
<span class="linenos">454</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">455</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">456</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/mariadb&quot;</span>
<span class="linenos">457</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10.11&quot;</span>
<span class="linenos">458</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">459</span><span class="w">    </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="linenos">460</span><span class="w">    </span><span class="nt">persistence</span><span class="p">:</span>
<span class="linenos">461</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">462</span><span class="w">      </span><span class="nt">accessMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
<span class="linenos">463</span><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20Gi</span>
<span class="linenos">464</span><span class="w">      </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="c1"># e.g.) azurefile or - (None)</span>
<span class="linenos">465</span><span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="linenos">466</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pv-database</span>
<span class="linenos">467</span><span class="w">      </span><span class="nt">matchExpressions</span><span class="p">:</span>
<span class="linenos">468</span><span class="w">        </span><span class="c1"># - {key: name, operator: In, values: [pv-database]}</span>
<span class="linenos">469</span><span class="w">    </span><span class="nt">dbSetup</span><span class="p">:</span>
<span class="linenos">470</span><span class="w">      </span><span class="nt">dbConfInfo</span><span class="p">:</span>
<span class="linenos">471</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql-server-conf-config</span>
<span class="linenos">472</span><span class="w">        </span><span class="nt">customCnf</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="linenos">473</span><span class="w">          </span><span class="no">[mysqld]</span>
<span class="linenos">474</span><span class="w">          </span><span class="no">character-set-server=utf8mb4</span>
<span class="linenos">475</span><span class="w">          </span><span class="no">collation-server=utf8mb4_bin</span>
<span class="linenos">476</span><span class="w">          </span><span class="no">secure_file_priv=/tmp</span>
<span class="linenos">477</span><span class="w">          </span><span class="no">lower_case_table_names=1</span>
<span class="linenos">478</span><span class="w">          </span><span class="no">[client]</span>
<span class="linenos">479</span><span class="w">          </span><span class="no">default-character-set=utf8mb4</span>
<span class="linenos">480</span><span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<span class="linenos">481</span><span class="w">      </span><span class="nt">requests</span><span class="p">:</span>
<span class="linenos">482</span><span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256Mi&quot;</span>
<span class="linenos">483</span><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1m&quot;</span>
<span class="linenos">484</span><span class="w">      </span><span class="nt">limits</span><span class="p">:</span>
<span class="linenos">485</span><span class="w">        </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2Gi&quot;</span>
<span class="linenos">486</span><span class="w">        </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4&quot;</span>
<span class="linenos">487</span>
<span class="linenos">488</span><span class="w">  </span><span class="nt">keycloak</span><span class="p">:</span>
<span class="linenos">489</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">490</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">491</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/exastro/keycloak&quot;</span>
<span class="linenos">492</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="linenos">493</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">494</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">495</span><span class="w">      </span><span class="c1"># If you use Azure MySQL, add options like below</span>
<span class="linenos">496</span><span class="w">      </span><span class="c1"># KC_DB_URL_PROPERTIES: &quot;?useSSL=false&quot;</span>
<span class="linenos">497</span><span class="w">    </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="linenos">498</span><span class="w">      </span><span class="c1"># requests:</span>
<span class="linenos">499</span><span class="w">      </span><span class="c1">#   memory: &quot;256Mi&quot;</span>
<span class="linenos">500</span><span class="w">      </span><span class="c1">#   cpu: &quot;1m&quot;</span>
<span class="linenos">501</span><span class="w">      </span><span class="c1"># limits:</span>
<span class="linenos">502</span><span class="w">      </span><span class="c1">#   memory: &quot;2Gi&quot;</span>
<span class="linenos">503</span><span class="w">      </span><span class="c1">#   cpu: &quot;4&quot;</span>
<span class="linenos">504</span>
<span class="linenos">505</span><span class="w">  </span><span class="nt">gitlab</span><span class="p">:</span>
<span class="linenos">506</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="linenos">507</span><span class="w">    </span><span class="nt">extraEnv</span><span class="p">:</span>
<span class="linenos">508</span><span class="w">      </span><span class="nt">GITLAB_OMNIBUS_CONFIG</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="linenos">509</span><span class="w">        </span><span class="no">postgresql[&#39;shared_buffers&#39;] = &quot;2048MB&quot;</span>
<span class="linenos">510</span><span class="w">        </span><span class="no">postgresql[&#39;work_mem&#39;] = &quot;128MB&quot;</span>
<span class="linenos">511</span><span class="w">        </span><span class="no">postgresql[&#39;maintenance_work_mem&#39;] = &quot;128MB&quot;</span>
<span class="linenos">512</span><span class="w">        </span><span class="no">postgresql[&#39;effective_cache_size&#39;] = &quot;128MB&quot;</span>
<span class="linenos">513</span><span class="w">        </span><span class="no">postgresql[&#39;checkpoint_segments&#39;] = 16</span>
<span class="linenos">514</span><span class="w">        </span><span class="no">postgresql[&#39;checkpoint_timeout&#39;] = &quot;10min&quot;</span>
<span class="linenos">515</span><span class="w">        </span><span class="no">external_url &#39;http://gitlab:40080&#39;</span>
<span class="linenos">516</span><span class="w">        </span><span class="no">nginx[&#39;listen_port&#39;] = 40080</span>
<span class="linenos">517</span><span class="w">        </span><span class="no">gitlab_rails[&#39;initial_root_password&#39;] = &quot;${GITLAB_ROOT_PASSWORD:-}&quot;</span>
<span class="linenos">518</span><span class="w">        </span><span class="no">gitlab_rails[&#39;registry_enabled&#39;] = false;</span>
<span class="linenos">519</span><span class="w">        </span><span class="no">gitlab_rails[&#39;db_prepared_statements&#39;] = false;</span>
<span class="linenos">520</span><span class="w">        </span><span class="no">gitlab_rails[&#39;monitoring_whitelist&#39;] = [&#39;0.0.0.0/0&#39;]</span>
<span class="linenos">521</span><span class="w">        </span><span class="no"># gitlab_rails[&#39;env&#39;] = {&#39;MALLOC_CONF&#39; =&gt; &#39;dirty_decay_ms:1000,muzzy_decay_ms:1000&#39;}</span>
<span class="linenos">522</span><span class="w">        </span><span class="no"># puma[&#39;worker_processes&#39;] = 0</span>
<span class="linenos">523</span><span class="w">        </span><span class="no">prometheus_monitoring[&#39;enable&#39;] = false</span>
<span class="linenos">524</span><span class="w">        </span><span class="no"># sidekiq[&#39;max_concurrency&#39;] = 10</span>
<span class="linenos">525</span><span class="w">        </span><span class="no"># gitaly[&#39;env&#39;] = {&#39;MALLOC_CONF&#39; =&gt; &#39;dirty_decay_ms:1000,muzzy_decay_ms:1000&#39;, &#39;GITALY_COMMAND_SPAWN_MAX_PARALLEL&#39; =&gt; &#39;2&#39;}</span>
<span class="linenos">526</span><span class="w">      </span><span class="nt">GITLAB_POST_RECONFIGURE_SCRIPT</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="linenos">527</span><span class="w">        </span><span class="no">while ! curl -sfI -o /dev/null http://localhost:40080/-/readiness;</span>
<span class="linenos">528</span><span class="w">        </span><span class="no">do</span>
<span class="linenos">529</span><span class="w">        </span><span class="no">echo &quot;GitLab service is not ready.&quot;</span>
<span class="linenos">530</span><span class="w">        </span><span class="no">sleep 1</span>
<span class="linenos">531</span><span class="w">        </span><span class="no">done</span>
<span class="linenos">532</span><span class="w">        </span><span class="no">echo &quot;GitLab service started normally&quot;</span>
<span class="linenos">533</span><span class="w">        </span><span class="no">curl -Ssf -H &quot;PRIVATE-TOKEN: ${GITLAB_ROOT_TOKEN:-}&quot; &quot;http://localhost:40080/api/v4/version&quot; || (</span>
<span class="linenos">534</span><span class="w">          </span><span class="no">gitlab-rails runner &quot;token = User.find_by_username(&#39;root&#39;).personal_access_tokens.create(scopes: [:api, :write_repository, :sudo], name: &#39;exastro system token&#39;); token.set_token(&#39;${GITLAB_ROOT_TOKEN:-}&#39;); token.save!&quot;</span>
<span class="linenos">535</span><span class="w">        </span><span class="no">)</span>
<span class="linenos">536</span><span class="w">        </span><span class="no">echo &quot;GitLab post reconfigure script ended.&quot;</span>
<span class="linenos">537</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">538</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/gitlab/gitlab-ce&quot;</span>
<span class="linenos">539</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;15.11.13-ce.0&quot;</span>
<span class="linenos">540</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">541</span><span class="w">      </span><span class="c1"># Overrides the image tag whose default is the chart appVersion.</span>
<span class="linenos">542</span><span class="w">    </span><span class="nt">persistence</span><span class="p">:</span>
<span class="linenos">543</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">544</span><span class="w">      </span><span class="nt">volumeName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pv-gitlab</span>
<span class="linenos">545</span><span class="w">      </span><span class="nt">accessMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteMany</span>
<span class="linenos">546</span><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20Gi</span>
<span class="linenos">547</span><span class="w">      </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="c1"># e.g.) azurefile or - (None)</span>
<span class="linenos">548</span><span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="linenos">549</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pv-gitlab</span>
<span class="linenos">550</span><span class="w">      </span><span class="nt">matchExpressions</span><span class="p">:</span>
<span class="linenos">551</span><span class="w">        </span><span class="c1"># - {key: name, operator: In, values: [pv-gitlab]}</span>
<span class="linenos">552</span><span class="w">    </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="linenos">553</span><span class="w">      </span><span class="c1"># requests:</span>
<span class="linenos">554</span><span class="w">      </span><span class="c1">#   memory: &quot;4Gi&quot;</span>
<span class="linenos">555</span><span class="w">      </span><span class="c1">#   cpu: &quot;4&quot;</span>
<span class="linenos">556</span><span class="w">      </span><span class="c1"># limits:</span>
<span class="linenos">557</span><span class="w">      </span><span class="c1">#   memory: &quot;8Gi&quot;</span>
<span class="linenos">558</span><span class="w">      </span><span class="c1">#   cpu: &quot;8&quot;</span>
<span class="linenos">559</span><span class="w">    </span><span class="nt">service</span><span class="p">:</span>
<span class="linenos">560</span><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="linenos">561</span><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
<span class="linenos">562</span><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40080</span>
<span class="linenos">563</span><span class="w">      </span><span class="c1"># nodePort: 30082</span>
<span class="linenos">564</span>
<span class="linenos">565</span><span class="w">  </span><span class="nt">mongo</span><span class="p">:</span>
<span class="linenos">566</span><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">567</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span>
<span class="linenos">568</span><span class="w">      </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;docker.io/mongo&quot;</span>
<span class="linenos">569</span><span class="w">      </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="linenos">570</span><span class="w">      </span><span class="c1"># Overrides the image tag whose default is the chart appVersion.</span>
<span class="linenos">571</span><span class="w">      </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6.0&quot;</span>
<span class="linenos">572</span><span class="w">    </span><span class="nt">persistence</span><span class="p">:</span>
<span class="linenos">573</span><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="linenos">574</span><span class="w">      </span><span class="nt">accessMode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReadWriteOnce</span>
<span class="linenos">575</span><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20Gi</span>
<span class="linenos">576</span><span class="w">      </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="w"> </span><span class="c1"># e.g.) azurefile, local-path or - (None)</span>
<span class="linenos">577</span><span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="linenos">578</span><span class="w">        </span><span class="c1"># release: &quot;pv-mongo&quot;</span>
<span class="linenos">579</span><span class="w">      </span><span class="nt">matchExpressions</span><span class="p">:</span>
<span class="linenos">580</span><span class="w">        </span><span class="c1"># - {key: name, operator: In, values: [pv-mongo]}</span>
<span class="linenos">581</span><span class="w">    </span><span class="nt">dbSetup</span><span class="p">:</span>
<span class="linenos">582</span><span class="w">      </span><span class="nt">dbConfInfo</span><span class="p">:</span>
<span class="linenos">583</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongo-server-conf-config</span>
<span class="linenos">584</span><span class="w">        </span><span class="nt">customCnf</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="linenos">585</span><span class="w">          </span><span class="no">systemLog:</span>
<span class="linenos">586</span><span class="w">            </span><span class="no">verbosity: 0</span>
<span class="linenos">587</span><span class="w">            </span><span class="no"># destination: file</span>
<span class="linenos">588</span><span class="w">            </span><span class="no"># path: /root/logs/mongod.log</span>
<span class="linenos">589</span><span class="w">            </span><span class="no">timeStampFormat: iso8601-utc</span>
<span class="linenos">590</span><span class="w">          </span><span class="no"># storage:</span>
<span class="linenos">591</span><span class="w">          </span><span class="no">#   directoryPerDB: true</span>
<span class="linenos">592</span><span class="w">          </span><span class="no">#   dbPath: /root/data</span>
<span class="linenos">593</span><span class="w">          </span><span class="no">#   engine: wiredTiger</span>
<span class="linenos">594</span><span class="w">          </span><span class="no">#   wiredTiger:</span>
<span class="linenos">595</span><span class="w">          </span><span class="no">#     engineConfig:</span>
<span class="linenos">596</span><span class="w">          </span><span class="no">#       cacheSizeGB: 1</span>
<span class="linenos">597</span><span class="w">          </span><span class="no">#   journal:</span>
<span class="linenos">598</span><span class="w">          </span><span class="no">#     enabled: true</span>
<span class="linenos">599</span><span class="w">          </span><span class="no"># processManagement:</span>
<span class="linenos">600</span><span class="w">          </span><span class="no">#   fork: true</span>
<span class="linenos">601</span><span class="w">          </span><span class="no"># net:</span>
<span class="linenos">602</span><span class="w">          </span><span class="no">#   port: 27017</span>
<span class="linenos">603</span><span class="w">          </span><span class="no">#   bindIp: 0.0.0.0</span>
<span class="linenos">604</span><span class="w">          </span><span class="no"># security:</span>
<span class="linenos">605</span><span class="w">          </span><span class="no">#   authorization: enabled</span>
<span class="linenos">606</span><span class="w">    </span><span class="nt">resources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="linenos">607</span><span class="w">      </span><span class="c1"># requests:</span>
<span class="linenos">608</span><span class="w">      </span><span class="c1">#   memory: &quot;4Gi&quot;</span>
<span class="linenos">609</span><span class="w">      </span><span class="c1">#   cpu: &quot;4&quot;</span>
<span class="linenos">610</span><span class="w">      </span><span class="c1"># limits:</span>
<span class="linenos">611</span><span class="w">      </span><span class="c1">#   memory: &quot;8Gi&quot;</span>
<span class="linenos">612</span><span class="w">      </span><span class="c1">#   cpu: &quot;4&quot;</span>
<span class="linenos">613</span><span class="w">    </span><span class="nt">affinity</span><span class="p">:</span>
<span class="linenos">614</span><span class="w">      </span><span class="nt">podAntiAffinity</span><span class="p">:</span>
<span class="linenos">615</span><span class="w">        </span><span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span>
<span class="linenos">616</span><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">labelSelector</span><span class="p">:</span>
<span class="linenos">617</span><span class="w">            </span><span class="nt">matchExpressions</span><span class="p">:</span>
<span class="linenos">618</span><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span>
<span class="linenos">619</span><span class="w">              </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">In</span>
<span class="linenos">620</span><span class="w">              </span><span class="nt">values</span><span class="p">:</span>
<span class="linenos">621</span><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mongo</span>
<span class="linenos">622</span><span class="w">          </span><span class="nt">topologyKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/hostname</span>
</pre></div>
</div>
</div>
</details><div class="line-block">
<div class="line">In the next section, the manual will explain how to set the correct parameters to <code class="file docutils literal notranslate"><span class="pre">exastro.yaml</span></code> needed to install Exastro.</div>
</div>
</section>
<section id="service-publish-settings">
<span id="service-setting"></span><h3>Service publish settings<a class="headerlink" href="#service-publish-settings" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">There are 3 main methods to publish Exastro.</div>
</div>
<ul class="simple">
<li><p>Ingress</p></li>
<li><p>LoadBalancer</p></li>
<li><p>NodePort</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">There are different methods other than the ones introduced in this manual. We recommend that the users uses one that fits their environment.</div>
</div>
</div>
<section id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">See the following for what parameters can be used.</div>
</div>
<table class="filter-table docutils align-left" id="id18">
<caption><span class="caption-number">表 4 </span><span class="caption-text">Exastro Platform 認証機能のオプションパラメータ</span><a class="headerlink" href="#id18" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exastro-platform.platform-auth.extraEnv.EXTERNAL_URL</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform エンドポイントの公開URL。</div>
<div class="line">リバースプロキシや PAT(Port Address Transport) などにより、Exastro のエンドポイントと公開時の URL に齟齬が発生することで、サービス接続に失敗する場合に設定をする必要があります。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line">公開用エンドポイントのURL</div>
<div class="line">(http[s]://your-exastro.domain:port)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.extraEnv.EXTERNAL_URL_MNG</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform 管理コンソールのエンドポイントの公開URL。</div>
<div class="line">リバースプロキシや PAT(Port Address Transport) などにより、Exastro のエンドポイントと公開時の URL に齟齬が発生することで、サービス接続に失敗する場合に設定をする必要があります。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line">公開用エンドポイントのURL</div>
<div class="line">(http[s]://your-exastro.domain:port)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.extraEnv.AUDIT_LOG_ENABLED</p></td>
<td><div class="line-block">
<div class="line">監査ログの出力有無。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">True</strong> (デフォルト): 出力する</div>
<div class="line"><strong class="program">False</strong>: 出力しない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.extraEnv.AUDIT_LOG_PATH</p></td>
<td><div class="line-block">
<div class="line">監査ログのファイル名（ファイルパス）。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">exastro-audit.log</strong> (デフォルト)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.extraEnv.AUDIT_LOG_FILE_MAX_BYTE</p></td>
<td><div class="line-block">
<div class="line">監査ログファイルの最大サイズ(Byte)を指定できます。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">100000000</strong> (デフォルト)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.extraEnv.AUDIT_LOG_BACKUP_COUNT</p></td>
<td><div class="line-block">
<div class="line">監査ログファイルのバックアップカウント数。</div>
<div class="line">監査ログファイルの最大サイズ(Byte)を超えた際、ファイル名に&quot;.&quot;＋数値で指定された値の分、バックアップされます。</div>
</div>
</td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">30</strong> (デフォルト)</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.enabled</p></td>
<td><p>Exastro Platform における Ingress 利用の要否</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> (デフォルト): Exastro Platform にアクセスするための Ingress Controller をデプロイします。</div>
<div class="line"><strong class="program">false</strong> : Ingress Controller をデプロイしません。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.hosts[0].host</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform 管理コンソールエンドポイントのホスト名、もしくは、FQDN</div>
<div class="line">別途、DNSへのレコード登録が必要です。</div>
</div>
</td>
<td><p>可 (Ingress利用時)</p></td>
<td><p>&quot;exastro-suite.example.local&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.hosts[0].paths[0].path</p></td>
<td><p>Exastro Platform 管理コンソールエンドポイントのパスのルール</p></td>
<td><p>不可</p></td>
<td><p>&quot;/&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.hosts[0].paths[0].pathType</p></td>
<td><p>Exastro Platform 管理コンソールエンドポイントのパスの一致条件</p></td>
<td><p>不可</p></td>
<td><p>&quot;Prefix&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.hosts[0].paths[0].backend</p></td>
<td><p>Exastro Platform 管理コンソールのサービス名</p></td>
<td><p>不可</p></td>
<td><p>&quot;http&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.hosts[1].host</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform エンドポイントのホスト名、もしくは、FQDN</div>
<div class="line">別途、DNSへのレコード登録が必要です。</div>
</div>
</td>
<td><p>可 (Ingress利用時)</p></td>
<td><p>&quot;exastro-suite-mng.example.local&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.hosts[1].paths[0].path</p></td>
<td><p>Exastro Platform エンドポイントのパスのルール</p></td>
<td><p>不可</p></td>
<td><p>&quot;/&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.hosts[1].paths[0].pathType</p></td>
<td><p>Exastro Platform エンドポイントのパスの一致条件</p></td>
<td><p>不可</p></td>
<td><p>&quot;Prefix&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.hosts[1].paths[0].backend</p></td>
<td><p>Exastro Platform エンドポイントのエンドポイントのサービス名</p></td>
<td><p>不可</p></td>
<td><p>&quot;httpMng&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.tls[0].secretName</p></td>
<td><p>Exastro Platform 公開用エンドポイントのSSL/TLS 証明書を保管している Kubernetes シークレット名</p></td>
<td><p>可 (Ingress利用時)</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.tls[0].hosts</p></td>
<td><p>Exastro Platform 公開用エンドポイントのSSL/TLSを使用するホスト名、もしくは、FQDN</p></td>
<td><p>可 (Ingress利用時)</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.secrets[0].name</p></td>
<td><p>Exastro Platform 公開用エンドポイントのSSL/TLS 証明書を保管する Kubernetes シークレット名</p></td>
<td><p>可 (Ingress利用時)</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.ingress.secrets[0].certificate</p></td>
<td><p>Exastro Platform 公開用エンドポイントのSSL/TLS 証明書に使用する証明書ファイルの値</p></td>
<td><p>可 (Ingress利用時)</p></td>
<td><div class="line-block">
<div class="line">証明書ファイルの値の例</div>
<div class="line">-----BEGIN CERTIFICATE-----</div>
<div class="line">...</div>
<div class="line">-----END CERTIFICATE-----</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.ingress.secrets[0].key</p></td>
<td><p>Exastro Platform 公開用エンドポイントのSSL/TLS 証明書に使用する鍵ファイルの値</p></td>
<td><p>可 (Ingress利用時)</p></td>
<td><div class="line-block">
<div class="line">鍵ファイルの値の例</div>
<div class="line">-----BEGIN PRIVATE KEY-----</div>
<div class="line">...</div>
<div class="line">-----END PRIVATE KEY-----</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.service.type</p></td>
<td><p>Exastro Platform のサービスタイプ</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">ClusterIP</strong> (デフォルト): Ingress Controller を利用する場合などに選択</div>
<div class="line"><strong class="program">LoadBalancer</strong> : LoadBalancer を利用する場合に選択</div>
<div class="line"><strong class="program">NodePort</strong> : NodePort を利用する場合に選択</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.service.http.nodePort</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform のサービス用公開ポート番号</div>
</div>
</td>
<td><p>可 (NodePort利用時)</p></td>
<td><p>&quot;30080&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.service.httpMng.nodePort</p></td>
<td><div class="line-block">
<div class="line">Exastro Platform のシステム管理用公開ポート番号</div>
</div>
</td>
<td><p>可 (NodePort利用時)</p></td>
<td><p>&quot;30081&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.platform-auth.image.repository</p></td>
<td><p>コンテナイメージのリポジトリ名</p></td>
<td><p>不可</p></td>
<td><p>&quot;docker.io/exastro/exastro-platform-auth&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.platform-auth.image.tag</p></td>
<td><p>コンテナイメージのタグ</p></td>
<td><p>不可</p></td>
<td><p>&quot;&quot;</p></td>
</tr>
</tbody>
</table>
</section>
<section id="setting-example">
<h4>Setting example<a class="headerlink" href="#setting-example" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This sections displays examples of the settings for publishing the service.</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SW5ncmVzcw==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SW5ncmVzcw==" name="SW5ncmVzcw==" role="tab" tabindex="0">Ingress</button><button aria-controls="panel-0-TG9hZEJhbGFuY2Vy" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-TG9hZEJhbGFuY2Vy" name="TG9hZEJhbGFuY2Vy" role="tab" tabindex="-1">LoadBalancer</button><button aria-controls="panel-0-Tm9kZVBvcnQ=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Tm9kZVBvcnQ=" name="Tm9kZVBvcnQ=" role="tab" tabindex="-1">NodePort</button></div><div aria-labelledby="tab-0-SW5ncmVzcw==" class="sphinx-tabs-panel group-tab" id="panel-0-SW5ncmVzcw==" name="SW5ncmVzcw==" role="tabpanel" tabindex="0"><ul class="simple" id="ingress-setting">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">The service can be published if Ingress Controller is usable through Public clouds or other means.</div>
<div class="line">This method requires the user to construct a loadBalancer within the cluster and comes with benefits and merits if the user wants to be able to operate it themselves.</div>
</div>
<ul class="simple">
<li><p>Setting example</p></li>
</ul>
<div class="line-block">
<div class="line">The service is published using DNS by registering the Service domain information to Ingress.</div>
<div class="line">For checking Domain names in Azure, see <a class="reference internal" href="../../../configuration/kubernetes/aks.html"><span class="doc">Azure Kubernetes Service</span></a>.</div>
<div class="line">Specify the <kbd class="kbd docutils literal notranslate">annotations</kbd> required by the Cloud provider.</div>
<div class="line">The following example uses AKS's Ingress Controller.</div>
</div>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-number">リスト 4 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id19" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_ingress_setting.yaml</span>
<span class="gu">@@ -377,17 +377,26 @@</span>
<span class="w"> </span>  platform-auth:
<span class="w"> </span>    extraEnv:
<span class="w"> </span>      # Please set the URL to access
<span class="gd">-      EXTERNAL_URL: &quot;&quot;</span>
<span class="gd">-      EXTERNAL_URL_MNG: &quot;&quot;</span>
<span class="gi">+      EXTERNAL_URL: &quot;http://exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;</span>
<span class="gi">+      EXTERNAL_URL_MNG: &quot;http://exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;</span>
<span class="w"> </span>    ingress:
<span class="w"> </span>      enabled: true
<span class="gi">+      annotations:</span>
<span class="gi">+        kubernetes.io/ingress.class: addon-http-application-routing</span>
<span class="gi">+        nginx.ingress.kubernetes.io/proxy-body-size: &quot;0&quot;</span>
<span class="gi">+        nginx.ingress.kubernetes.io/proxy-read-timeout: &quot;300&quot;</span>
<span class="gi">+        nginx.ingress.kubernetes.io/proxy-buffer-size: 256k</span>
<span class="gi">+        nginx.ingress.kubernetes.io/server-snippet: |</span>
<span class="gi">+          client_header_buffer_size 100k;</span>
<span class="gi">+          large_client_header_buffers 4 100k;</span>
<span class="gi">+</span>
<span class="w"> </span>      hosts:
<span class="gd">-        - host: exastro-suite.example.local</span>
<span class="gi">+        - host: exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io</span>
<span class="w"> </span>          paths:
<span class="w"> </span>            - path: /
<span class="w"> </span>              pathType: Prefix
<span class="w"> </span>              backend: &quot;http&quot;
<span class="gd">-        - host: exastro-suite-mng.example.local</span>
<span class="gi">+        - host: exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io</span>
<span class="w"> </span>          paths:
<span class="w"> </span>            - path: /
<span class="w"> </span>              pathType: Prefix
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※ Make sure to configure max time-out time (seconds) for processes where large amount of files might be uploaded.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-number">リスト 5 </span><span class="caption-text">ingress - annotations</span><a class="headerlink" href="#id20" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>nginx.ingress.kubernetes.io/proxy-read-timeout:<span class="w"> </span><span class="s2">&quot;300&quot;</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※ If HTTPS connectivity is activated while using Ingress, the following settings must be configured.</div>
</div>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-number">リスト 6 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id21" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span>platform-auth:
<span class="w"> </span>  extraEnv:
<span class="w"> </span>    # Please set the URL to access
<span class="w"> </span> -      EXTERNAL_URL: &quot;http://exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;
<span class="w"> </span> -      EXTERNAL_URL_MNG: &quot;http://exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;
<span class="w"> </span> +      EXTERNAL_URL: &quot;https://exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;
<span class="w"> </span> +      EXTERNAL_URL_MNG: &quot;https://exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io&quot;
<span class="w"> </span>      ingress:
<span class="w"> </span>        enabled: true
<span class="w"> </span>        annotations:
<span class="w"> </span>          kubernetes.io/ingress.class: addon-http-application-routing
<span class="w"> </span>          nginx.ingress.kubernetes.io/proxy-body-size: &quot;0&quot;
<span class="w"> </span>          nginx.ingress.kubernetes.io/proxy-read-timeout: &quot;300&quot;
<span class="w"> </span>          nginx.ingress.kubernetes.io/proxy-buffer-size: 256k
<span class="w"> </span>          nginx.ingress.kubernetes.io/server-snippet: |
<span class="w"> </span>            client_header_buffer_size 100k;
<span class="w"> </span>            large_client_header_buffers 4 100k;
<span class="w"> </span>        hosts:
<span class="w"> </span>          - host: exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io
<span class="w"> </span>            paths:
<span class="w"> </span>              - path: /
<span class="w"> </span>                pathType: Prefix
<span class="w"> </span>                backend: &quot;http&quot;
<span class="w"> </span>          - host: exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io
<span class="w"> </span>            paths:
<span class="w"> </span>              - path: /
<span class="w"> </span>                pathType: Prefix
<span class="w"> </span>                backend: &quot;httpMng&quot;
<span class="w"> </span> -      tls: []
<span class="w"> </span> +      tls:
<span class="w"> </span> +        - secretName: exastro-suite-tls
<span class="w"> </span> +          hosts:
<span class="w"> </span> +            - exastro-suite.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io
<span class="w"> </span> +            - exastro-suite-mng.xxxxxxxxxxxxxxxxxx.japaneast.aksapp.io
<span class="w"> </span> -      secrets: []
<span class="w"> </span> +      secrets:
<span class="w"> </span> +        - name: exastro-suite-tls
<span class="w"> </span> +          certificate: |-
<span class="w"> </span> +            -----BEGIN CERTIFICATE-----
<span class="w"> </span> +            ...
<span class="w"> </span> +            -----END CERTIFICATE-----
<span class="w"> </span> +          key: |-
<span class="w"> </span> +            -----BEGIN PRIVATE KEY-----
<span class="w"> </span> +            ...
<span class="w"> </span> +            -----END PRIVATE KEY-----
</pre></div>
</div>
</div>
</div><div aria-labelledby="tab-0-TG9hZEJhbGFuY2Vy" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-TG9hZEJhbGFuY2Vy" name="TG9hZEJhbGFuY2Vy" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">The service can be published using LoadBalancer if it is usable through a public cloud or other means.</div>
<div class="line">Different from using Ingress, the LoadBalancer is deployed externally from the cluster (often on the public cloud service). This means that the user don't have to operate it.</div>
</div>
<ul class="simple">
<li><p>Setting example</p></li>
</ul>
<div class="line-block">
<div class="line">The service is published using LoadBalancer by configuring <kbd class="kbd docutils literal notranslate">LoadBalancer</kbd> to <kbd class="kbd docutils literal notranslate">service.type</kbd>.</div>
<div class="line">The following example uses LoadBalancer.</div>
</div>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-number">リスト 7 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id22" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_loadbalancer_setting.yaml</span>
<span class="gu">@@ -377,10 +377,10 @@</span>
<span class="w"> </span>  platform-auth:
<span class="w"> </span>    extraEnv:
<span class="w"> </span>      # Please set the URL to access
<span class="gd">-      EXTERNAL_URL: &quot;&quot;</span>
<span class="gd">-      EXTERNAL_URL_MNG: &quot;&quot;</span>
<span class="gi">+      EXTERNAL_URL: &quot;https://your-exastro.domain&quot;</span>
<span class="gi">+      EXTERNAL_URL_MNG: &quot;https://your-exastro-mng.domain&quot;</span>
<span class="w"> </span>    ingress:
<span class="gd">-      enabled: true</span>
<span class="gi">+      enabled: false</span>
<span class="w"> </span>      hosts:
<span class="w"> </span>        - host: exastro-suite.example.local
<span class="w"> </span>          paths:
<span class="gu">@@ -407,7 +407,7 @@</span>
<span class="w"> </span>        #     ...
<span class="w"> </span>        #     -----END PRIVATE KEY-----
<span class="w"> </span>    service:
<span class="gd">-      type: ClusterIP</span>
<span class="gi">+      type: LoadBalancer</span>
<span class="w"> </span>      # http:
<span class="w"> </span>      #   nodePort: 30080
<span class="w"> </span>      # httpMng:
</pre></div>
</div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-0-Tm9kZVBvcnQ=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Tm9kZVBvcnQ=" name="Tm9kZVBvcnQ=" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">The service can be deployed using Nodeport if the user has prepared a LoadBalancer on their own environment or if the user is using a test environment.</div>
<div class="line">Different from using Ingress and LoadBalancer, this publication method can be done natively on Kubernetes.</div>
</div>
<ul class="simple">
<li><p>Setting example</p></li>
</ul>
<div class="line-block">
<div class="line">The service can be published with Nodeport by setting <kbd class="kbd docutils literal notranslate">NodePort</kbd> to <kbd class="kbd docutils literal notranslate">service.type</kbd>.</div>
<div class="line">The following example uses NodePort.</div>
</div>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id23">
<div class="code-block-caption"><span class="caption-number">リスト 8 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id23" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_nodeport_setting.yaml</span>
<span class="gu">@@ -377,10 +377,10 @@</span>
<span class="w"> </span>  platform-auth:
<span class="w"> </span>    extraEnv:
<span class="w"> </span>      # Please set the URL to access
<span class="gd">-      EXTERNAL_URL: &quot;&quot;</span>
<span class="gd">-      EXTERNAL_URL_MNG: &quot;&quot;</span>
<span class="gi">+      EXTERNAL_URL: &quot;http://10.10.10.10:30080&quot;</span>
<span class="gi">+      EXTERNAL_URL_MNG: &quot;http://10.10.10.10:30081&quot;</span>
<span class="w"> </span>    ingress:
<span class="gd">-      enabled: true</span>
<span class="gi">+      enabled: false</span>
<span class="w"> </span>      hosts:
<span class="w"> </span>        - host: exastro-suite.example.local
<span class="w"> </span>          paths:
<span class="gu">@@ -407,11 +407,11 @@</span>
<span class="w"> </span>        #     ...
<span class="w"> </span>        #     -----END PRIVATE KEY-----
<span class="w"> </span>    service:
<span class="gd">-      type: ClusterIP</span>
<span class="gd">-      # http:</span>
<span class="gd">-      #   nodePort: 30080</span>
<span class="gd">-      # httpMng:</span>
<span class="gd">-      #   nodePort: 30081</span>
<span class="gi">+      type: NodePort</span>
<span class="gi">+        http:</span>
<span class="gi">+          nodePort: 30080</span>
<span class="gi">+        httpMng:</span>
<span class="gi">+          nodePort: 30081</span>
<span class="w"> </span>    image:
<span class="w"> </span>      repository: &quot;docker.io/exastro/exastro-platform-auth&quot;
<span class="w"> </span>      tag: &quot;&quot;
</pre></div>
</div>
</div>
</div></blockquote>
</div></div>
</section>
</section>
<section id="database-link">
<span id="database-setup"></span><h3>Database link<a class="headerlink" href="#database-link" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">In order to use the Exastro service, the user will need a database for managing CMDB and Organizations.</div>
<div class="line">This document will describe 3 different setting methods when using databases.</div>
</div>
<ul class="simple">
<li><p>External database</p></li>
<li><p>Database container</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">External database</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Database container</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">If the user is using external databases, make sure to follow the contents below when installing.</div>
</div>
<div class="line-block">
<div class="line">This uses a database external to the Kubernetes cluster.</div>
<div class="line">As the database is not on the Kubernetes cluster, it will have to be managed seperately from the environment.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If constructing multiple ITA environments, make sure to unify the &quot;lower_case_table_names&quot; settings.</div>
<div class="line">※If the settings are not unified, the &quot;Menu export/import function might not work properly.</div>
</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Setting example</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">Configure the required connection information in order to operate the external database.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">The DB management user specified with <strong class="command">DB_ADMIN_USER</strong> and <strong class="command">MONGO_ADMIN_USER</strong> must have permission to create databases and users.</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">Authorization information can be all plaintext(Base64 encoding not required).</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">All certification information can be written in plaintext (no need for base64 encoding).</div>
</div>
</div>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Exastro IT Automation database settings</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Configure the database's connection information.</div>
</div>
</div></blockquote>
<table class="filter-table docutils align-left" id="id24">
<caption><span class="caption-number">表 5 </span><span class="caption-text">共通設定 (Exastro IT Automation 用データベース) のオプションパラメータ</span><a class="headerlink" href="#id24" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.name</p></td>
<td><p>Exastro IT Automation 用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;ita-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.enabled</p></td>
<td><p>Exastro IT Automation 用データベースの定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>Exastro IT Automation 用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_PORT</p></td>
<td><p>Exastro IT Automation 用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>Exastro IT Automation 用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id25">
<div class="code-block-caption"><span class="caption-number">リスト 9 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id25" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_ita_database.yaml</span>
<span class="gu">@@ -21,13 +21,13 @@</span>
<span class="w"> </span>      #   - {key: environment, operator: In, values: [dev]}
<span class="w"> </span>  itaDatabaseDefinition:
<span class="w"> </span>    config:
<span class="gd">-      DB_VENDOR: &quot;mariadb&quot;</span>
<span class="gd">-      DB_HOST: &quot;mariadb&quot;</span>
<span class="gd">-      DB_PORT: &quot;3306&quot;</span>
<span class="gi">+      DB_VENDOR: &quot;mariadb&quot;                # mariadb or mysql</span>
<span class="gi">+      DB_HOST: &quot;your.database.endpoint&quot;   # データベースのエンドポイント</span>
<span class="gi">+      DB_PORT: &quot;3306&quot;                     # データベース接続ポート</span>
<span class="w"> </span>      DB_DATABASE: &quot;ITA_DB&quot;
<span class="w"> </span>    secret:
<span class="gd">-      DB_ADMIN_USER: &quot;root&quot;</span>
<span class="gd">-      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;</span>
<span class="gi">+      DB_ADMIN_USER: &quot;your-admin-account&quot;       # データベースの管理権限を持つユーザー</span>
<span class="gi">+      DB_ADMIN_PASSWORD: &quot;your-admin-password&quot;  # データベースの管理権限を持つユーザーのパスワード</span>
<span class="w"> </span>      DB_USER: &quot;ITA_USER&quot;
<span class="w"> </span>      DB_PASSWORD: &quot;Ch@ngeMeITADB&quot;
<span class="w"> </span>  pfGlobalDefinition:
</pre></div>
</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Exastro platform database settings</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Configure database's connection information.</div>
</div>
</div></blockquote>
<table class="filter-table docutils align-left" id="id26">
<caption><span class="caption-number">表 6 </span><span class="caption-text">共通設定 (Exastro 共通基盤用データベース) のオプションパラメータ</span><a class="headerlink" href="#id26" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.name</p></td>
<td><p>認証機能用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;pf-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.enabled</p></td>
<td><p>認証機能用データベースの定義の有効有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>認証機能用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_PORT</p></td>
<td><p>認証機能用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>認証機能用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>認証機能用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id27">
<div class="code-block-caption"><span class="caption-number">リスト 10 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id27" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_pf_database.yaml</span>
<span class="gu">@@ -52,13 +52,13 @@</span>
<span class="w"> </span>      #   - {key: environment, operator: In, values: [dev]}
<span class="w"> </span>  pfDatabaseDefinition:
<span class="w"> </span>    config:
<span class="gd">-      DB_VENDOR: &quot;mariadb&quot;</span>
<span class="gd">-      DB_HOST: &quot;mariadb&quot;</span>
<span class="gd">-      DB_PORT: &quot;3306&quot;</span>
<span class="gi">+      DB_VENDOR: &quot;mariadb&quot;                # mariadb or mysql</span>
<span class="gi">+      DB_HOST: &quot;your.database.endpoint&quot;   # データベースのエンドポイント</span>
<span class="gi">+      DB_PORT: &quot;3306&quot;                     # データベース接続ポート</span>
<span class="w"> </span>      DB_DATABASE: &quot;platform&quot;
<span class="w"> </span>    secret:
<span class="gd">-      DB_ADMIN_USER: &quot;root&quot;</span>
<span class="gd">-      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;</span>
<span class="gi">+      DB_ADMIN_USER: &quot;your-admin-account&quot;      # データベースの管理者ユーザー</span>
<span class="gi">+      DB_ADMIN_PASSWORD: &quot;your-admin-password&quot; # データベースの管理者ユーザのパスワード</span>
<span class="w"> </span>      DB_USER: &quot;pf-user&quot;
<span class="w"> </span>      DB_PASSWORD: &quot;Ch@ngeMePFDB&quot;
<span class="w"> </span>  keycloakDefinition:
</pre></div>
</div>
</div>
</li>
<li><p>OASE database settings</p>
<div class="line-block">
<div class="line">Configure OASE database's connection information (Not required if not using OASE).</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If using MongoDB user and databases through &quot;Automatic payout( <a class="reference internal" href="../../../manuals/platform_management/organization.html#organization-creation"><span class="std std-ref">Create Organization</span></a> ), make sure to specify <strong class="command">MONGO_HOST</strong>.</div>
<div class="line">The <strong class="command">MONGO_ADMIN_USER</strong> must have permission to create and delete users and databases (root or role with same permissions).</div>
<div class="line">If the user doesnt have said permissions, the user must soecify &quot;Python connection string( <a class="reference internal" href="../../../manuals/platform_management/organization.html#organization-creation"><span class="std std-ref">Create Organization</span></a> )&quot;.</div>
<div class="line">If the user is not using Automatic payout, <strong class="command">MONGO_HOST</strong> does not need to be specified.</div>
</div>
</div>
<table class="filter-table docutils align-left" id="id28">
<caption><span class="caption-number">表 7 </span><span class="caption-text">OASE設定 (Exastro OASE用データベース) のオプションパラメータ</span><a class="headerlink" href="#id28" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.mongoDefinition.config.MONGO_PROTOCOL</p></td>
<td><div class="line-block">
<div class="line">OASE用データベースで利用するDBのプロトコル</div>
</div>
</td>
<td><p>可</p></td>
<td><p>&quot;http&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.mongoDefinition.config.MONGO_HOST</p></td>
<td><div class="line-block">
<div class="line">OASE用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
<div class="line">自動払い出しを利用しない場合は、&quot;&quot;（空）を指定してください。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mongo&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.mongoDefinition.config.MONGO_PORT</p></td>
<td><p>OASE用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;27017&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.mongoDefinition.secret.MONGO_ADMIN_USER</p></td>
<td><p>OASE用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-even"><td><p>global.mongoDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>OASE用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-number">リスト 11 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id29" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_mongo_database.yaml</span>
<span class="gu">@@ -77,12 +77,12 @@</span>
<span class="w"> </span>      GITLAB_ROOT_TOKEN: &quot;change-this-token&quot;
<span class="w"> </span>  mongoDefinition:
<span class="w"> </span>    config:
<span class="gd">-      MONGO_PROTOCOL: &quot;http&quot;</span>
<span class="gd">-      MONGO_HOST: &quot;mongo&quot; # &quot;mongo&quot; if use container.</span>
<span class="gd">-      MONGO_PORT: &quot;27017&quot;</span>
<span class="gi">+      MONGO_PROTOCOL: &quot;your.protocol&quot;        # http or https</span>
<span class="gi">+      MONGO_HOST: &quot;your.database.endpoint&quot;   # OASE用データベースのエンドポイント</span>
<span class="gi">+      MONGO_PORT: &quot;your.port&quot;                # OASE用データベース接続ポート</span>
<span class="w"> </span>    secret:
<span class="gd">-      MONGO_ADMIN_USER: &quot;admin&quot;</span>
<span class="gd">-      MONGO_ADMIN_PASSWORD: &quot;Ch@ngeMeMGAdm&quot;</span>
<span class="gi">+      MONGO_ADMIN_USER: &quot;your-admin-account&quot;      # OASE用データベースの管理者ユーザ</span>
<span class="gi">+      MONGO_ADMIN_PASSWORD: &quot;your-admin-password&quot; # OASE用データベースの管理者ユーザのパスワード</span>
<span class="w"> </span>
<span class="w"> </span>exastro-it-automation:
<span class="w"> </span>  ita-api-admin:
<span class="gu">@@ -621,3 +621,4 @@</span>
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="w"> </span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</li>
<li><p>Deactivating database containers</p>
<div class="line-block">
<div class="line">Configure the database container so it does not start.</div>
</div>
<table class="filter-table docutils align-left" id="id30">
<caption><span class="caption-number">表 8 </span><span class="caption-text">共通設定 (Exastro 共用データベース) のオプションパラメータ</span><a class="headerlink" href="#id30" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.databaseDefinition.name</p></td>
<td><p>Exastro 共用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.databaseDefinition.enabled</p></td>
<td><p>Exastro 共用データベースの定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.databaseDefinition.secret.MARIADB_ROOT_PASSWORD</p></td>
<td><p>Exastro 共用データベースの root アカウントに設定するパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.databaseDefinition.persistence.enabled</p></td>
<td><p>Exastro 共用データベースのデータ永続化の有効フラグ</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;true&quot;</strong> (デフォルト): データを永続化する</div>
<div class="line"><strong class="program">&quot;false&quot;</strong>: データを永続化しない</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>global.databaseDefinition.persistence.reinstall</p></td>
<td><p>再インストール時にデータ領域の初期化の要否</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;true&quot;</strong> (デフォルト): データを初期化(削除)する</div>
<div class="line"><strong class="program">&quot;false&quot;</strong>: データを初期化(削除)しない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.databaseDefinition.persistence.accessMode</p></td>
<td><p>永続ボリュームのアクセスモードの指定。</p></td>
<td><p>不可</p></td>
<td><p>&quot;ReadWriteOnce&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.databaseDefinition.persistence.size</p></td>
<td><p>永続ボリュームのディスク容量</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><p>&quot;20Gi&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.databaseDefinition.persistence.volumeType</p></td>
<td><p>永続ボリュームのボリュームタイプ</p></td>
<td><p>可 (現在無効)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;hostPath&quot;</strong> (デフォルト): Kubernetes クラスタのノード上にデータを保存(非推奨)</div>
<div class="line"><strong class="program">&quot;AKS&quot;</strong>: AKS のストレージクラスを利用</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>global.databaseDefinition.persistence.storageClass</p></td>
<td><p>永続ボリュームにストレージクラスを利用する場合のクラスを指定</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;-&quot;</strong> (デフォルト): ストレージクラスを指定しない。</div>
<div class="line"><strong class="program">ストレージクラス名</strong>: クラウドプロバイダなどから提供されるストレージクラス名を指定。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-number">リスト 12 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id31" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_disabled.yaml</span>
<span class="gu">@@ -451,7 +451,7 @@</span>
<span class="w"> </span>      tag: &quot;&quot;
<span class="w"> </span>
<span class="w"> </span>  mariadb:
<span class="gd">-    enabled: true</span>
<span class="gi">+    enabled: false</span>
<span class="w"> </span>    image:
<span class="w"> </span>      repository: &quot;docker.io/mariadb&quot;
<span class="w"> </span>      tag: &quot;10.11&quot;
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Configure the MongoDB database container so it does not start.(Not required if not using OASE)</div>
</div>
<table class="filter-table docutils align-left" id="id32">
<caption><span class="caption-number">表 9 </span><span class="caption-text">MongoDB コンテナのオプションパラメータ</span><a class="headerlink" href="#id32" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exastro-platform.mongo.enabled</p></td>
<td><p>MongoDB コンテナのデプロイの有無</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> (デフォルト): MongoDB コンテナをデプロイします。</div>
<div class="line"><strong class="program">false</strong> : MongoDB コンテナをデプロイしません。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.image.repository</p></td>
<td><p>コンテナイメージのリポジトリ名</p></td>
<td><p>不可</p></td>
<td><p>&quot;mongo&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.image.pullPolicy</p></td>
<td><p>イメージプルポリシー</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">IfNotPresent</strong> (デフォルト): コンテナイメージが存在しない場合のみプル</div>
<div class="line"><strong class="program">Always</strong>: 毎回必ずプル</div>
<div class="line"><strong class="program">None</strong>: プルしない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.image.tag</p></td>
<td><p>コンテナイメージのタグ</p></td>
<td><p>不可</p></td>
<td><p>&quot;6.0&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.enabled</p></td>
<td><p>Exastro 共用データベースのデータ永続化の有効フラグ</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> (デフォルト): データを永続化する</div>
<div class="line"><strong class="program">false</strong>: データを永続化しない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.reinstall</p></td>
<td><p>再インストール時にデータ領域の初期化の要否</p></td>
<td><p>不可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> : データを初期化(削除)する</div>
<div class="line"><strong class="program">false</strong> (デフォルト): データを初期化(削除)しない</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.accessMode</p></td>
<td><p>永続ボリュームのアクセスモードの指定。</p></td>
<td><p>不可</p></td>
<td><p>&quot;ReadWriteOnce&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.size</p></td>
<td><p>永続ボリュームのディスク容量</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><p>&quot;20Gi&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.storageClass</p></td>
<td><p>永続ボリュームにストレージクラスを利用する場合のクラスを指定</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">-</strong> (デフォルト): ストレージクラスを指定しない。</div>
<div class="line"><strong class="program">ストレージクラス名</strong>: クラウドプロバイダなどから提供されるストレージクラス名を指定。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.matchLabels.name</p></td>
<td><p>利用する永続ボリューム名を指定</p></td>
<td><p>不可</p></td>
<td><p>&quot;コメントアウト&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.resources.requests.memory</p></td>
<td><p>メモリ要求</p></td>
<td><p>可</p></td>
<td><p>&quot;256Mi&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.resources.requests.cpu</p></td>
<td><p>CPU要求</p></td>
<td><p>可</p></td>
<td><p>&quot;1m&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.resources.limits.memory</p></td>
<td><p>メモリ上限</p></td>
<td><p>可</p></td>
<td><p>&quot;2Gi&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.resources.limits.cpu</p></td>
<td><p>CPU上限</p></td>
<td><p>可</p></td>
<td><p>&quot;4&quot;</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id33">
<div class="code-block-caption"><span class="caption-number">リスト 13 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id33" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_mongodb_disabled.yaml</span>
<span class="gu">@@ -563,7 +563,7 @@</span>
<span class="w"> </span>      # nodePort: 30082
<span class="w"> </span>
<span class="w"> </span>  mongo:
<span class="gd">-    enabled: true</span>
<span class="gi">+    enabled: false</span>
<span class="w"> </span>    image:
<span class="w"> </span>      repository: &quot;docker.io/mongo&quot;
<span class="w"> </span>      pullPolicy: IfNotPresent
<span class="gu">@@ -621,3 +621,4 @@</span>
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="w"> </span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><ul>
<li><div class="line-block">
<div class="line">Features</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">This method uses the Database container deployed within the Kubernetes cluster.</div>
<div class="line">This database container can be managed as a container on the same Exastro and Kubernetes cluster.</div>
</div>
<ul>
<li><div class="line-block">
<div class="line">Setting example</div>
</div>
</li>
</ul>
<div class="line-block">
<div class="line">Create a password for the database container's root and configure the root account password to the database so it can be accessed from other containers.</div>
<div class="line">Then specify the using storage so the data can be persisted.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">The DB management user specified with <strong class="command">DB_ADMIN_USER</strong> and <strong class="command">MONGO_ADMIN_USER</strong> must have permission to create databases and users.</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">Authorization information can be all plaintext(Base64 encoding not required).</div>
</div>
</div>
<ol class="arabic" id="configuration-database-container">
<li><div class="line-block">
<div class="line">Configure Database container</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Configure password for the Database container's root.</div>
<div class="line">Then specify the using storage so the data can be persisted.</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">Using Storage Class</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">Using hostPath</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><div class="literal-block-wrapper docutils container" id="id34">
<div class="code-block-caption"><span class="caption-number">リスト 14 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id34" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_storage_class.yaml</span>
<span class="gu">@@ -460,8 +460,8 @@</span>
<span class="w"> </span>    persistence:
<span class="w"> </span>      enabled: true
<span class="w"> </span>      accessMode: ReadWriteOnce
<span class="gd">-      size: 20Gi</span>
<span class="gd">-      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)</span>
<span class="gi">+      size: XXGi                                       # 必要な容量に変更</span>
<span class="gi">+      storageClass: &quot;exastro-suite-azurefile-csi-nfs&quot;  # 利用する Storage Class を指定</span>
<span class="w"> </span>      matchLabels:
<span class="w"> </span>        name: pv-database
<span class="w"> </span>      matchExpressions:
</pre></div>
</div>
</div>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="literal-block-wrapper docutils container" id="id35">
<div class="code-block-caption"><span class="caption-number">リスト 15 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id35" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_hostpath.yaml</span>
<span class="gu">@@ -460,7 +460,7 @@</span>
<span class="w"> </span>    persistence:
<span class="w"> </span>      enabled: true
<span class="w"> </span>      accessMode: ReadWriteOnce
<span class="gd">-      size: 20Gi</span>
<span class="gi">+      size: XXGi                                       # 必要な容量に変更</span>
<span class="w"> </span>      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)
<span class="w"> </span>      matchLabels:
<span class="w"> </span>        name: pv-database
</pre></div>
</div>
</div>
</div></div>
</div></blockquote>
</li>
<li><div class="line-block">
<div class="line">Configure Exastro IT Automation database</div>
</div>
<div class="line-block">
<div class="line">Configure the root acount password created in the <a class="reference internal" href="#database-setup"><span class="std std-ref">Database link</span></a> section in order to make the database accessible from the Exastro IT Automation container.</div>
</div>
<table class="filter-table docutils align-left" id="id36">
<caption><span class="caption-number">表 10 </span><span class="caption-text">共通設定 (Exastro IT Automation 用データベース) のオプションパラメータ</span><a class="headerlink" href="#id36" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.name</p></td>
<td><p>Exastro IT Automation 用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;ita-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.enabled</p></td>
<td><p>Exastro IT Automation 用データベースの定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>Exastro IT Automation 用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_PORT</p></td>
<td><p>Exastro IT Automation 用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>Exastro IT Automation 用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id37">
<div class="code-block-caption"><span class="caption-number">リスト 16 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id37" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_ita_setting.yaml</span>
<span class="gu">@@ -27,7 +27,7 @@</span>
<span class="w"> </span>      DB_DATABASE: &quot;ITA_DB&quot;
<span class="w"> </span>    secret:
<span class="w"> </span>      DB_ADMIN_USER: &quot;root&quot;
<span class="gd">-      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;</span>
<span class="gi">+      DB_ADMIN_PASSWORD: &quot;your-admin-password&quot; # 「1.  データベースコンテナの設定」で設定したコンテナデータベースの root のパスワード</span>
<span class="w"> </span>      DB_USER: &quot;ITA_USER&quot;
<span class="w"> </span>      DB_PASSWORD: &quot;Ch@ngeMeITADB&quot;
<span class="w"> </span>  pfGlobalDefinition:
</pre></div>
</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Configure Exastro platform database</div>
</div>
<div class="line-block">
<div class="line">Configure the root account password created in &quot;1. Configure Database container&quot; in order to make the database accessible from the Exastro Platform container.</div>
</div>
<table class="filter-table docutils align-left" id="id38">
<caption><span class="caption-number">表 11 </span><span class="caption-text">共通設定 (Exastro 共通基盤用データベース) のオプションパラメータ</span><a class="headerlink" href="#id38" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.name</p></td>
<td><p>認証機能用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;pf-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.enabled</p></td>
<td><p>認証機能用データベースの定義の有効有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>認証機能用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_PORT</p></td>
<td><p>認証機能用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>認証機能用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>認証機能用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id39">
<div class="code-block-caption"><span class="caption-number">リスト 17 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id39" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_pf_setting.yaml</span>
<span class="gu">@@ -58,7 +58,7 @@</span>
<span class="w"> </span>      DB_DATABASE: &quot;platform&quot;
<span class="w"> </span>    secret:
<span class="w"> </span>      DB_ADMIN_USER: &quot;root&quot;
<span class="gd">-      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;</span>
<span class="gi">+      DB_ADMIN_PASSWORD: &quot;your-admin-password&quot; # 「1.  データベースコンテナの設定」で設定したコンテナデータベースの root のパスワード</span>
<span class="w"> </span>      DB_USER: &quot;pf-user&quot;
<span class="w"> </span>      DB_PASSWORD: &quot;Ch@ngeMePFDB&quot;
<span class="w"> </span>  keycloakDefinition:
</pre></div>
</div>
</div>
</li>
<li><p>Configure OASE database</p>
<div class="line-block">
<div class="line">Configure connection information to the OASE database.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If using MongoDB user and databases through &quot;Automatic payout( <a class="reference internal" href="../../../manuals/platform_management/organization.html#organization-creation"><span class="std std-ref">Create Organization</span></a> ), make sure to specify <strong class="command">MONGO_HOST</strong>.</div>
<div class="line">The <strong class="command">MONGO_ADMIN_USER</strong> must have permission to create and delete users and databases (root or role with same permissions).</div>
<div class="line">If the user doesnt have said permissions, the user must soecify &quot;Python connection string( <a class="reference internal" href="../../../manuals/platform_management/organization.html#organization-creation"><span class="std std-ref">Create Organization</span></a> )&quot;.</div>
<div class="line">If the user is not using Automatic payout, <strong class="command">MONGO_HOST</strong> does not need to be specified.</div>
</div>
</div>
<table class="filter-table docutils align-left" id="id40">
<caption><span class="caption-number">表 12 </span><span class="caption-text">OASE設定 (Exastro OASE用データベース) のオプションパラメータ</span><a class="headerlink" href="#id40" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.mongoDefinition.config.MONGO_PROTOCOL</p></td>
<td><div class="line-block">
<div class="line">OASE用データベースで利用するDBのプロトコル</div>
</div>
</td>
<td><p>可</p></td>
<td><p>&quot;http&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.mongoDefinition.config.MONGO_HOST</p></td>
<td><div class="line-block">
<div class="line">OASE用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
<div class="line">自動払い出しを利用しない場合は、&quot;&quot;（空）を指定してください。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mongo&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.mongoDefinition.config.MONGO_PORT</p></td>
<td><p>OASE用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;27017&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.mongoDefinition.secret.MONGO_ADMIN_USER</p></td>
<td><p>OASE用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-even"><td><p>global.mongoDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>OASE用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id41">
<div class="code-block-caption"><span class="caption-number">リスト 18 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id41" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_mongo_setting.yaml</span>
<span class="gu">@@ -81,8 +81,8 @@</span>
<span class="w"> </span>      MONGO_HOST: &quot;mongo&quot; # &quot;mongo&quot; if use container.
<span class="w"> </span>      MONGO_PORT: &quot;27017&quot;
<span class="w"> </span>    secret:
<span class="gd">-      MONGO_ADMIN_USER: &quot;admin&quot;</span>
<span class="gd">-      MONGO_ADMIN_PASSWORD: &quot;Ch@ngeMeMGAdm&quot;</span>
<span class="gi">+      MONGO_ADMIN_USER: &quot;your-admin-account&quot;      # OASE用データベースの管理者ユーザ</span>
<span class="gi">+      MONGO_ADMIN_PASSWORD: &quot;your-admin-password&quot; # OASE用データベースの管理者ユーザのパスワード</span>
<span class="w"> </span>
<span class="w"> </span>exastro-it-automation:
<span class="w"> </span>  ita-api-admin:
<span class="gu">@@ -621,3 +621,4 @@</span>
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="w"> </span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</li>
<li><p>Configure MongoDB container.</p>
<div class="line-block">
<div class="line">Specify storage for persisting database data.</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a href="#id1"><span class="problematic" id="id2">|</span></a>If the user is not using MongoDB container, make sure to set <strong class="command">exastro-platform.mongo.enabled</strong> to false.</p>
</div>
<table class="filter-table docutils align-left" id="id42">
<caption><span class="caption-number">表 13 </span><span class="caption-text">MongoDB コンテナのオプションパラメータ</span><a class="headerlink" href="#id42" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exastro-platform.mongo.enabled</p></td>
<td><p>MongoDB コンテナのデプロイの有無</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> (デフォルト): MongoDB コンテナをデプロイします。</div>
<div class="line"><strong class="program">false</strong> : MongoDB コンテナをデプロイしません。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.image.repository</p></td>
<td><p>コンテナイメージのリポジトリ名</p></td>
<td><p>不可</p></td>
<td><p>&quot;mongo&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.image.pullPolicy</p></td>
<td><p>イメージプルポリシー</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">IfNotPresent</strong> (デフォルト): コンテナイメージが存在しない場合のみプル</div>
<div class="line"><strong class="program">Always</strong>: 毎回必ずプル</div>
<div class="line"><strong class="program">None</strong>: プルしない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.image.tag</p></td>
<td><p>コンテナイメージのタグ</p></td>
<td><p>不可</p></td>
<td><p>&quot;6.0&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.enabled</p></td>
<td><p>Exastro 共用データベースのデータ永続化の有効フラグ</p></td>
<td><p>可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> (デフォルト): データを永続化する</div>
<div class="line"><strong class="program">false</strong>: データを永続化しない</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.reinstall</p></td>
<td><p>再インストール時にデータ領域の初期化の要否</p></td>
<td><p>不可</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">true</strong> : データを初期化(削除)する</div>
<div class="line"><strong class="program">false</strong> (デフォルト): データを初期化(削除)しない</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.accessMode</p></td>
<td><p>永続ボリュームのアクセスモードの指定。</p></td>
<td><p>不可</p></td>
<td><p>&quot;ReadWriteOnce&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.size</p></td>
<td><p>永続ボリュームのディスク容量</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><p>&quot;20Gi&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.persistence.storageClass</p></td>
<td><p>永続ボリュームにストレージクラスを利用する場合のクラスを指定</p></td>
<td><p>可 (データ永続化時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">-</strong> (デフォルト): ストレージクラスを指定しない。</div>
<div class="line"><strong class="program">ストレージクラス名</strong>: クラウドプロバイダなどから提供されるストレージクラス名を指定。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.persistence.matchLabels.name</p></td>
<td><p>利用する永続ボリューム名を指定</p></td>
<td><p>不可</p></td>
<td><p>&quot;コメントアウト&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.resources.requests.memory</p></td>
<td><p>メモリ要求</p></td>
<td><p>可</p></td>
<td><p>&quot;256Mi&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.resources.requests.cpu</p></td>
<td><p>CPU要求</p></td>
<td><p>可</p></td>
<td><p>&quot;1m&quot;</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mongo.resources.limits.memory</p></td>
<td><p>メモリ上限</p></td>
<td><p>可</p></td>
<td><p>&quot;2Gi&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mongo.resources.limits.cpu</p></td>
<td><p>CPU上限</p></td>
<td><p>可</p></td>
<td><p>&quot;4&quot;</p></td>
</tr>
</tbody>
</table>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">Using hostPath</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-number">リスト 19 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id43" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_mongodb_hostpath.yaml</span>
<span class="gu">@@ -572,7 +572,7 @@</span>
<span class="w"> </span>    persistence:
<span class="w"> </span>      enabled: true
<span class="w"> </span>      accessMode: ReadWriteOnce
<span class="gd">-      size: 20Gi</span>
<span class="gi">+      size: XXGi</span>
<span class="w"> </span>      storageClass: &quot;-&quot; # e.g.) azurefile, local-path or - (None)
<span class="w"> </span>      matchLabels:
<span class="w"> </span>        # release: &quot;pv-mongo&quot;
<span class="gu">@@ -621,3 +621,4 @@</span>
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="w"> </span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</div></div>
</li>
<li><p>Configure Database container's Probe.</p>
<div class="line-block">
<div class="line">The database container or MongoDB container's LivenessProbe and ReadinessProbe has the following values applied by default.</div>
</div>
<table class="filter-table docutils align-left" id="id44">
<caption><span class="caption-number">表 14 </span><span class="caption-text">データベースコンテナのProbeオプションパラメータ</span><a class="headerlink" href="#id44" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exastro-platform.mariadb.livenessProbe.exec.command</p></td>
<td><p>livenessProbee実行時に行うコマンド</p></td>
<td><p>不可</p></td>
<td><p>healthcheck.sh --su-mysql --connect --innodb_initialized</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.livenessProbe.initialDelaySeconds</p></td>
<td><p>最初のlivenessProbeを実行するまでの待機時間(秒)</p></td>
<td><p>可</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.livenessProbe.periodSeconds</p></td>
<td><p>livenessProbeを実行する間隔(秒)</p></td>
<td><p>可</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.livenessProbe.timeoutSeconds</p></td>
<td><p>livenessProbeがタイムアウトになるまでの時間(秒)</p></td>
<td><p>可</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.readinessProbe.exec.command</p></td>
<td><p>readinessProbe実行時に行うコマンド</p></td>
<td><p>不可</p></td>
<td><p>healthcheck.sh --su-mysql --connect --innodb_initialized</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.readinessProbe.initialDelaySeconds</p></td>
<td><p>最初のreadinessProbeを実行するまでの待機時間(秒)</p></td>
<td><p>可</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.readinessProbe.periodSeconds</p></td>
<td><p>readinessProbeを実行する間隔(秒)</p></td>
<td><p>可</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.readinessProbe.timeoutSeconds</p></td>
<td><p>readinessProbeがタイムアウトになるまでの時間(秒)</p></td>
<td><p>可</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
<table class="filter-table docutils align-left" id="id45">
<caption><span class="caption-number">表 15 </span><span class="caption-text">MongodbコンテナのProbeオプションパラメータ</span><a class="headerlink" href="#id45" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exastro-platform.mariadb.livenessProbe.tcpSocket.port</p></td>
<td><p>MongoDBへアクセスするためのport番号</p></td>
<td><p>不可</p></td>
<td><p>port-mongo</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.livenessProbe.initialDelaySeconds</p></td>
<td><p>最初のlivenessProbeを実行するまでの待機時間(秒)</p></td>
<td><p>可</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.livenessProbe.periodSeconds</p></td>
<td><p>livenessProbeを実行する間隔(秒)</p></td>
<td><p>可</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.livenessProbe.timeoutSeconds</p></td>
<td><p>livenessProbeがタイムアウトになるまでの時間(秒)</p></td>
<td><p>可</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.readinessProbe.tcpSocket.port</p></td>
<td><p>MongoDBへアクセスするためのport番号</p></td>
<td><p>不可</p></td>
<td><p>port-mongo</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.readinessProbe.initialDelaySeconds</p></td>
<td><p>最初のreadinessProbeを実行するまでの待機時間(秒)</p></td>
<td><p>可</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>exastro-platform.mariadb.readinessProbe.periodSeconds</p></td>
<td><p>readinessProbeを実行する間隔(秒)</p></td>
<td><p>可</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>exastro-platform.mariadb.readinessProbe.timeoutSeconds</p></td>
<td><p>readinessProbeがタイムアウトになるまでの時間(秒)</p></td>
<td><p>可</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">In order to change setting values for the database container or MongoDB container's LivenessProbe and ReadinessProbe, add the parameters as seen below.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-number">リスト 20 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id46" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_database_probe_setting.yaml</span>
<span class="gu">@@ -46,7 +46,7 @@</span>
<span class="w"> </span>      size: 10Gi
<span class="w"> </span>      volumeType: hostPath # e.g.) hostPath or AKS
<span class="w"> </span>      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)
<span class="gd">-      # matchLabels:</span>
<span class="gi">+      # matchLabels: </span>
<span class="w"> </span>      #   release: &quot;stable&quot;
<span class="w"> </span>      # matchExpressions:
<span class="w"> </span>      #   - {key: environment, operator: In, values: [dev]}
<span class="gu">@@ -116,17 +116,6 @@</span>
<span class="w"> </span>      PLATFORM_API_HOST: &quot;platform-api&quot;
<span class="w"> </span>      PLATFORM_API_PORT: &quot;8000&quot;
<span class="w"> </span>
<span class="gd">-  ita-api-ansible-execution-receiver:</span>
<span class="gd">-    replicaCount: 1</span>
<span class="gd">-    image:</span>
<span class="gd">-      repository: &quot;docker.io/exastro/exastro-it-automation-api-ansible-execution-receiver&quot;</span>
<span class="gd">-      tag: &quot;&quot;</span>
<span class="gd">-      pullPolicy: IfNotPresent</span>
<span class="gd">-    extraEnv:</span>
<span class="gd">-      LISTEN_PORT: &quot;8000&quot;</span>
<span class="gd">-      PLATFORM_API_HOST: &quot;platform-api&quot;</span>
<span class="gd">-      PLATFORM_API_PORT: &quot;8000&quot;</span>
<span class="gd">-</span>
<span class="w"> </span>  ita-by-ansible-execute:
<span class="w"> </span>    replicaCount: 1
<span class="w"> </span>    image:
<span class="gu">@@ -392,20 +381,6 @@</span>
<span class="w"> </span>            - path: /
<span class="w"> </span>              pathType: Prefix
<span class="w"> </span>              backend: &quot;httpMng&quot;
<span class="gd">-      tls: []</span>
<span class="gd">-        # - secretName: chart-example-tls</span>
<span class="gd">-        #   hosts:</span>
<span class="gd">-        #     - chart-example.local</span>
<span class="gd">-      secrets: []</span>
<span class="gd">-        # - name: chart-example-tls</span>
<span class="gd">-        #   certificate: |-</span>
<span class="gd">-        #     -----BEGIN CERTIFICATE-----</span>
<span class="gd">-        #     ...</span>
<span class="gd">-        #     -----END CERTIFICATE-----</span>
<span class="gd">-        #   key: |-</span>
<span class="gd">-        #     -----BEGIN PRIVATE KEY-----</span>
<span class="gd">-        #     ...</span>
<span class="gd">-        #     -----END PRIVATE KEY-----</span>
<span class="w"> </span>    service:
<span class="w"> </span>      type: ClusterIP
<span class="w"> </span>      # http:
<span class="gu">@@ -484,6 +459,14 @@</span>
<span class="w"> </span>      limits:
<span class="w"> </span>        memory: &quot;2Gi&quot;
<span class="w"> </span>        cpu: &quot;4&quot;
<span class="gi">+    livenessProbe:</span>
<span class="gi">+      initialDelaySeconds: XX</span>
<span class="gi">+      periodSeconds: XX</span>
<span class="gi">+      timeoutSeconds: XX</span>
<span class="gi">+    readinessProbe:</span>
<span class="gi">+      initialDelaySeconds: XX</span>
<span class="gi">+      periodSeconds: XX</span>
<span class="gi">+      timeoutSeconds: XX</span>
<span class="w"> </span>
<span class="w"> </span>  keycloak:
<span class="w"> </span>    enabled: true
<span class="gu">@@ -491,9 +474,6 @@</span>
<span class="w"> </span>      repository: &quot;docker.io/exastro/keycloak&quot;
<span class="w"> </span>      tag: &quot;&quot;
<span class="w"> </span>      pullPolicy: IfNotPresent
<span class="gd">-    extraEnv:</span>
<span class="gd">-      # If you use Azure MySQL, add options like below</span>
<span class="gd">-      # KC_DB_URL_PROPERTIES: &quot;?useSSL=false&quot;</span>
<span class="w"> </span>    resources: {}
<span class="w"> </span>      # requests:
<span class="w"> </span>      #   memory: &quot;256Mi&quot;
<span class="gu">@@ -620,4 +600,12 @@</span>
<span class="w"> </span>              values:
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="gd">-</span>
<span class="gi">+    livenessProbe:</span>
<span class="gi">+      initialDelaySeconds: XX</span>
<span class="gi">+      periodSeconds: XX</span>
<span class="gi">+      timeoutSeconds: XX</span>
<span class="gi">+    readinessProbe:</span>
<span class="gi">+      initialDelaySeconds: XX</span>
<span class="gi">+      periodSeconds: XX</span>
<span class="gi">+      timeoutSeconds: XX</span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div></div>
</section>
<section id="app-db-user-settings">
<span id="installation-kubernetes-keycloak-settings"></span><h3>App DB user settings<a class="headerlink" href="#app-db-user-settings" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Configure DB users in for applications in Exastro.</div>
</div>
<section id="id3">
<h4>Setting example<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Configure DB users for each of the following.</div>
</div>
<ul class="simple">
<li><p>Exastro IT Automation</p></li>
<li><p>Exastro platform</p></li>
<li><p>Keycloak</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">Authorization information can be all plaintext(Base64 encoding not required).</div>
</div>
</div>
<ol class="arabic">
<li><p>Configure Exastro IT Automation database</p>
<div class="line-block">
<div class="line">Configure DB user that will be used and created by applications.</div>
</div>
</li>
</ol>
<blockquote>
<div><table class="filter-table docutils align-left" id="id47">
<caption><span class="caption-number">表 16 </span><span class="caption-text">共通設定 (Exastro IT Automation 用データベース) のオプションパラメータ</span><a class="headerlink" href="#id47" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.name</p></td>
<td><p>Exastro IT Automation 用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;ita-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.enabled</p></td>
<td><p>Exastro IT Automation 用データベースの定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>Exastro IT Automation 用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.config.DB_PORT</p></td>
<td><p>Exastro IT Automation 用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>Exastro IT Automation 用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.itaDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">Exastro IT Automation 用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.itaDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>Exastro IT Automation 用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id48">
<div class="code-block-caption"><span class="caption-number">リスト 21 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id48" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_db_user_ita.yaml</span>
<span class="gu">@@ -28,8 +28,8 @@</span>
<span class="w"> </span>    secret:
<span class="w"> </span>      DB_ADMIN_USER: &quot;root&quot;
<span class="w"> </span>      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;
<span class="gd">-      DB_USER: &quot;ITA_USER&quot;</span>
<span class="gd">-      DB_PASSWORD: &quot;Ch@ngeMeITADB&quot;</span>
<span class="gi">+      DB_USER: &quot;ita-db-user&quot;                # Exastro IT Automation のアプリが使うDBユーザー</span>
<span class="gi">+      DB_PASSWORD: &quot;ita-db-user-password&quot;   # Exastro IT Automation のアプリが使うDBユーザーのパスワード</span>
<span class="w"> </span>  pfGlobalDefinition:
<span class="w"> </span>    config:
<span class="w"> </span>      DEFAULT_LANGUAGE: &quot;ja&quot;
</pre></div>
</div>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>Configure Keycloak database</p>
<div class="line-block">
<div class="line">Configure DB user that will be used and created by applications.</div>
</div>
</li>
</ol>
<blockquote>
<div><table class="filter-table docutils align-left" id="id49">
<caption><span class="caption-number">表 17 </span><span class="caption-text">共通設定 (Keycloak) のオプションパラメータ</span><a class="headerlink" href="#id49" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.keycloakDefinition.name</p></td>
<td><p>Keycloak の定義名</p></td>
<td><p>不可</p></td>
<td><p>keycloak</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.enabled</p></td>
<td><p>Keycloak の定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_PROTOCOL</p></td>
<td><p>Keycloak API エンドポイントのプロトコル</p></td>
<td><p>不可</p></td>
<td><p>&quot;http”</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_HOST</p></td>
<td><p>Keycloak API エンドポイントのホスト名、もしくは、FQDN</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_PORT</p></td>
<td><p>Keycloak API エンドポイントのポート番号</p></td>
<td><p>不可</p></td>
<td><p>&quot;8080&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_PROTOCOL</p></td>
<td><p>Keycloak エンドポイントのプロトコル</p></td>
<td><p>不可</p></td>
<td><p>&quot;http&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.KEYCLOAK_HOST</p></td>
<td><p>Keycloak エンドポイントのホスト名、もしくは、FQDN</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_PORT</p></td>
<td><p>Keycloak API エンドポイントのポート番号</p></td>
<td><p>不可</p></td>
<td><p>&quot;8080&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.KEYCLOAK_MASTER_REALM</p></td>
<td><p>Keycloak のマスターレルム名</p></td>
<td><p>不可</p></td>
<td><p>&quot;master&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_DB_DATABASE</p></td>
<td><p>Keycloak が利用するデータベース名</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.secret.SYSTEM_ADMIN</p></td>
<td><div class="line-block">
<div class="line">Keycloak のマスターレルムにおける管理権限を持ったユーザ名を指定。</div>
<div class="line">指定した Keycloak ユーザが作成される。</div>
<div class="line">※KEYCLOAK_USER→SYSTEM_ADMINに変更</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.secret.SYSTEM_ADMIN_PASSWORD</p></td>
<td><div class="line-block">
<div class="line">Keycloak のマスターレルムにおける管理権限を持ったユーザに設定するパスワード(エンコードなし)</div>
<div class="line">※KEYCLOAK_PASSWORD→SYSTEM_ADMIN_PASSWORDに変更</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.secret.KEYCLOAK_DB_USER</p></td>
<td><div class="line-block">
<div class="line">Keycloak が使用するデータベースユーザ。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.secret.KEYCLOAK_DB_PASSWORD</p></td>
<td><p>Keycloak が使用するデータベースユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id50">
<div class="code-block-caption"><span class="caption-number">リスト 22 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id50" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_db_user_keycloak.yaml</span>
<span class="gu">@@ -65,8 +65,8 @@</span>
<span class="w"> </span>    secret:
<span class="w"> </span>      SYSTEM_ADMIN: &quot;admin&quot;
<span class="w"> </span>      SYSTEM_ADMIN_PASSWORD: &quot;Ch@ngeMeKCAdm&quot;
<span class="gd">-      KEYCLOAK_DB_USER: &quot;keycloak&quot;</span>
<span class="gd">-      KEYCLOAK_DB_PASSWORD: &quot;Ch@ngeMeKCADB&quot;</span>
<span class="gi">+      KEYCLOAK_DB_USER: &quot;keycloak-db-user&quot;               # Keycloak が使うDBユーザー</span>
<span class="gi">+      KEYCLOAK_DB_PASSWORD: &quot;keycloak-db-user-password&quot;  # Keycloak が使うDBユーザーのパスワード</span>
<span class="w"> </span>  gitlabDefinition:
<span class="w"> </span>    config:
<span class="w"> </span>      GITLAB_PROTOCOL: &quot;http&quot;
</pre></div>
</div>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Configure Exastro platform database</p>
<div class="line-block">
<div class="line">Configure DB user that will be used and created by applications.</div>
</div>
</li>
</ol>
<blockquote>
<div><table class="filter-table docutils align-left" id="id51">
<caption><span class="caption-number">表 18 </span><span class="caption-text">共通設定 (Exastro 共通基盤用データベース) のオプションパラメータ</span><a class="headerlink" href="#id51" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.name</p></td>
<td><p>認証機能用データベースの定義名</p></td>
<td><p>不可</p></td>
<td><p>&quot;pf-database&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.enabled</p></td>
<td><p>認証機能用データベースの定義の有効有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_VENDOR</p></td>
<td><p>認証機能用データベースで使用するデータベース</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><div class="line-block">
<div class="line"><strong class="program">&quot;mariadb&quot;</strong> (デフォルト): MariaDB を利用</div>
<div class="line"><strong class="program">&quot;mysql&quot;</strong>: MySQL を利用</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_HOST</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベース利用するDB</div>
<div class="line">デフォルト状態では、同一の Kubernetes クラスタ内にデプロイされるコンテナを指定しています。</div>
<div class="line">クラスタ外部の DB を利用する場合には設定が必要となります。</div>
</div>
</td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;mariadb&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.config.DB_PORT</p></td>
<td><p>認証機能用データベースで利用するポート番号(TCP)</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;3306&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.config.DB_DATABASE</p></td>
<td><p>認証機能用データベースで利用するデータベース名</p></td>
<td><p>可 (外部データベース利用時)</p></td>
<td><p>&quot;platform&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_USER</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザ名</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_ADMIN_PASSWORD</p></td>
<td><p>認証機能用データベースで利用する管理権限を持つDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>管理権限を持つDBユーザ名のパスワード</p></td>
</tr>
<tr class="row-even"><td><p>global.pfDatabaseDefinition.secret.DB_USER</p></td>
<td><div class="line-block">
<div class="line">認証機能用データベースに作成するDBユーザ名。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.pfDatabaseDefinition.secret.DB_PASSWORD</p></td>
<td><p>認証機能用データベースに作成するDBユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-number">リスト 23 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id52" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_db_user_pf.yaml</span>
<span class="gu">@@ -59,8 +59,8 @@</span>
<span class="w"> </span>    secret:
<span class="w"> </span>      DB_ADMIN_USER: &quot;root&quot;
<span class="w"> </span>      DB_ADMIN_PASSWORD: &quot;Ch@ngeMeDBAdm&quot;
<span class="gd">-      DB_USER: &quot;pf-user&quot;</span>
<span class="gd">-      DB_PASSWORD: &quot;Ch@ngeMePFDB&quot;</span>
<span class="gi">+      DB_USER: &quot;pf-db-user&quot;           # Exastro 共通基盤が使うDBユーザー</span>
<span class="gi">+      DB_PASSWORD: &quot;pf-db-password&quot;   # Exastro 共通基盤が使うDBユーザーのパスワード</span>
<span class="w"> </span>  keycloakDefinition:
<span class="w"> </span>    secret:
<span class="w"> </span>      SYSTEM_ADMIN: &quot;admin&quot;
</pre></div>
</div>
</div>
</div></blockquote>
</section>
</section>
<section id="gitlab-link-settings">
<span id="installation-kubernetes-gitlablinkage"></span><h3>GitLab link settings<a class="headerlink" href="#gitlab-link-settings" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Configure connection information in order to link with GitLab.</div>
</div>
<ul class="simple">
<li><p>External Gitlab</p></li>
<li><p>GitLab container</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id53">
<div class="code-block-caption"><span class="caption-number">リスト 24 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id53" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_gitlab_setting.yaml</span>
<span class="gu">@@ -69,12 +69,12 @@</span>
<span class="w"> </span>      KEYCLOAK_DB_PASSWORD: &quot;Ch@ngeMeKCADB&quot;
<span class="w"> </span>  gitlabDefinition:
<span class="w"> </span>    config:
<span class="gd">-      GITLAB_PROTOCOL: &quot;http&quot;</span>
<span class="gd">-      GITLAB_HOST: &quot;&quot; # &quot;gitlab&quot; if use container.</span>
<span class="gd">-      GITLAB_PORT: &quot;8080&quot;</span>
<span class="gi">+      GITLAB_PROTOCOL: &quot;接続プロトコル http or https&quot;</span>
<span class="gi">+      GITLAB_HOST: &quot;your.gitlab.endpoint&quot; # 起動する Gitalb コンテナの公開時のURL。AAPから接続できる必要がある。</span>
<span class="gi">+      GITLAB_PORT: &quot;30082&quot;                # 起動する Gitalb コンテナの公開時のポート番号</span>
<span class="w"> </span>    secret:
<span class="gd">-      GITLAB_ROOT_PASSWORD: &quot;Ch@ngeMeGL&quot;</span>
<span class="gd">-      GITLAB_ROOT_TOKEN: &quot;change-this-token&quot;</span>
<span class="gi">+      GITLAB_ROOT_PASSWORD: &quot;GitLabのRoot権限をユーザーパスワード&quot;</span>
<span class="gi">+      GITLAB_ROOT_TOKEN: &quot;GitLabのRoot権限を持ったトークン&quot;</span>
<span class="w"> </span>  mongoDefinition:
<span class="w"> </span>    config:
<span class="w"> </span>      MONGO_PROTOCOL: &quot;http&quot;
</pre></div>
</div>
</div>
</section>
<section id="proxy-settings">
<span id="installation-kubernetes-proxy-settings"></span><h3>Proxy settings<a class="headerlink" href="#proxy-settings" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Configure the following information when running Exastro under a Proxy environment.</div>
</div>
</section>
<section id="create-exastro-system-admin">
<h3>Create Exastro system admin<a class="headerlink" href="#create-exastro-system-admin" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Configure the infomation that will be used to create the Exastro system admin when setting up Keycloak.</div>
</div>
<table class="filter-table docutils align-left" id="id54">
<caption><span class="caption-number">表 19 </span><span class="caption-text">共通設定 (Keycloak) のオプションパラメータ</span><a class="headerlink" href="#id54" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 31.2%" />
<col style="width: 31.2%" />
<col style="width: 12.5%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>変更</p></th>
<th class="head"><p>デフォルト値・選択可能な設定値</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>global.keycloakDefinition.name</p></td>
<td><p>Keycloak の定義名</p></td>
<td><p>不可</p></td>
<td><p>keycloak</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.enabled</p></td>
<td><p>Keycloak の定義の利用有無</p></td>
<td><p>不可</p></td>
<td><p>true</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_PROTOCOL</p></td>
<td><p>Keycloak API エンドポイントのプロトコル</p></td>
<td><p>不可</p></td>
<td><p>&quot;http”</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_HOST</p></td>
<td><p>Keycloak API エンドポイントのホスト名、もしくは、FQDN</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.API_KEYCLOAK_PORT</p></td>
<td><p>Keycloak API エンドポイントのポート番号</p></td>
<td><p>不可</p></td>
<td><p>&quot;8080&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_PROTOCOL</p></td>
<td><p>Keycloak エンドポイントのプロトコル</p></td>
<td><p>不可</p></td>
<td><p>&quot;http&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.KEYCLOAK_HOST</p></td>
<td><p>Keycloak エンドポイントのホスト名、もしくは、FQDN</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_PORT</p></td>
<td><p>Keycloak API エンドポイントのポート番号</p></td>
<td><p>不可</p></td>
<td><p>&quot;8080&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.config.KEYCLOAK_MASTER_REALM</p></td>
<td><p>Keycloak のマスターレルム名</p></td>
<td><p>不可</p></td>
<td><p>&quot;master&quot;</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.config.KEYCLOAK_DB_DATABASE</p></td>
<td><p>Keycloak が利用するデータベース名</p></td>
<td><p>不可</p></td>
<td><p>&quot;keycloak&quot;</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.secret.SYSTEM_ADMIN</p></td>
<td><div class="line-block">
<div class="line">Keycloak のマスターレルムにおける管理権限を持ったユーザ名を指定。</div>
<div class="line">指定した Keycloak ユーザが作成される。</div>
<div class="line">※KEYCLOAK_USER→SYSTEM_ADMINに変更</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.secret.SYSTEM_ADMIN_PASSWORD</p></td>
<td><div class="line-block">
<div class="line">Keycloak のマスターレルムにおける管理権限を持ったユーザに設定するパスワード(エンコードなし)</div>
<div class="line">※KEYCLOAK_PASSWORD→SYSTEM_ADMIN_PASSWORDに変更</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-even"><td><p>global.keycloakDefinition.secret.KEYCLOAK_DB_USER</p></td>
<td><div class="line-block">
<div class="line">Keycloak が使用するデータベースユーザ。</div>
<div class="line">指定した DB ユーザが作成される。</div>
</div>
</td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
<tr class="row-odd"><td><p>global.keycloakDefinition.secret.KEYCLOAK_DB_PASSWORD</p></td>
<td><p>Keycloak が使用するデータベースユーザのパスワード(エンコードなし)</p></td>
<td><p>必須</p></td>
<td><p>任意の文字列</p></td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id55">
<div class="code-block-caption"><span class="caption-number">リスト 25 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id55" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro_usercreate_system_manager.yaml</span>
<span class="gu">@@ -63,8 +63,8 @@</span>
<span class="w"> </span>      DB_PASSWORD: &quot;Ch@ngeMePFDB&quot;
<span class="w"> </span>  keycloakDefinition:
<span class="w"> </span>    secret:
<span class="gd">-      SYSTEM_ADMIN: &quot;admin&quot;</span>
<span class="gd">-      SYSTEM_ADMIN_PASSWORD: &quot;Ch@ngeMeKCAdm&quot;</span>
<span class="gi">+      SYSTEM_ADMIN: &quot;admin&quot;                     # Exastro システムのシステム管理者のユーザー名</span>
<span class="gi">+      SYSTEM_ADMIN_PASSWORD: &quot;admin-password&quot;   # Exastro システムのシステム管理者のユーザーパスワード</span>
<span class="w"> </span>      KEYCLOAK_DB_USER: &quot;keycloak&quot;
<span class="w"> </span>      KEYCLOAK_DB_PASSWORD: &quot;Ch@ngeMeKCADB&quot;
<span class="w"> </span>  gitlabDefinition:
</pre></div>
</div>
</div>
</section>
<section id="configure-persistent-volume">
<span id="persistent-volume"></span><h3>Configure Persistent volume<a class="headerlink" href="#configure-persistent-volume" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">In order to persist databases( for container within clusters) and files, the user will have to configure a persistent volume.</div>
<div class="line">For more information regarding persistent volumes, see <a class="reference external" href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/">Persistent Volumes - Kubernetes</a>.</div>
</div>
<div class="line-block">
<div class="line">This document describes 2 persisting methods for the following:</div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">If outputting monitoring logs to a persistent volume, a persistent volume must be configured.</div>
</div>
</div>
<ul class="simple">
<li><p>Managed disk</p></li>
<li><p>Kubernetes note directory</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">Managed disk</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">Kubernetes node directory</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">Storage construction and maintenance is not required if the user is using a storage service provided by a public cloud.</div>
</div>
<ul class="simple">
<li><p>Setting example</p></li>
</ul>
<div class="line-block">
<div class="line">If the user is using storage from Azure, the user can persist data by defining StorageClass as shown below.</div>
<div class="line">For more information, see  <a class="reference external" href="https://learn.microsoft.com/en-us/azure/aks/concepts-storage#storage-classes">Storage options for applications in Azure Kubernetes Service (AKS)</a>.</div>
</div>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apiVersion</span><span class="p">:</span> <span class="n">storage</span><span class="o">.</span><span class="n">k8s</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">StorageClass</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">exastro</span><span class="o">-</span><span class="n">suite</span><span class="o">-</span><span class="n">azurefile</span><span class="o">-</span><span class="n">csi</span><span class="o">-</span><span class="n">nfs</span>
<span class="n">provisioner</span><span class="p">:</span> <span class="n">file</span><span class="o">.</span><span class="n">csi</span><span class="o">.</span><span class="n">azure</span><span class="o">.</span><span class="n">com</span>
<span class="n">allowVolumeExpansion</span><span class="p">:</span> <span class="n">true</span>
<span class="n">parameters</span><span class="p">:</span>
  <span class="n">protocol</span><span class="p">:</span> <span class="n">nfs</span>
<span class="n">mountOptions</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">nconnect</span><span class="o">=</span><span class="mi">8</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">caption<span class="colon">:</span></dt>
<dd class="field-odd"><p>storage-class-exastro-suite.yaml</p>
</dd>
<dt class="field-even">linenos<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="id56">
<div class="code-block-caption"><span class="caption-number">リスト 26 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id56" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span> itaGlobalDefinition:
<span class="w"> </span>   persistence:
<span class="w"> </span>     enabled: true
<span class="w"> </span>     accessMode: ReadWriteMany
<span class="w"> </span>     size: 10Gi
<span class="w"> </span>     volumeType: hostPath # e.g.) hostPath or AKS
<span class="gd">-      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)</span>
<span class="gi">+      storageClass: &quot;azurefile&quot; # e.g.) azurefile or - (None)</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※ The following has been configured in <a class="reference internal" href="#database-setup"><span class="std std-ref">Database link</span></a>.</div>
</div>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id57">
<div class="code-block-caption"><span class="caption-number">リスト 27 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id57" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span> databaseDefinition:
<span class="w"> </span>   persistence:
<span class="w"> </span>     enabled: true
<span class="w"> </span>     reinstall: false
<span class="w"> </span>     accessMode: ReadWriteOnce
<span class="w"> </span>     size: 20Gi
<span class="w"> </span>     volumeType: hostPath # e.g.) hostPath or AKS
<span class="gd">-      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)</span>
<span class="gi">+      storageClass: &quot;exastro-suite-azurefile-csi-nfs&quot; # e.g.) azurefile or - (None)</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">※ Configure the following in order to output monitoring logs to a persistent volume.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id58">
<div class="code-block-caption"><span class="caption-number">リスト 28 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id58" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span> pfAuditLogDefinition:
<span class="w"> </span>   name: pf-auditlog
<span class="w"> </span>   persistence:
<span class="gd">-      enabled: false</span>
<span class="gi">+      enabled: true</span>
<span class="w"> </span>     reinstall: false
<span class="w"> </span>     accessMode: ReadWriteMany
<span class="w"> </span>     size: 10Gi
<span class="w"> </span>     volumeType: hostPath # e.g.) hostPath or AKS
<span class="gd">-      storageClass: &quot;-&quot; # e.g.) azurefile or - (None)</span>
<span class="gi">+      storageClass: &quot;exastro-suite-azurefile-csi-nfs&quot; # e.g.) azurefile or - (None)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><ul class="simple">
<li><p>Features</p></li>
</ul>
<div class="line-block">
<div class="line">This method uses storage on the Kubernetes node. There is no need to provide seperate storage, but we recommend that this method is only used for testing and developing.</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">The user must have permission to access the directory specified with hostpath must.</div>
<div class="line">Example) chmod 777 [corresponding directory]</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">危険</p>
<div class="line-block">
<div class="line">While persisting data is possible, data might be deleted if compute nodes are changed. We strongly recommend against using this method to persist data in production.</div>
<div class="line">Note that if AKS clusters created with Azure are stopped, the AKS cluster's node will be released. This means that all saved information will be deleted.</div>
</div>
</div>
<ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="line-block">
<div class="line">The example below uses hostPath.</div>
</div>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id59">
<div class="code-block-caption"><span class="caption-number">リスト 29 </span><span class="caption-text">pv-database.yaml (Database volume)</span><a class="headerlink" href="#id59" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># pv-database.yaml</span>
<span class="linenos"> 2</span><span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="linenos"> 3</span><span class="n">kind</span><span class="p">:</span> <span class="n">PersistentVolume</span>
<span class="linenos"> 4</span><span class="n">metadata</span><span class="p">:</span>
<span class="linenos"> 5</span>  <span class="n">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">database</span>
<span class="linenos"> 6</span><span class="n">spec</span><span class="p">:</span>
<span class="linenos"> 7</span>  <span class="n">claimRef</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="n">name</span><span class="p">:</span> <span class="n">pvc</span><span class="o">-</span><span class="n">mariadb</span>
<span class="linenos"> 9</span>    <span class="n">namespace</span><span class="p">:</span> <span class="n">exastro</span>
<span class="linenos">10</span>  <span class="n">capacity</span><span class="p">:</span>
<span class="linenos">11</span>    <span class="n">storage</span><span class="p">:</span> <span class="mi">20</span><span class="n">Gi</span>
<span class="linenos">12</span>  <span class="n">accessModes</span><span class="p">:</span>
<span class="linenos">13</span>    <span class="o">-</span> <span class="n">ReadWriteOnce</span>
<span class="linenos">14</span>  <span class="n">persistentVolumeReclaimPolicy</span><span class="p">:</span> <span class="n">Retain</span>
<span class="linenos">15</span>  <span class="n">hostPath</span><span class="p">:</span>
<span class="linenos">16</span>    <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">suite</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="n">database</span>
<span class="linenos">17</span>    <span class="nb">type</span><span class="p">:</span> <span class="n">DirectoryOrCreate</span>
</pre></div>
</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pv-ita-common.yaml</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">PersistentVolume</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">ita</span><span class="o">-</span><span class="n">common</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">claimRef</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">pvc</span><span class="o">-</span><span class="n">ita</span><span class="o">-</span><span class="k">global</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">exastro</span>
  <span class="n">capacity</span><span class="p">:</span>
    <span class="n">storage</span><span class="p">:</span> <span class="mi">10</span><span class="n">Gi</span>
  <span class="n">accessModes</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">ReadWriteMany</span>
  <span class="n">persistentVolumeReclaimPolicy</span><span class="p">:</span> <span class="n">Retain</span>
  <span class="n">hostPath</span><span class="p">:</span>
    <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">suite</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">it</span><span class="o">-</span><span class="n">automation</span><span class="o">/</span><span class="n">ita</span><span class="o">-</span><span class="n">common</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">DirectoryOrCreate</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">caption<span class="colon">:</span></dt>
<dd class="field-odd"><p>pv-ita-common.yaml (File volume)</p>
</dd>
<dt class="field-even">linenos<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pv-mongo.yaml</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">PersistentVolume</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">mongo</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">claimRef</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">volume</span><span class="o">-</span><span class="n">mongo</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">mongo</span><span class="o">-</span><span class="mi">0</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">exastro</span>
  <span class="n">capacity</span><span class="p">:</span>
    <span class="n">storage</span><span class="p">:</span> <span class="mi">20</span><span class="n">Gi</span>
  <span class="n">accessModes</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">ReadWriteOnce</span>
  <span class="n">persistentVolumeReclaimPolicy</span><span class="p">:</span> <span class="n">Retain</span>
  <span class="n">hostPath</span><span class="p">:</span>
    <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">suite</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="n">mongo</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">DirectoryOrCreate</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">caption<span class="colon">:</span></dt>
<dd class="field-odd"><p>pv-mongo.yaml (OASE volume) ※Not required if not using OASE</p>
</dd>
<dt class="field-even">linenos<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># pv-gitlab.yaml</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">PersistentVolume</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">gitlab</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">claimRef</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">pvc</span><span class="o">-</span><span class="n">gitlab</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">exastro</span>
  <span class="n">capacity</span><span class="p">:</span>
    <span class="n">storage</span><span class="p">:</span> <span class="mi">20</span><span class="n">Gi</span>
  <span class="n">accessModes</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">ReadWriteMany</span>
  <span class="n">persistentVolumeReclaimPolicy</span><span class="p">:</span> <span class="n">Retain</span>
  <span class="n">hostPath</span><span class="p">:</span>
    <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">suite</span><span class="o">/</span><span class="n">exastro</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span><span class="n">gitlab</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">DirectoryOrCreate</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">caption<span class="colon">:</span></dt>
<dd class="field-odd"><p>pv-gitlab.yaml (GitLab volume) ※Not required if using external GitLab</p>
</dd>
<dt class="field-even">linenos<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="line-block">
<div class="line">※ Configure the following for outputting the monitoring log to persistent volumes.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id60">
<div class="code-block-caption"><span class="caption-number">リスト 30 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id60" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="w"> </span> pfAuditLogDefinition:
<span class="w"> </span>   name: pf-auditlog
<span class="w"> </span>   persistence:
<span class="gd">-      enabled: false</span>
<span class="gi">+      enabled: true</span>
<span class="w"> </span>     reinstall: false
<span class="w"> </span>     accessMode: ReadWriteMany
<span class="w"> </span>     size: 10Gi
<span class="w"> </span>     volumeType: hostPath # e.g.) hostPath or AKS
<span class="w"> </span>     storageClass: &quot;-&quot; # e.g.) azurefile or - (None)
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id61">
<div class="code-block-caption"><span class="caption-number">リスト 31 </span><span class="caption-text">pv-pf-auditlog.yaml (Volume for monitoring log file)</span><a class="headerlink" href="#id61" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># pv-pf-auditlog.yaml</span>
<span class="linenos"> 2</span><span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="linenos"> 3</span><span class="n">kind</span><span class="p">:</span> <span class="n">PersistentVolume</span>
<span class="linenos"> 4</span><span class="n">metadata</span><span class="p">:</span>
<span class="linenos"> 5</span>  <span class="n">name</span><span class="p">:</span> <span class="n">pv</span><span class="o">-</span><span class="n">auditlog</span>
<span class="linenos"> 6</span><span class="n">spec</span><span class="p">:</span>
<span class="linenos"> 7</span>  <span class="n">claimRef</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="n">name</span><span class="p">:</span> <span class="n">pvc</span><span class="o">-</span><span class="n">pf</span><span class="o">-</span><span class="n">auditlog</span>
<span class="linenos"> 9</span>    <span class="n">namespace</span><span class="p">:</span> <span class="n">exastro</span>
<span class="linenos">10</span>  <span class="n">capacity</span><span class="p">:</span>
<span class="linenos">11</span>    <span class="n">storage</span><span class="p">:</span> <span class="mi">10</span><span class="n">Gi</span>
<span class="linenos">12</span>  <span class="n">accessModes</span><span class="p">:</span>
<span class="linenos">13</span>    <span class="o">-</span> <span class="n">ReadWriteMany</span>
<span class="linenos">14</span>  <span class="n">persistentVolumeReclaimPolicy</span><span class="p">:</span> <span class="n">Retain</span>
<span class="linenos">15</span>  <span class="n">hostPath</span><span class="p">:</span>
<span class="linenos">16</span>    <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">exastro</span>
<span class="linenos">17</span>    <span class="nb">type</span><span class="p">:</span> <span class="n">DirectoryOrCreate</span>
</pre></div>
</div>
</div>
</div></blockquote>
</div></div>
</section>
</section>
<section id="install">
<span id="install1"></span><h2>Install<a class="headerlink" href="#install" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">If the installation fails, follow <a class="reference internal" href="#ita-uninstall"><span class="std std-ref">Uninstall</span></a> and try reinstalling.</div>
</div>
</div>
<section id="create-persistent-volumes">
<h3>Create Persistent volumes<a class="headerlink" href="#create-persistent-volumes" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Apply the manifest file created in <a class="reference internal" href="#persistent-volume"><span class="std std-ref">Configure Persistent volume</span></a> and create persistent volume.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># pv-database.yaml</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>pv-database.yaml

<span class="c1"># pv-ita-common.yaml</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>pv-ita-common.yaml

<span class="c1"># pv-mongo.yaml ※Not required if not using OASE</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>pv-mongo.yaml

<span class="c1"># pv-gitlab.yaml ※Not required if using external GitLab</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>pv-gitlab.yaml

<span class="c1"># pv-pf-auditlog.yaml ※Not required 監査ログを永続ボリュームに出力しない場合は設定不要</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>pv-pf-auditlog.yaml
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 確認</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pv
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">            </span>CAPACITY<span class="w">   </span>ACCESS<span class="w"> </span>MODES<span class="w">   </span>RECLAIM<span class="w"> </span>POLICY<span class="w">   </span>STATUS<span class="w">      </span>CLAIM<span class="w">                                  </span>STORAGECLASS<span class="w">   </span>REASON<span class="w">   </span>AGE
pv-database<span class="w">     </span>20Gi<span class="w">       </span>RWO<span class="w">            </span>Retain<span class="w">           </span>Available<span class="w">                                                                  </span>6s
pv-gitlab<span class="w">       </span>20Gi<span class="w">       </span>RWX<span class="w">            </span>Retain<span class="w">           </span>Available<span class="w">                                                                  </span>5s
pv-ita-common<span class="w">   </span>10Gi<span class="w">       </span>RWX<span class="w">            </span>Retain<span class="w">           </span>Available<span class="w">                                                                  </span>6s
pv-mongo<span class="w">        </span>20Gi<span class="w">       </span>RWO<span class="w">            </span>Retain<span class="w">           </span>Available<span class="w">   </span>exastro/volume-mongo-storage-mongo-0<span class="w">                           </span>5s
</pre></div>
</div>
</section>
<section id="ita-install">
<span id="id4"></span><h3>Install<a class="headerlink" href="#ita-install" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">See the  <cite>exastro-helm site &lt;https://github.com/exastro-suite/exastro-helm&gt;</cite> for more information regarding the Helm and Application versions.</div>
</div>
<table class="docutils align-left" id="id62">
<caption><span class="caption-number">表 20 </span><span class="caption-text">Helm チャートとアプリケーションのバージョン</span><a class="headerlink" href="#id62" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 44.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Chart Version</p></th>
<th class="head"><p>Exastro Version</p></th>
<th class="head"><p>Exastro IT Automation</p></th>
<th class="head"><p>Exastro Platform</p></th>
<th class="head"><p>リリースシナリオ</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1.0.2</p></td>
<td><p>2.1.0</p></td>
<td><p>2.0.3</p></td>
<td><p>1.4.0</p></td>
<td><p>Exastro IT Automation Version 2.0 GA リリース</p></td>
</tr>
<tr class="row-odd"><td><p>...</p></td>
<td><p>...</p></td>
<td><p>...</p></td>
<td><p>...</p></td>
<td><p>...</p></td>
</tr>
<tr class="row-even"><td><p>1.1.x</p></td>
<td><p>2.2.x</p></td>
<td><p>2.1.x</p></td>
<td><p>1.x.0</p></td>
<td><p>Exastro IT Automation Version 2.1 GA リリース(予定)</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">The access method changes depending on which publication method was used during installation.</div>
<div class="line">This section describes the methods for Ingress, LoadBalancer and NodePort.</div>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-SW5ncmVzcw==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-SW5ncmVzcw==" name="SW5ncmVzcw==" role="tab" tabindex="0">Ingress</button><button aria-controls="panel-5-TG9hZEJhbGFuY2Vy" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-TG9hZEJhbGFuY2Vy" name="TG9hZEJhbGFuY2Vy" role="tab" tabindex="-1">LoadBalancer</button><button aria-controls="panel-5-Tm9kZVBvcnQ=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-Tm9kZVBvcnQ=" name="Tm9kZVBvcnQ=" role="tab" tabindex="-1">NodePort</button></div><div aria-labelledby="tab-5-SW5ncmVzcw==" class="sphinx-tabs-panel group-tab" id="panel-5-SW5ncmVzcw==" name="SW5ncmVzcw==" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line">Follow the steps below and start installing.</div>
</div>
<ol class="arabic">
<li><p>Use Helm command to install on Kubernetes environment.</p>
<div class="literal-block-wrapper docutils container" id="id63">
<div class="code-block-caption"><span class="caption-number">リスト 32 </span><span class="caption-text">Command</span><a class="headerlink" href="#id63" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>upgrade<span class="w"> </span>exastro<span class="w"> </span>exastro/exastro<span class="w"> </span>--install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>exastro.yaml
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id64">
<div class="code-block-caption"><span class="caption-number">リスト 33 </span><span class="caption-text">Output results</span><a class="headerlink" href="#id64" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME:<span class="w"> </span>exastro
LAST<span class="w"> </span>DEPLOYED:<span class="w"> </span>Sat<span class="w"> </span>Jan<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:00:02<span class="w"> </span><span class="m">2023</span>
NAMESPACE:<span class="w"> </span>exastro
STATUS:<span class="w"> </span>deployed
REVISION:<span class="w"> </span><span class="m">1</span>
TEST<span class="w"> </span>SUITE:<span class="w"> </span>None
NOTES:
Exastro<span class="w"> </span>install<span class="w"> </span>completion!

<span class="m">1</span>.<span class="w"> </span>Execute<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>and<span class="w"> </span><span class="nb">wait</span><span class="w"> </span><span class="k">until</span><span class="w"> </span>the<span class="w"> </span>pod<span class="w"> </span>becomes<span class="w"> </span><span class="s2">&quot;Running&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;Completed&quot;</span>:

<span class="w">  </span><span class="c1"># NOTE: You can also append &quot;-w&quot; to the command or wait until the state changes with &quot;watch command&quot;</span>

<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="w"> </span>exastro

<span class="m">2</span>.<span class="w"> </span>Get<span class="w"> </span>the<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>these<span class="w"> </span>commands:

<span class="w">  </span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span>!!!<span class="w"> </span>Please<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>carefully.<span class="w"> </span>!!!

<span class="m">3</span>.<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>the<span class="w"> </span>application<span class="w"> </span>URL<span class="w"> </span>and<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>URL<span class="w"> </span>or<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>displayed<span class="w"> </span>URL:
<span class="w">  </span>*************************
<span class="w">  </span>*<span class="w"> </span>Service<span class="w"> </span>Console<span class="w">       </span>*
<span class="w">  </span>*************************
<span class="w">  </span>http://exastro-suite.example.local/

<span class="w">  </span>*************************
<span class="w">  </span>*<span class="w"> </span>Administrator<span class="w"> </span>Console<span class="w"> </span>*
<span class="w">  </span>*************************
<span class="w">  </span>http://exastro-suite-mng.example.local/auth/


<span class="c1"># Note: You can display this note again by executing the following command.</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Use the output results from the last step for the following steps.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Check install status</div>
</div>
<div class="line-block">
<div class="line">コマンドラインから以下のコマンドを入力して、インストール（サービス起動）が完了していることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id65">
<div class="code-block-caption"><span class="caption-number">リスト 34 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id65" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pod の一覧を取得</span>
kubectl<span class="w"> </span>get<span class="w"> </span>po<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">正常に起動している場合は、<kbd class="kbd docutils literal notranslate">ita</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> と <kbd class="kbd docutils literal notranslate">platform</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> が <kbd class="kbd docutils literal notranslate">Completed</kbd> 、その他すべてが <kbd class="kbd docutils literal notranslate">Running</kbd> となります。</div>
<div class="line">※正常に起動するまで数分かかる場合があります。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id66">
<div class="code-block-caption"><span class="caption-number">リスト 35 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id66" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                      </span>READY<span class="w">   </span>STATUS<span class="w">      </span>RESTARTS<span class="w">   </span>AGE
ita-api-admin-6b8567596d-rgjms<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-oase-receiver-6b74bdff6-zmcrw<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-organization-559d7d8f89-ptphh<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-execute-5dc444c999-w6gmr<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-role-vars-listup-6d8f98895f-bvjgn<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-vars-listup-6ccd997cf-hvkzq<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-pioneer-vars-listup-6cfcfd4479-8bqst<span class="w">       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-towermaster-sync-6759486f8f-wrbbp<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-cicd-for-iac-7b75cc56f5-rrrvg<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-collector-7748d54f59-8j5r2<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-regularly-779ff79775-xnt29<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-synchronize-5d5485479-5df54<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-excel-export-import-6f84f97dcf-hlm4h<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-hostgroup-split-59b698f479-cxggd<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-create-796bdc9c75-l79zq<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-export-import-849d796bb5-5mpw2<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-oase-conclusion-b484595d7-kssv4<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-execute-769d874d7-sknn6<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-vars-listup-7f589cdddc-g5xz6<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-execute-7f8b6d87cc-kfmfv<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-vars-listup-6cccbd4899-6frcn<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-migration-1-3-6-lydz<span class="w">                                  </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
ita-web-server-b4cd4cdf8-wkx78<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
keycloak-0<span class="w">                                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mariadb-778786f7d-ss4cq<span class="w">                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mongo-0<span class="w">                                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-api-ffb78f578-svd5t<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-auth-75895d784-9hhxw<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-job-864c47d4f-8vvvq<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-migration-1-8-0-rjwr<span class="w">                             </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
platform-web-6644884657-dmwp6<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
</pre></div>
</div>
</div>
</li>
<li><p>Backup encrypt key</p>
<div class="line-block">
<div class="line">Exastro システムのパスワードや認証情報といった機密情報はすべて暗号化されています。</div>
<div class="line">必ず、下記で取得した暗号化キーをバックアップして、適切に保管してください。</div>
</div>
<div class="admonition danger">
<p class="admonition-title">危険</p>
<div class="line-block">
<div class="line">暗号化キーを紛失した場合、バックアップデータからシステムを復旧した際にデータの復号ができなくなります。</div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id67">
<div class="code-block-caption"><span class="caption-number">リスト 36 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id67" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id68">
<div class="code-block-caption"><span class="caption-number">リスト 37 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id68" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">JnIoXzJtPic2MXFqRl1yI1chMj8hWzQrNypmVn41Pk8</span><span class="o">=</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id69">
<div class="code-block-caption"><span class="caption-number">リスト 38 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id69" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id70">
<div class="code-block-caption"><span class="caption-number">リスト 39 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id70" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">bHFZe2VEVVM2PmFeQDMqNG4oZT4lTlglLjJJekxBTHE</span><span class="o">=</span>
</pre></div>
</div>
</div>
</li>
<li><p>Check connection</p>
<div class="line-block">
<div class="line">Follow the output results and access the <span class="menuselection">Administrator Console</span> URL.</div>
<div class="line">The following is an example. Please change the host name with the one set in <a class="reference internal" href="#service-setting"><span class="std std-ref">Service publish settings</span></a>.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id71">
<div class="code-block-caption"><span class="caption-number">リスト 40 </span><span class="caption-text">Output results(Example)</span><a class="headerlink" href="#id71" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>*************************
*<span class="w"> </span>Service<span class="w"> </span>Console<span class="w">       </span>*
*************************
http://exastro-suite.example.local/

*************************
*<span class="w"> </span>Administrator<span class="w"> </span>Console<span class="w"> </span>*
*************************
http://exastro-suite-mng.example.local/auth/
</pre></div>
</div>
</div>
<table class="docutils align-left" id="id72">
<caption><span class="caption-number">表 21 </span><span class="caption-text">Connection check URL</span><a class="headerlink" href="#id72" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Managment console</p></td>
<td><p><a class="reference external" href="http://exastro-suite-mng.example.local/auth/">http://exastro-suite-mng.example.local/auth/</a></p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div><div aria-labelledby="tab-5-TG9hZEJhbGFuY2Vy" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-TG9hZEJhbGFuY2Vy" name="TG9hZEJhbGFuY2Vy" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line">Follow the steps below and start installing.</div>
</div>
<ol class="arabic">
<li><p>Use Helm command to install on Kubernetes environment.</p>
<div class="literal-block-wrapper docutils container" id="id73">
<div class="code-block-caption"><span class="caption-number">リスト 41 </span><span class="caption-text">Command</span><a class="headerlink" href="#id73" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>upgrade<span class="w"> </span>exastro<span class="w"> </span>exastro/exastro<span class="w"> </span>--install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>exastro.yaml
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id74">
<div class="code-block-caption"><span class="caption-number">リスト 42 </span><span class="caption-text">Output results(Example)</span><a class="headerlink" href="#id74" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME:<span class="w"> </span>exastro
LAST<span class="w"> </span>DEPLOYED:<span class="w"> </span>Sat<span class="w"> </span>Jan<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:00:02<span class="w"> </span><span class="m">2023</span>
NAMESPACE:<span class="w"> </span>exastro
STATUS:<span class="w"> </span>deployed
REVISION:<span class="w"> </span><span class="m">1</span>
TEST<span class="w"> </span>SUITE:<span class="w"> </span>None
NOTES:
Exastro<span class="w"> </span>install<span class="w"> </span>completion!

<span class="m">1</span>.<span class="w"> </span>Execute<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>and<span class="w"> </span><span class="nb">wait</span><span class="w"> </span><span class="k">until</span><span class="w"> </span>the<span class="w"> </span>pod<span class="w"> </span>becomes<span class="w"> </span><span class="s2">&quot;Running&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;Completed&quot;</span>:

<span class="w">  </span><span class="c1"># NOTE: You can also append &quot;-w&quot; to the command or wait until the state changes with &quot;watch command&quot;</span>

<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="w"> </span>exastro

<span class="m">2</span>.<span class="w"> </span>Get<span class="w"> </span>the<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>these<span class="w"> </span>commands:

<span class="w">  </span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span>!!!<span class="w"> </span>Please<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>carefully.<span class="w"> </span>!!!

<span class="m">3</span>.<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>the<span class="w"> </span>application<span class="w"> </span>URL<span class="w"> </span>and<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>URL<span class="w"> </span>or<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>displayed<span class="w"> </span>URL:
<span class="w">  </span><span class="c1"># NOTE: It may take a few minutes for the LoadBalancer IP to be available.</span>
<span class="w">  </span><span class="c1">#       You can watch the status of by running &#39;kubectl get --namespace exastro svc -w platform-auth&#39;</span>

<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_SVC_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[0].nodePort}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_MGT_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[1].nodePort}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.status.loadBalancer.ingress[0].ip}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="c1"># * Administrator Console *</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_MGT_PORT</span>/auth/

<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="c1"># * Service Console       *</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_SVC_PORT</span>

<span class="c1"># Note: You can display this note again by executing the following command.</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Follow the output results for the following steps.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Check installation</div>
</div>
<div class="line-block">
<div class="line">コマンドラインから以下のコマンドを入力して、インストール（サービス起動）が完了していることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id75">
<div class="code-block-caption"><span class="caption-number">リスト 43 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id75" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pod の一覧を取得</span>
kubectl<span class="w"> </span>get<span class="w"> </span>po<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">正常に起動している場合は、<kbd class="kbd docutils literal notranslate">ita</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> と <kbd class="kbd docutils literal notranslate">platform</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> が <kbd class="kbd docutils literal notranslate">Completed</kbd> 、その他すべてが <kbd class="kbd docutils literal notranslate">Running</kbd> となります。</div>
<div class="line">※正常に起動するまで数分かかる場合があります。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id76">
<div class="code-block-caption"><span class="caption-number">リスト 44 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id76" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                      </span>READY<span class="w">   </span>STATUS<span class="w">      </span>RESTARTS<span class="w">   </span>AGE
ita-api-admin-6b8567596d-rgjms<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-oase-receiver-6b74bdff6-zmcrw<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-organization-559d7d8f89-ptphh<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-execute-5dc444c999-w6gmr<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-role-vars-listup-6d8f98895f-bvjgn<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-vars-listup-6ccd997cf-hvkzq<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-pioneer-vars-listup-6cfcfd4479-8bqst<span class="w">       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-towermaster-sync-6759486f8f-wrbbp<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-cicd-for-iac-7b75cc56f5-rrrvg<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-collector-7748d54f59-8j5r2<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-regularly-779ff79775-xnt29<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-synchronize-5d5485479-5df54<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-excel-export-import-6f84f97dcf-hlm4h<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-hostgroup-split-59b698f479-cxggd<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-create-796bdc9c75-l79zq<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-export-import-849d796bb5-5mpw2<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-oase-conclusion-b484595d7-kssv4<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-execute-769d874d7-sknn6<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-vars-listup-7f589cdddc-g5xz6<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-execute-7f8b6d87cc-kfmfv<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-vars-listup-6cccbd4899-6frcn<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-migration-1-3-6-lydz<span class="w">                                  </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
ita-web-server-b4cd4cdf8-wkx78<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
keycloak-0<span class="w">                                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mariadb-778786f7d-ss4cq<span class="w">                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mongo-0<span class="w">                                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-api-ffb78f578-svd5t<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-auth-75895d784-9hhxw<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-job-864c47d4f-8vvvq<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-migration-1-8-0-rjwr<span class="w">                             </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
platform-web-6644884657-dmwp6<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
</pre></div>
</div>
</div>
</li>
<li><p>Backup encrypt key</p>
<div class="line-block">
<div class="line">Exastro システムのパスワードや認証情報といった機密情報はすべて暗号化されています。</div>
<div class="line">必ず、下記で取得した暗号化キーをバックアップして、適切に保管してください。</div>
</div>
<div class="admonition danger">
<p class="admonition-title">危険</p>
<div class="line-block">
<div class="line">暗号化キーを紛失した場合、バックアップデータからシステムを復旧した際にデータの復号ができなくなります。</div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id77">
<div class="code-block-caption"><span class="caption-number">リスト 45 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id77" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id78">
<div class="code-block-caption"><span class="caption-number">リスト 46 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id78" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">JnIoXzJtPic2MXFqRl1yI1chMj8hWzQrNypmVn41Pk8</span><span class="o">=</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id79">
<div class="code-block-caption"><span class="caption-number">リスト 47 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id79" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id80">
<div class="code-block-caption"><span class="caption-number">リスト 48 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id80" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">bHFZe2VEVVM2PmFeQDMqNG4oZT4lTlglLjJJekxBTHE</span><span class="o">=</span>
</pre></div>
</div>
</div>
</li>
<li><p>Check connection</p>
<div class="line-block">
<div class="line">Copy and paste the commands output from step 1.:command:<cite>helm install</cite> to the console and run them.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id81">
<div class="code-block-caption"><span class="caption-number">リスト 49 </span><span class="caption-text">Command</span><a class="headerlink" href="#id81" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Running the commands from the helm install results</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODE_SVC_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[0].nodePort}&quot;</span><span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODE_MGT_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[1].nodePort}&quot;</span><span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.status.loadBalancer.ingress[0].ip}&quot;</span><span class="k">)</span>
<span class="c1"># *************************</span>
<span class="c1"># * Administrator Console *</span>
<span class="c1"># *************************</span>
<span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_MGT_PORT</span>/auth/

<span class="c1"># *********************</span>
<span class="c1"># * Service Console       *</span>
<span class="c1"># *************************</span>
<span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_SVC_PORT</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Follow the output results and access the URL to <span class="menuselection">Administrator Console</span>.</div>
<div class="line">The following is an example. Please change the following with the data from the commands results.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id82">
<div class="code-block-caption"><span class="caption-number">リスト 50 </span><span class="caption-text">Output results(Example)</span><a class="headerlink" href="#id82" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>*************************
*<span class="w"> </span>Administrator<span class="w"> </span>Console<span class="w"> </span>*
*************************
http://172.16.20.XXX:32031/auth/

*************************
*<span class="w"> </span>Service<span class="w"> </span>Console<span class="w">       </span>*
*************************
http://172.16.20.XXX:31798
</pre></div>
</div>
</div>
<table class="docutils align-left" id="id83">
<caption><span class="caption-number">表 22 </span><span class="caption-text">Connection check URL</span><a class="headerlink" href="#id83" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Managment console</p></td>
<td><p><a class="reference external" href="http://172.16.20.xxx:32031/auth/">http://172.16.20.xxx:32031/auth/</a></p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div><div aria-labelledby="tab-5-Tm9kZVBvcnQ=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-Tm9kZVBvcnQ=" name="Tm9kZVBvcnQ=" role="tabpanel" tabindex="0"><div class="line-block">
<div class="line">Follow the steps below to start installing.</div>
</div>
<ol class="arabic">
<li><p>Use Helm command to install on Kubernetes environment.</p>
<div class="literal-block-wrapper docutils container" id="id84">
<div class="code-block-caption"><span class="caption-number">リスト 51 </span><span class="caption-text">Command</span><a class="headerlink" href="#id84" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>upgrade<span class="w"> </span>exastro<span class="w"> </span>exastro/exastro<span class="w"> </span>--install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>exastro.yaml
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id85">
<div class="code-block-caption"><span class="caption-number">リスト 52 </span><span class="caption-text">Output results</span><a class="headerlink" href="#id85" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME:<span class="w"> </span>exastro
LAST<span class="w"> </span>DEPLOYED:<span class="w"> </span>Sun<span class="w"> </span>Jan<span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">12</span>:18:02<span class="w"> </span><span class="m">2023</span>
NAMESPACE:<span class="w"> </span>exastro
STATUS:<span class="w"> </span>deployed
REVISION:<span class="w"> </span><span class="m">1</span>
TEST<span class="w"> </span>SUITE:<span class="w"> </span>None
NOTES:
Exastro<span class="w"> </span>install<span class="w"> </span>completion!

<span class="m">1</span>.<span class="w"> </span>Execute<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>and<span class="w"> </span><span class="nb">wait</span><span class="w"> </span><span class="k">until</span><span class="w"> </span>the<span class="w"> </span>pod<span class="w"> </span>becomes<span class="w"> </span><span class="s2">&quot;Running&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;Completed&quot;</span>:

<span class="w">  </span><span class="c1"># NOTE: You can also append &quot;-w&quot; to the command or wait until the state changes with &quot;watch command&quot;</span>

<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="w"> </span>exastro

<span class="m">2</span>.<span class="w"> </span>Get<span class="w"> </span>the<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>these<span class="w"> </span>commands:

<span class="w">  </span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span>!!!<span class="w"> </span>Please<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>carefully.<span class="w"> </span>!!!

<span class="m">3</span>.<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>the<span class="w"> </span>application<span class="w"> </span>URL<span class="w"> </span>and<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>URL<span class="w"> </span>or<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>displayed<span class="w"> </span>URL:


<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_SVC_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[0].nodePort}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_MGT_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[1].nodePort}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.items[0].status.addresses[0].address}&quot;</span><span class="k">)</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="c1"># * Administrator Console *</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_MGT_PORT</span>/auth/

<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="c1"># * Service Console       *</span>
<span class="w">  </span><span class="c1"># *************************</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_SVC_PORT</span>

<span class="c1"># Note: You can display this note again by executing the following command.</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Follow the output results for the following steps.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Check install status</div>
</div>
<div class="line-block">
<div class="line">コマンドラインから以下のコマンドを入力して、インストール（サービス起動）が完了していることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id86">
<div class="code-block-caption"><span class="caption-number">リスト 53 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id86" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pod の一覧を取得</span>
kubectl<span class="w"> </span>get<span class="w"> </span>po<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">正常に起動している場合は、<kbd class="kbd docutils literal notranslate">ita</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> と <kbd class="kbd docutils literal notranslate">platform</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> が <kbd class="kbd docutils literal notranslate">Completed</kbd> 、その他すべてが <kbd class="kbd docutils literal notranslate">Running</kbd> となります。</div>
<div class="line">※正常に起動するまで数分かかる場合があります。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id87">
<div class="code-block-caption"><span class="caption-number">リスト 54 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id87" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                      </span>READY<span class="w">   </span>STATUS<span class="w">      </span>RESTARTS<span class="w">   </span>AGE
ita-api-admin-6b8567596d-rgjms<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-oase-receiver-6b74bdff6-zmcrw<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-organization-559d7d8f89-ptphh<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-execute-5dc444c999-w6gmr<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-role-vars-listup-6d8f98895f-bvjgn<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-vars-listup-6ccd997cf-hvkzq<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-pioneer-vars-listup-6cfcfd4479-8bqst<span class="w">       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-towermaster-sync-6759486f8f-wrbbp<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-cicd-for-iac-7b75cc56f5-rrrvg<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-collector-7748d54f59-8j5r2<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-regularly-779ff79775-xnt29<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-synchronize-5d5485479-5df54<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-excel-export-import-6f84f97dcf-hlm4h<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-hostgroup-split-59b698f479-cxggd<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-create-796bdc9c75-l79zq<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-export-import-849d796bb5-5mpw2<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-oase-conclusion-b484595d7-kssv4<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-execute-769d874d7-sknn6<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-vars-listup-7f589cdddc-g5xz6<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-execute-7f8b6d87cc-kfmfv<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-vars-listup-6cccbd4899-6frcn<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-migration-1-3-6-lydz<span class="w">                                  </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
ita-web-server-b4cd4cdf8-wkx78<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
keycloak-0<span class="w">                                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mariadb-778786f7d-ss4cq<span class="w">                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mongo-0<span class="w">                                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-api-ffb78f578-svd5t<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-auth-75895d784-9hhxw<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-job-864c47d4f-8vvvq<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-migration-1-8-0-rjwr<span class="w">                             </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
platform-web-6644884657-dmwp6<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
</pre></div>
</div>
</div>
</li>
<li><p>Backup encrypt key</p>
<div class="line-block">
<div class="line">Exastro システムのパスワードや認証情報といった機密情報はすべて暗号化されています。</div>
<div class="line">必ず、下記で取得した暗号化キーをバックアップして、適切に保管してください。</div>
</div>
<div class="admonition danger">
<p class="admonition-title">危険</p>
<div class="line-block">
<div class="line">暗号化キーを紛失した場合、バックアップデータからシステムを復旧した際にデータの復号ができなくなります。</div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id88">
<div class="code-block-caption"><span class="caption-number">リスト 55 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id88" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id89">
<div class="code-block-caption"><span class="caption-number">リスト 56 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id89" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">JnIoXzJtPic2MXFqRl1yI1chMj8hWzQrNypmVn41Pk8</span><span class="o">=</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id90">
<div class="code-block-caption"><span class="caption-number">リスト 57 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id90" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id91">
<div class="code-block-caption"><span class="caption-number">リスト 58 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id91" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">bHFZe2VEVVM2PmFeQDMqNG4oZT4lTlglLjJJekxBTHE</span><span class="o">=</span>
</pre></div>
</div>
</div>
</li>
<li><p>Check connection</p>
<div class="line-block">
<div class="line">1. Copy and paste the commands output from step 1.:command:<cite>helm install</cite> to the console and run them.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id92">
<div class="code-block-caption"><span class="caption-number">リスト 59 </span><span class="caption-text">Command</span><a class="headerlink" href="#id92" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_SVC_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[0].nodePort}&quot;</span><span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODE_MGT_PORT</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>services<span class="w"> </span>platform-auth<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.spec.ports[1].nodePort}&quot;</span><span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">NODE_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.items[0].status.addresses[0].address}&quot;</span><span class="k">)</span>
<span class="c1"># *************************</span>
<span class="c1"># * Administrator Console *</span>
<span class="c1"># *************************</span>
<span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_MGT_PORT</span>/auth/

<span class="c1"># *************************</span>
<span class="c1"># * Service Console       *</span>
<span class="c1"># *************************</span>
<span class="nb">echo</span><span class="w"> </span>http://<span class="nv">$NODE_IP</span>:<span class="nv">$NODE_SVC_PORT</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Follow the output results and access the URL to <span class="menuselection">Administrator Console</span>.</div>
<div class="line">The following is an example. Please change the following with the data from the commands results.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id93">
<div class="code-block-caption"><span class="caption-number">リスト 60 </span><span class="caption-text">Output results(Example)</span><a class="headerlink" href="#id93" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>*************************
*<span class="w"> </span>Administrator<span class="w"> </span>Console<span class="w"> </span>*
*************************
http://172.16.20.xxx:30081/auth/

*************************
*<span class="w"> </span>Service<span class="w"> </span>Console<span class="w">       </span>*
*************************
http://172.16.20.xxx:30080
</pre></div>
</div>
</div>
<table class="docutils align-left" id="id94">
<caption><span class="caption-number">表 23 </span><span class="caption-text">Connection check URL</span><a class="headerlink" href="#id94" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Managment console</p></td>
<td><p><a class="reference external" href="http://172.16.20.xxx:30081/auth/">http://172.16.20.xxx:30081/auth/</a></p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div></div>
</section>
<section id="log-in-to-managment-console">
<h3>Log in to Managment console<a class="headerlink" href="#log-in-to-managment-console" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">If the page belows is displayed, select <span class="menuselection">Administration Console</span> and log in.</div>
</div>
<figure class="align-default" id="management-console">
<a class="reference internal image-reference" href="../../../_images/administrator-console.png"><img alt="administrator-console" src="../../../_images/administrator-console.png" style="width: 600px;" />
</a>
</figure>
<div class="line-block">
<div class="line">The Login ID and password are the <kbd class="kbd docutils literal notranslate">KEYCLOAK_USER</kbd> and <kbd class="kbd docutils literal notranslate">KEYCLOAK_PASSWORD</kbd> registered in <span class="xref std std-ref">create_system_manager</span>.</div>
</div>
<figure class="align-default" id="login-page">
<a class="reference internal image-reference" href="../../../_images/exastro-login.png"><img alt="login" src="../../../_images/exastro-login.png" style="width: 300px;" />
</a>
</figure>
<div class="line-block">
<div class="line">Open the Keycloak managment page.</div>
</div>
<figure class="align-default" id="keycloak-management-page">
<a class="reference internal image-reference" href="../../../_images/keycloak-home.png"><img alt="login" src="../../../_images/keycloak-home.png" style="width: 600px;" />
</a>
</figure>
<div class="line-block">
<div class="line">Once logged in, create a <a class="reference internal" href="../../../manuals/platform_management/organization.html"><span class="doc">Organization</span></a>.</div>
</div>
</section>
</section>
<section id="update">
<h2>Update<a class="headerlink" href="#update" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section describes how to update the Exastro system.</div>
</div>
<section id="update-preparation">
<h3>Update preparation<a class="headerlink" href="#update-preparation" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">We recommend that the user follow <a class="reference internal" href="../../../manuals/maintenance/backup_and_restore.html"><span class="doc">Data backup/restore</span></a> and back up the data before updating.</div>
</div>
</div>
<section id="update-helm-repository">
<h4>Update Helm repository<a class="headerlink" href="#update-helm-repository" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Update the Exastro system's Helm repository.</div>
</div>
<div class="line-block">
<div class="line">Check the version before updating.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id95">
<div class="code-block-caption"><span class="caption-number">リスト 61 </span><span class="caption-text">Command</span><a class="headerlink" href="#id95" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Check Repository information</span>
<span class="linenos">2</span>helm<span class="w"> </span>search<span class="w"> </span>repo<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id96">
<div class="code-block-caption"><span class="caption-number">リスト 62 </span><span class="caption-text">Run results</span><a class="headerlink" href="#id96" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>helm<span class="w"> </span>search<span class="w"> </span>repo<span class="w"> </span>exastro
<span class="linenos">2</span>NAME<span class="w">                            </span>CHART<span class="w"> </span>VERSION<span class="w">   </span>APP<span class="w"> </span>VERSION<span class="w">     </span>DESCRIPTION
<span class="hll"><span class="linenos">3</span>exastro/exastro<span class="w">                 </span><span class="m">1</span>.0.0<span class="w">           </span><span class="m">2</span>.0.3<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro.<span class="w"> </span>Exastro<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>Open<span class="w"> </span>So...
</span><span class="linenos">4</span>exastro/exastro-it-automation<span class="w">   </span><span class="m">1</span>.2.0<span class="w">           </span><span class="m">2</span>.0.3<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro<span class="w"> </span>IT<span class="w"> </span>Automation.<span class="w"> </span>Exastro...
<span class="linenos">5</span>exastro/exastro-platform<span class="w">        </span><span class="m">1</span>.5.0<span class="w">           </span><span class="m">1</span>.4.0<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro<span class="w"> </span>Platform.<span class="w"> </span>Exastro<span class="w"> </span>Plat...
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Update the Helm repository.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id97">
<div class="code-block-caption"><span class="caption-number">リスト 63 </span><span class="caption-text">Command</span><a class="headerlink" href="#id97" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Update Repository information</span>
<span class="linenos">2</span>helm<span class="w"> </span>repo<span class="w"> </span>update
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Check that it has been updated to the latest version.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id98">
<div class="code-block-caption"><span class="caption-number">リスト 64 </span><span class="caption-text">Command</span><a class="headerlink" href="#id98" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c1"># Check Repository information</span>
<span class="linenos">2</span>helm<span class="w"> </span>search<span class="w"> </span>repo<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id99">
<div class="code-block-caption"><span class="caption-number">リスト 65 </span><span class="caption-text">Run results</span><a class="headerlink" href="#id99" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>helm<span class="w"> </span>search<span class="w"> </span>repo<span class="w"> </span>exastro
<span class="linenos">2</span>NAME<span class="w">                            </span>CHART<span class="w"> </span>VERSION<span class="w">   </span>APP<span class="w"> </span>VERSION<span class="w">     </span>DESCRIPTION
<span class="hll"><span class="linenos">3</span>exastro/exastro<span class="w">                 </span><span class="m">1</span>.0.1<span class="w">           </span><span class="m">2</span>.1.0<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro.<span class="w"> </span>Exastro<span class="w"> </span>is<span class="w"> </span>an<span class="w"> </span>Open<span class="w"> </span>So...
</span><span class="linenos">4</span>exastro/exastro-it-automation<span class="w">   </span><span class="m">1</span>.2.0<span class="w">           </span><span class="m">2</span>.0.3<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro<span class="w"> </span>IT<span class="w"> </span>Automation.<span class="w"> </span>Exastro...
<span class="linenos">5</span>exastro/exastro-platform<span class="w">        </span><span class="m">1</span>.5.0<span class="w">           </span><span class="m">1</span>.4.0<span class="w">           </span>A<span class="w"> </span>Helm<span class="w"> </span>chart<span class="w"> </span><span class="k">for</span><span class="w"> </span>Exastro<span class="w"> </span>Platform.<span class="w"> </span>Exastro<span class="w"> </span>Plat...
</pre></div>
</div>
</div>
</section>
<section id="check-default-setting-values-and-update-data">
<h4>Check default setting values and update data<a class="headerlink" href="#check-default-setting-values-and-update-data" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Check the updated default values.</div>
<div class="line">Compare the <code class="file docutils literal notranslate"><span class="pre">exastro.yaml</span></code> file pre and post update.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id100">
<div class="code-block-caption"><span class="caption-number">リスト 66 </span><span class="caption-text">Command</span><a class="headerlink" href="#id100" title="Link to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>diff<span class="w"> </span>-u<span class="w"> </span>exastro.yaml<span class="w"> </span>&lt;<span class="o">(</span>helm<span class="w"> </span>show<span class="w"> </span>values<span class="w"> </span>exastro/exastro<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id101">
<div class="code-block-caption"><span class="caption-number">リスト 67 </span><span class="caption-text">Run results</span><a class="headerlink" href="#id101" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>exastro-platform:
<span class="w"> </span> platform-api:
<span class="w"> </span>   image:
<span class="w"> </span>     repository: &quot;exastro/exastro-platform-api&quot;
<span class="w"> </span>      tag: &quot;&quot;

<span class="w"> </span> platform-auth:
<span class="gi">+    extraEnv:</span>
<span class="gi">+      # Please set the URL to access</span>
<span class="gi">+      EXTERNAL_URL: &quot;&quot;</span>
<span class="gi">+      EXTERNAL_URL_MNG: &quot;&quot;</span>
<span class="w"> </span>   ingress:
<span class="w"> </span>     enabled: true
<span class="w"> </span>     hosts:
<span class="w"> </span>       - host: exastro-suite.example.local
<span class="w"> </span>         paths:
</pre></div>
</div>
</div>
</section>
<section id="update-setting-values">
<h4>Update setting values<a class="headerlink" href="#update-setting-values" title="Link to this heading">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">Both the username and password must be the same as before updating the system.</div>
</div>
</div>
<div class="line-block">
<div class="line">After comparing the default setting values, add any desired items and setting values before updating.</div>
<div class="line">If no setting value update is needed, skip this step.</div>
<div class="line">E.g. In the example below, <kbd class="kbd docutils literal notranslate">exastro</kbd>-<kbd class="kbd docutils literal notranslate">platform.platform</kbd>-<kbd class="kbd docutils literal notranslate">auth.extraEnv</kbd> is added, meaning that the corresponding setting items and values in <code class="file docutils literal notranslate"><span class="pre">exastro.yaml</span></code> must be added.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id102">
<div class="code-block-caption"><span class="caption-number">リスト 68 </span><span class="caption-text">Run results</span><a class="headerlink" href="#id102" title="Link to this code">¶</a></div>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span>exastro-platform:
<span class="w"> </span> platform-api:
<span class="w"> </span>   image:
<span class="w"> </span>     repository: &quot;exastro/exastro-platform-api&quot;
<span class="w"> </span>      tag: &quot;&quot;

<span class="w"> </span> platform-auth:
<span class="gi">+    extraEnv:</span>
<span class="gi">+      # Please set the URL to access</span>
<span class="gi">+      EXTERNAL_URL: &quot;&quot;</span>
<span class="gi">+      EXTERNAL_URL_MNG: &quot;&quot;</span>
<span class="w"> </span>   ingress:
<span class="w"> </span>     enabled: true
<span class="w"> </span>     hosts:
<span class="w"> </span>       - host: exastro-suite.example.local
<span class="w"> </span>         paths:
</pre></div>
</div>
</div>
</section>
<section id="specify-encryption-key">
<span id="change-encrypt-key"></span><h4>Specify Encryption key<a class="headerlink" href="#specify-encryption-key" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Specify the encryption key backed up in <a class="reference internal" href="../../../manuals/maintenance/backup_and_restore.html#backup-encrypt-key"><span class="std std-ref">Encrypt key backup</span></a>.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id103">
<div class="code-block-caption"><span class="caption-number">リスト 69 </span><span class="caption-text">exastro.yaml</span><a class="headerlink" href="#id103" title="Link to this code">¶</a></div>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/exastro.yaml</span>
<span class="gi">+++ /home/runner/work/exastro-it-automation-docs-dev/exastro-it-automation-docs-dev/workspace/src/en/2.5/installation/literal_includes/update_exastro.yaml</span>
<span class="gu">@@ -8,7 +8,7 @@</span>
<span class="w"> </span>      LANGUAGE: &quot;en&quot;
<span class="w"> </span>      TZ: &quot;Asia/Tokyo&quot;
<span class="w"> </span>    secret:
<span class="gd">-      ENCRYPT_KEY: &quot;&quot;</span>
<span class="gi">+      ENCRYPT_KEY: &quot;JnIoXzJtPic2MXFqRl1yI1chMj8hWzQrNypmVn41Pk8=&quot;</span>
<span class="w"> </span>    persistence:
<span class="w"> </span>      enabled: true
<span class="w"> </span>      accessMode: ReadWriteMany
<span class="gu">@@ -36,7 +36,7 @@</span>
<span class="w"> </span>      LANGUAGE: &quot;en&quot;
<span class="w"> </span>      TZ: &quot;Asia/Tokyo&quot;
<span class="w"> </span>    secret:
<span class="gd">-      ENCRYPT_KEY: &quot;&quot;</span>
<span class="gi">+      ENCRYPT_KEY: &quot;bHFZe2VEVVM2PmFeQDMqNG4oZT4lTlglLjJJekxBTHE=&quot;</span>
<span class="w"> </span>  pfAuditLogDefinition:
<span class="w"> </span>    name: pf-auditlog
<span class="w"> </span>    persistence:
<span class="gu">@@ -621,3 +621,4 @@</span>
<span class="w"> </span>              - mongo
<span class="w"> </span>          topologyKey: kubernetes.io/hostname
<span class="w"> </span>
<span class="gi">+</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="ita-upgrade">
<span id="id5"></span><h3>Update<a class="headerlink" href="#ita-upgrade" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">If updating from version 2.2.1 or before to 2.3.0 or later, the user must perform <a class="reference internal" href="#ita-uninstall"><span class="std std-ref">Uninstall</span></a>'s <a class="reference internal" href="../oase_agent/kubernetes.html#delete-pv"><span class="std std-ref">Delete persistent volumes</span></a> and then re-run <a class="reference internal" href="#ita-install"><span class="std std-ref">Install</span></a>.</div>
</div>
</div>
<div class="admonition danger">
<p class="admonition-title">危険</p>
<div class="line-block">
<div class="line">Do not run <a class="reference internal" href="#delete-data"><span class="std std-ref">Deleting Persistent data</span></a>.</div>
<div class="line">Deleting persistent data will delete all data before the update.</div>
</div>
</div>
<section id="stop-service">
<h4>Stop service<a class="headerlink" href="#stop-service" title="Link to this heading">¶</a></h4>
<ol class="arabic">
<li><p>Pod 起動数の確認</p>
<div class="line-block">
<div class="line">作業前の Pod 起動数の確認をし、状態を記録します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id104">
<div class="code-block-caption"><span class="caption-number">リスト 70 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id104" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>get<span class="w"> </span>deploy,statefulset<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{range .items[*]}{@.metadata.name}:{@.spec.replicas}{&quot;\n&quot;}&#39;</span><span class="w"> </span>-n<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id105">
<div class="code-block-caption"><span class="caption-number">リスト 71 </span><span class="caption-text">実行結果</span><a class="headerlink" href="#id105" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ita-api-admin:1
ita-api-oase-receiver:1
ita-api-organization:1
ita-by-ansible-execute:1
ita-by-ansible-legacy-role-vars-listup:1
ita-by-ansible-legacy-vars-listup:1
ita-by-ansible-pioneer-vars-listup:1
ita-by-ansible-towermaster-sync:1
ita-by-cicd-for-iac:1
ita-by-collector:1
ita-by-conductor-regularly:1
ita-by-conductor-synchronize:1
ita-by-excel-export-import:1
ita-by-hostgroup-split:1
ita-by-menu-create:1
ita-by-menu-export-import:1
ita-by-oase-conclusion:1
ita-by-terraform-cli-execute:1
ita-by-terraform-cli-vars-listup:1
ita-by-terraform-cloud-ep-execute:1
ita-by-terraform-cloud-ep-vars-listup:1
ita-web-server:1
mariadb:1
platform-api:1
platform-auth:1
platform-job:1
platform-web:1
keycloak:1
mongo:1
:
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">各Deployment, StatefulSetのサービス名、replicas数が表示されます。</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">バージョンによって、表示されるサービスが異なります。</div>
</div>
</div>
</li>
<li><p>アプリケーションの停止</p>
<div class="line-block">
<div class="line">アプリケーション (platform-auth) の Pod 起動数を 0 に変更し、アクセスを制限します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id106">
<div class="code-block-caption"><span class="caption-number">リスト 72 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id106" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>scale<span class="w"> </span>deploy,statefulset<span class="w"> </span>-n<span class="w"> </span>exastro<span class="w"> </span>--replicas<span class="o">=</span><span class="m">0</span><span class="w"> </span>--all<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id107">
<div class="code-block-caption"><span class="caption-number">リスト 73 </span><span class="caption-text">実行結果</span><a class="headerlink" href="#id107" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>deployment.apps/ita-api-admin<span class="w"> </span>scaled
deployment.apps/ita-api-oase-receiver<span class="w"> </span>scaled
deployment.apps/ita-api-organization<span class="w"> </span>scaled
deployment.apps/ita-by-ansible-execute<span class="w"> </span>scaled
deployment.apps/ita-by-ansible-legacy-role-vars-listup<span class="w"> </span>scaled
deployment.apps/ita-by-ansible-legacy-vars-listup<span class="w"> </span>scaled
deployment.apps/ita-by-ansible-pioneer-vars-listup<span class="w"> </span>scaled
deployment.apps/ita-by-ansible-towermaster-sync<span class="w"> </span>scaled
deployment.apps/ita-by-cicd-for-iac<span class="w"> </span>scaled
deployment.apps/ita-by-collector<span class="w"> </span>scaled
deployment.apps/ita-by-conductor-regularly<span class="w"> </span>scaled
deployment.apps/ita-by-conductor-synchronize<span class="w"> </span>scaled
deployment.apps/ita-by-excel-export-import<span class="w"> </span>scaled
deployment.apps/ita-by-hostgroup-split<span class="w"> </span>scaled
deployment.apps/ita-by-menu-create<span class="w"> </span>scaled
deployment.apps/ita-by-menu-export-import<span class="w"> </span>scaled
deployment.apps/ita-by-oase-conclusion<span class="w"> </span>scaled
deployment.apps/ita-by-terraform-cli-execute<span class="w"> </span>scaled
deployment.apps/ita-by-terraform-cli-vars-listup<span class="w"> </span>scaled
deployment.apps/ita-by-terraform-cloud-ep-execute<span class="w"> </span>scaled
deployment.apps/ita-by-terraform-cloud-ep-vars-listup<span class="w"> </span>scaled
deployment.apps/ita-web-server<span class="w"> </span>scaled
deployment.apps/mariadb<span class="w"> </span>scaled
deployment.apps/platform-api<span class="w"> </span>scaled
deployment.apps/platform-auth<span class="w"> </span>scaled
deployment.apps/platform-job<span class="w"> </span>scaled
deployment.apps/platform-web<span class="w"> </span>scaled
statefulset.apps/keycloak<span class="w"> </span>scaled
statefulset.apps/mongo<span class="w"> </span>scaled
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">バージョンによって、表示されるサービスが異なります。</div>
</div>
</div>
</li>
<li><p>Pod 起動数の確認</p>
<div class="line-block">
<div class="line">上記で停止した対象の Pod 数が 0 になっていることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id108">
<div class="code-block-caption"><span class="caption-number">リスト 74 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id108" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>get<span class="w"> </span>deploy,statefulset<span class="w"> </span>-n<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id109">
<div class="code-block-caption"><span class="caption-number">リスト 75 </span><span class="caption-text">実行結果</span><a class="headerlink" href="#id109" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                     </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
deployment.apps/ita-api-admin<span class="w">                            </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-api-oase-receiver<span class="w">                    </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-api-organization<span class="w">                     </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-execute<span class="w">                   </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-legacy-role-vars-listup<span class="w">   </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-legacy-vars-listup<span class="w">        </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-pioneer-vars-listup<span class="w">       </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-towermaster-sync<span class="w">          </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-cicd-for-iac<span class="w">                      </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-collector<span class="w">                         </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-conductor-regularly<span class="w">               </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-conductor-synchronize<span class="w">             </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-excel-export-import<span class="w">               </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-hostgroup-split<span class="w">                   </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-menu-create<span class="w">                       </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-menu-export-import<span class="w">                </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-oase-conclusion<span class="w">                   </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cli-execute<span class="w">             </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cli-vars-listup<span class="w">         </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cloud-ep-execute<span class="w">        </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cloud-ep-vars-listup<span class="w">    </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/ita-web-server<span class="w">                           </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/mariadb<span class="w">                                  </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/platform-api<span class="w">                             </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/platform-auth<span class="w">                            </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/platform-job<span class="w">                             </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h
deployment.apps/platform-web<span class="w">                             </span><span class="m">0</span>/0<span class="w">     </span><span class="m">0</span><span class="w">            </span><span class="m">0</span><span class="w">           </span>26h

NAME<span class="w">                        </span>READY<span class="w">   </span>AGE
statefulset.apps/keycloak<span class="w">   </span><span class="m">0</span>/0<span class="w">     </span>25h
statefulset.apps/mongo<span class="w">      </span><span class="m">0</span>/0<span class="w">     </span>26h
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">バージョンによって、表示されるサービスが異なります。</div>
</div>
</div>
</li>
</ol>
</section>
<section id="start-update">
<h4>Start Update<a class="headerlink" href="#start-update" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Start the update.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id110">
<div class="code-block-caption"><span class="caption-number">リスト 76 </span><span class="caption-text">Command</span><a class="headerlink" href="#id110" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>upgrade<span class="w"> </span>exastro<span class="w"> </span>exastro/exastro<span class="w"> </span>--install<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--values<span class="w"> </span>exastro.yaml
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id111">
<div class="code-block-caption"><span class="caption-number">リスト 77 </span><span class="caption-text">Output results</span><a class="headerlink" href="#id111" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME:<span class="w"> </span>exastro
LAST<span class="w"> </span>DEPLOYED:<span class="w"> </span>Sat<span class="w"> </span>Jan<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:00:02<span class="w"> </span><span class="m">2023</span>
NAMESPACE:<span class="w"> </span>exastro
STATUS:<span class="w"> </span>deployed
REVISION:<span class="w"> </span><span class="m">2</span>
TEST<span class="w"> </span>SUITE:<span class="w"> </span>None
NOTES:
Exastro<span class="w"> </span>install<span class="w"> </span>completion!

<span class="m">1</span>.<span class="w"> </span>Execute<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>and<span class="w"> </span><span class="nb">wait</span><span class="w"> </span><span class="k">until</span><span class="w"> </span>the<span class="w"> </span>pod<span class="w"> </span>becomes<span class="w"> </span><span class="s2">&quot;Running&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;Completed&quot;</span>:

<span class="w">  </span><span class="c1"># NOTE: You can also append &quot;-w&quot; to the command or wait until the state changes with &quot;watch command&quot;</span>

<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="w"> </span>exastro

<span class="m">2</span>.<span class="w"> </span>Get<span class="w"> </span>the<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>by<span class="w"> </span>running<span class="w"> </span>these<span class="w"> </span>commands:

<span class="w">  </span><span class="c1"># Exastro IT Automation ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>ita-secret-ita-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span><span class="c1"># Exastro Platform ENCRYPT_KEY</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>platform-secret-pf-global<span class="w"> </span>--namespace<span class="w"> </span>exastro<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.ENCRYPT_KEY}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d

<span class="w">  </span>!!!<span class="w"> </span>Please<span class="w"> </span>save<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>ENCRYPT_KEY<span class="w"> </span>carefully.<span class="w"> </span>!!!

<span class="m">3</span>.<span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span><span class="nb">command</span><span class="w"> </span>to<span class="w"> </span>get<span class="w"> </span>the<span class="w"> </span>application<span class="w"> </span>URL<span class="w"> </span>and<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>URL<span class="w"> </span>or<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>displayed<span class="w"> </span>URL:
<span class="w">  </span>*************************
<span class="w">  </span>*<span class="w"> </span>Service<span class="w"> </span>Console<span class="w">       </span>*
<span class="w">  </span>*************************
<span class="w">  </span>http://exastro-suite.example.local/

<span class="w">  </span>*************************
<span class="w">  </span>*<span class="w"> </span>Administrator<span class="w"> </span>Console<span class="w"> </span>*
<span class="w">  </span>*************************
<span class="w">  </span>http://exastro-suite-mng.example.local/auth/


<span class="w">  </span><span class="c1"># Note: You can display this note again by executing the following command.</span>
</pre></div>
</div>
</div>
</section>
<section id="restart-service">
<h4>Restart service<a class="headerlink" href="#restart-service" title="Link to this heading">¶</a></h4>
<p>※ The replicas specified in <code class="file docutils literal notranslate"><span class="pre">exastro.yaml</span></code> will be re-started. There is therefore no need to restart them manually.</p>
<p>Move on to <a class="reference internal" href="#helm-on-kubernetes-upgrade-status"><span class="std std-ref">Confirm Update status.</span></a>.</p>
<ol class="arabic">
<li><p>サービス再開</p>
<div class="line-block">
<div class="line">サービス停止時に取得した各 Deployment の Pod 起動数を元に戻します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id112">
<div class="code-block-caption"><span class="caption-number">リスト 78 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id112" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>scale<span class="w"> </span>deploy,statefulset<span class="w"> </span>-n<span class="w"> </span>exastro<span class="w"> </span>--replicas<span class="o">=</span><span class="m">1</span><span class="w"> </span>--all<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">個別にreplicas数を設定する場合は以下のコマンドで再開します。</div>
<div class="line">サービス名は、停止時に確認した内容を入力してください。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id113">
<div class="code-block-caption"><span class="caption-number">リスト 79 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id113" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>scale<span class="w"> </span>deployment<span class="w"> </span><span class="o">[</span>サービス名<span class="o">]</span><span class="w"> </span>-n<span class="w"> </span>exastro<span class="w"> </span>--replicas<span class="o">=[</span>replicas数<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Ver.2.4.0以降、サービス名：keycloak、mongodbについては以下のコマンドで再開します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id114">
<div class="code-block-caption"><span class="caption-number">リスト 80 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id114" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>scale<span class="w"> </span>statefulset<span class="w"> </span><span class="o">[</span>サービス名<span class="o">]</span><span class="w"> </span>-n<span class="w"> </span>exastro<span class="w"> </span>--replicas<span class="o">=[</span>replicas数<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<div class="line-block">
<div class="line">サービス名を複数指定する場合は、カンマ区切りで複数のサービス名を指定することができます。</div>
</div>
</div>
</li>
<li><p>Pod 起動数の確認</p>
<div class="line-block">
<div class="line">上記で起動した対象の Pod 数が元に戻りすべて <kbd class="kbd docutils literal notranslate">READY</kbd> になっていることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id115">
<div class="code-block-caption"><span class="caption-number">リスト 81 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id115" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>get<span class="w"> </span>deploy,statefulset<span class="w"> </span>-n<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id116">
<div class="code-block-caption"><span class="caption-number">リスト 82 </span><span class="caption-text">実行結果</span><a class="headerlink" href="#id116" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                     </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
deployment.apps/ita-api-admin<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-api-oase-receiver<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-api-organization<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-execute<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-legacy-role-vars-listup<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-legacy-vars-listup<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-pioneer-vars-listup<span class="w">       </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-ansible-towermaster-sync<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-cicd-for-iac<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-collector<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-conductor-regularly<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-conductor-synchronize<span class="w">             </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-excel-export-import<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-hostgroup-split<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-menu-create<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-menu-export-import<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-oase-conclusion<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cli-execute<span class="w">             </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cli-vars-listup<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cloud-ep-execute<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-by-terraform-cloud-ep-vars-listup<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/ita-web-server<span class="w">                           </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/mariadb<span class="w">                                  </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/platform-api<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/platform-auth<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/platform-job<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h
deployment.apps/platform-web<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>26h

NAME<span class="w">                        </span>READY<span class="w">   </span>AGE
statefulset.apps/keycloak<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>26h
statefulset.apps/mongo<span class="w">      </span><span class="m">1</span>/1<span class="w">     </span>26h
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">バージョンによって、表示されるサービスが異なります。</div>
</div>
</div>
</li>
</ol>
</section>
<section id="confirm-update-status">
<span id="helm-on-kubernetes-upgrade-status"></span><h4>Confirm Update status.<a class="headerlink" href="#confirm-update-status" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">コマンドラインから以下のコマンドを入力して、インストール（サービス起動）が完了していることを確認します。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id117">
<div class="code-block-caption"><span class="caption-number">リスト 83 </span><span class="caption-text">コマンド</span><a class="headerlink" href="#id117" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pod の一覧を取得</span>
kubectl<span class="w"> </span>get<span class="w"> </span>po<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">正常に起動している場合は、<kbd class="kbd docutils literal notranslate">ita</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> と <kbd class="kbd docutils literal notranslate">platform</kbd>-<kbd class="kbd docutils literal notranslate">migration</kbd>-<kbd class="kbd docutils literal notranslate">xxx</kbd> が <kbd class="kbd docutils literal notranslate">Completed</kbd> 、その他すべてが <kbd class="kbd docutils literal notranslate">Running</kbd> となります。</div>
<div class="line">※正常に起動するまで数分かかる場合があります。</div>
</div>
<div class="literal-block-wrapper docutils container" id="id118">
<div class="code-block-caption"><span class="caption-number">リスト 84 </span><span class="caption-text">出力結果</span><a class="headerlink" href="#id118" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NAME<span class="w">                                                      </span>READY<span class="w">   </span>STATUS<span class="w">      </span>RESTARTS<span class="w">   </span>AGE
ita-api-admin-6b8567596d-rgjms<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-oase-receiver-6b74bdff6-zmcrw<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-api-organization-559d7d8f89-ptphh<span class="w">                     </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-execute-5dc444c999-w6gmr<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-role-vars-listup-6d8f98895f-bvjgn<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-legacy-vars-listup-6ccd997cf-hvkzq<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-pioneer-vars-listup-6cfcfd4479-8bqst<span class="w">       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-ansible-towermaster-sync-6759486f8f-wrbbp<span class="w">          </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-cicd-for-iac-7b75cc56f5-rrrvg<span class="w">                      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-collector-7748d54f59-8j5r2<span class="w">                         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-regularly-779ff79775-xnt29<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-conductor-synchronize-5d5485479-5df54<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-excel-export-import-6f84f97dcf-hlm4h<span class="w">               </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-hostgroup-split-59b698f479-cxggd<span class="w">                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-create-796bdc9c75-l79zq<span class="w">                       </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-menu-export-import-849d796bb5-5mpw2<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-oase-conclusion-b484595d7-kssv4<span class="w">                    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-execute-769d874d7-sknn6<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cli-vars-listup-7f589cdddc-g5xz6<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-execute-7f8b6d87cc-kfmfv<span class="w">        </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-by-terraform-cloud-ep-vars-listup-6cccbd4899-6frcn<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
ita-migration-1-3-6-lydz<span class="w">                                  </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
ita-web-server-b4cd4cdf8-wkx78<span class="w">                            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
keycloak-0<span class="w">                                                </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mariadb-778786f7d-ss4cq<span class="w">                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
mongo-0<span class="w">                                                   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-api-ffb78f578-svd5t<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-auth-75895d784-9hhxw<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-job-864c47d4f-8vvvq<span class="w">                              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
platform-migration-1-8-0-rjwr<span class="w">                             </span><span class="m">0</span>/1<span class="w">     </span>Completed<span class="w">   </span><span class="m">0</span><span class="w">          </span>7h40m
platform-web-6644884657-dmwp6<span class="w">                             </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">     </span><span class="m">0</span><span class="w">          </span>7h40m
</pre></div>
</div>
</div>
</section>
</section>
</section>
<section id="uninstall">
<span id="ita-uninstall"></span><h2>Uninstall<a class="headerlink" href="#uninstall" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This section explains how to uninstall Exastro.</div>
</div>
<section id="uninstall-preparation">
<h3>Uninstall preparation<a class="headerlink" href="#uninstall-preparation" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<div class="line-block">
<div class="line">We recommend that the user follow <a class="reference internal" href="../../../manuals/maintenance/backup_and_restore.html"><span class="doc">Data backup/restore</span></a> and back up the data before uninstalling.</div>
</div>
</div>
</section>
<section id="id6">
<h3>Uninstall<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<section id="start-uninstall">
<h4>Start Uninstall<a class="headerlink" href="#start-uninstall" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Start the uninstall process.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id119">
<div class="code-block-caption"><span class="caption-number">リスト 85 </span><span class="caption-text">Command</span><a class="headerlink" href="#id119" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm<span class="w"> </span>uninstall<span class="w"> </span>exastro<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id120">
<div class="code-block-caption"><span class="caption-number">リスト 86 </span><span class="caption-text">Output results</span><a class="headerlink" href="#id120" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>release<span class="w"> </span><span class="s2">&quot;exastro&quot;</span><span class="w"> </span>uninstalled
</pre></div>
</div>
</div>
</section>
<section id="delete-persistent-volumes">
<span id="delete-pv"></span><h4>Delete persistent volumes<a class="headerlink" href="#delete-persistent-volumes" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">This section describes how to delete data if a persistent volume(PV) has been created on Kubernetes using hostPath.</div>
<div class="line">If using external databases (managed databases included), make sure to delete environmental data as well.</div>
</div>
<section id="for-databases">
<h5>For Databases<a class="headerlink" href="#for-databases" title="Link to this heading">¶</a></h5>
<div class="literal-block-wrapper docutils container" id="id121">
<div class="code-block-caption"><span class="caption-number">リスト 87 </span><span class="caption-text">Command</span><a class="headerlink" href="#id121" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pv<span class="w"> </span>pv-database
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id122">
<div class="code-block-caption"><span class="caption-number">リスト 88 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id122" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolume<span class="w"> </span><span class="s2">&quot;pv-database&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
</section>
<section id="for-files">
<h5>For Files<a class="headerlink" href="#for-files" title="Link to this heading">¶</a></h5>
<div class="literal-block-wrapper docutils container" id="id123">
<div class="code-block-caption"><span class="caption-number">リスト 89 </span><span class="caption-text">Command</span><a class="headerlink" href="#id123" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pv<span class="w"> </span>pv-ita-common
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id124">
<div class="code-block-caption"><span class="caption-number">リスト 90 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id124" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolume<span class="w"> </span><span class="s2">&quot;pv-ita-common&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
</section>
<section id="for-oase">
<h5>For OASE<a class="headerlink" href="#for-oase" title="Link to this heading">¶</a></h5>
<div class="literal-block-wrapper docutils container" id="id125">
<div class="code-block-caption"><span class="caption-number">リスト 91 </span><span class="caption-text">Command</span><a class="headerlink" href="#id125" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pv<span class="w"> </span>pv-mongo
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id126">
<div class="code-block-caption"><span class="caption-number">リスト 92 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id126" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolume<span class="w"> </span><span class="s2">&quot;pv-mongo&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id127">
<div class="code-block-caption"><span class="caption-number">リスト 93 </span><span class="caption-text">Command</span><a class="headerlink" href="#id127" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pvc<span class="w"> </span>volume-mongo-storage-mongo-0<span class="w"> </span>--namespace<span class="w"> </span>exastro
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id128">
<div class="code-block-caption"><span class="caption-number">リスト 94 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id128" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolumeclaim<span class="w"> </span><span class="s2">&quot;volume-mongo-storage-mongo-0&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
</section>
<section id="for-gitlab">
<h5>For GitLab<a class="headerlink" href="#for-gitlab" title="Link to this heading">¶</a></h5>
<div class="literal-block-wrapper docutils container" id="id129">
<div class="code-block-caption"><span class="caption-number">リスト 95 </span><span class="caption-text">Command</span><a class="headerlink" href="#id129" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pv<span class="w"> </span>pv-gitlab
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id130">
<div class="code-block-caption"><span class="caption-number">リスト 96 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id130" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolume<span class="w"> </span><span class="s2">&quot;pv-gitlab&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
</section>
<section id="for-monitoring-log-files">
<h5>For Monitoring log files<a class="headerlink" href="#for-monitoring-log-files" title="Link to this heading">¶</a></h5>
<div class="literal-block-wrapper docutils container" id="id131">
<div class="code-block-caption"><span class="caption-number">リスト 97 </span><span class="caption-text">Command</span><a class="headerlink" href="#id131" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl<span class="w"> </span>delete<span class="w"> </span>pv<span class="w"> </span>pv-auditlog
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id132">
<div class="code-block-caption"><span class="caption-number">リスト 98 </span><span class="caption-text">Execution results</span><a class="headerlink" href="#id132" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>persistentvolume<span class="w"> </span><span class="s2">&quot;pv-auditlog&quot;</span><span class="w"> </span>deleted
</pre></div>
</div>
</div>
</section>
</section>
<section id="deleting-persistent-data">
<span id="delete-data"></span><h4>Deleting Persistent data<a class="headerlink" href="#deleting-persistent-data" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">Log in to the Kubernetes Control node and delete the data.</div>
</div>
<section id="id7">
<h5>For Databases<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following command is an example where the hostPath is specified to <code class="file docutils literal notranslate"><span class="pre">/var/data/exastro-suite/exastro-platform/database</span></code> when the Persistent Volume was created.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id133">
<div class="code-block-caption"><span class="caption-number">リスト 99 </span><span class="caption-text">Command</span><a class="headerlink" href="#id133" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log in to control node that has persistent data</span>
ssh<span class="w"> </span>user@contol.node.example

<span class="c1"># Delete persistent data</span>
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/data/exastro-suite/exastro-platform/database
</pre></div>
</div>
</div>
</section>
</section>
<section id="id8">
<h4>For Files<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<div class="line-block">
<div class="line">The following command is an example where the hostPath is specified to <code class="file docutils literal notranslate"><span class="pre">/var/data/exastro-suite/exastro-it-automation/ita-common</span></code> when the Persistent Volume was created.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id134">
<div class="code-block-caption"><span class="caption-number">リスト 100 </span><span class="caption-text">Command</span><a class="headerlink" href="#id134" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log in to control node that has persistent data</span>
ssh<span class="w"> </span>user@contol.node.example

<span class="c1"># Delete persistent data</span>
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/data/exastro-suite/exastro-it-automation/ita-common
</pre></div>
</div>
</div>
<section id="id9">
<h5>For OASE<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following command is an example where the hostPath is specified to  <code class="file docutils literal notranslate"><span class="pre">/var/data/exastro-suite/exastro-platform/mongo</span></code> when the Persistent Volume was created.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id135">
<div class="code-block-caption"><span class="caption-number">リスト 101 </span><span class="caption-text">Command</span><a class="headerlink" href="#id135" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log in to control node that has persistent data</span>
ssh<span class="w"> </span>user@contol.node.example

<span class="c1"># Delete persistent data</span>
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/data/exastro-suite/exastro-platform/mongo
</pre></div>
</div>
</div>
</section>
<section id="id10">
<h5>For GitLab<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following command is an example where the hostPath is specified to  <code class="file docutils literal notranslate"><span class="pre">/var/data/exastro-suite/exastro-platform/gitlab</span></code> when the Persistent Volume was created.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id136">
<div class="code-block-caption"><span class="caption-number">リスト 102 </span><span class="caption-text">Command</span><a class="headerlink" href="#id136" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log in to control node that has persistent data</span>
ssh<span class="w"> </span>user@contol.node.example

<span class="c1"># Delete persistent data</span>
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/data/exastro-suite/exastro-platform/gitlab
</pre></div>
</div>
</div>
</section>
<section id="id11">
<h5>For Monitoring log files<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h5>
<div class="line-block">
<div class="line">The following command is an example where the hostPath is specified to  <code class="file docutils literal notranslate"><span class="pre">/var/log/exastro</span></code> when the Persistent Volume was created.</div>
</div>
<div class="literal-block-wrapper docutils container" id="id137">
<div class="code-block-caption"><span class="caption-number">リスト 103 </span><span class="caption-text">Command</span><a class="headerlink" href="#id137" title="Link to this code">¶</a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Log in to control node that has persistent data</span>
ssh<span class="w"> </span>user@contol.node.example

<span class="c1"># Delete persistent data</span>
sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/log/exastro
</pre></div>
</div>
</div>
</section>
</section>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="index.html" title="前のトピックへ"><span>前のトピックへ</span>Exastro</a></li>
    <li class="next"><a href="docker_compose.html" title="次のトピックへ"><span>次のトピックへ</span>Docker Compose - Online</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2019-2023 NEC Corporation</small>
    <small><a href="/terms/ja.html">サイト規約</a></small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>
<div id="grayBack"></div>

</div><!-- End #container -->
  </body>
</html>