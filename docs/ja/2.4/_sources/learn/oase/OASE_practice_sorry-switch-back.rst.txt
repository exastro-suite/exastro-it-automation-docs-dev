=================================
Sorry画面切り戻し実施 (演習問題)
=================================

| 本シナリオでは、:doc:`前のシナリオ <OASE_scenario_sorry-switch>` でSorry画面に切り替わった状況を、リクエスト数が閾値内に回復したイベント発生に合わせて切り戻しする作業の自動化を実現しましょう。

問題
====

| 以下のようなリクエスト数が閾値内に回復したイベントが発生したときに、Sorry画面切り戻しのアクションが実行されるようにOASEの設定を行ってください。
| 応用として、Sorry画面切り戻しのアクションの実行の条件は、リクエスト数が閾値内に回復したイベントと合わせて、現在の状況がSorry画面に切り替わっていること、の二つを設定してみましょう。

.. list-table:: 通知メール一覧
   :widths: 5 10
   :header-rows: 1

   * - 通知内容
     - Sorry画面切り替え中にリクエスト数が閾値内に回復した場合
   * - :kbd:`件名`
     - :kbd:`[info] Requests: Threshold recovery`
   * - :kbd:`本文`
     - :kbd:`リクエスト数が、閾値内に回復しました。` `RequestCount < 150`

.. danger::
  | Sorry画面に切り替えが行われているのかどうかは、Sorry画面に切り替えたアクションの結論イベントに付与したラベルから特定することができます。
  | Sorry画面に切り替えたときの結論イベントのTTLが切れている場合は、改めて、:doc:`OASE_scenario_sorry-switch` に沿って、Sorry画面に切り替えたアクションの結論イベントを発生させましょう。

解答
====

| :doc:`OASE_answer_sorry-switch-back`